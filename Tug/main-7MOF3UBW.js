var OE=Object.defineProperty,PE=Object.defineProperties;var kE=Object.getOwnPropertyDescriptors;var Np=Object.getOwnPropertySymbols;var FE=Object.prototype.hasOwnProperty,LE=Object.prototype.propertyIsEnumerable;var Rp=(t,e,n)=>e in t?OE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y=(t,e)=>{for(var n in e||={})FE.call(e,n)&&Rp(t,n,e[n]);if(Np)for(var n of Np(e))LE.call(e,n)&&Rp(t,n,e[n]);return t},Z=(t,e)=>PE(t,kE(e));var m=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var xp=null;var sl=1,Op=Symbol("SIGNAL");function G(t){let e=xp;return xp=t,e}var Pp={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function VE(t){if(!(cl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===sl)){if(!t.producerMustRecompute(t)&&!ol(t)){t.dirty=!1,t.lastCleanEpoch=sl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=sl}}function kp(t){return t&&(t.nextProducerIndex=0),G(t)}function Fp(t,e){if(G(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(cl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)al(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ol(t){ao(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(VE(n),r!==n.version))return!0}return!1}function Lp(t){if(ao(t),cl(t))for(let e=0;e<t.producerNode.length;e++)al(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function al(t,e){if(jE(t),ao(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)al(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ao(i),i.producerIndexOfThis[r]=e}}function cl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ao(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function jE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function UE(){throw new Error}var BE=UE;function Vp(t){BE=t}function S(t){return typeof t=="function"}function hr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var co=hr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Cn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ce=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(S(r))try{r()}catch(s){e=s instanceof co?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{jp(s)}catch(o){e=e??[],o instanceof co?e=[...e,...o.errors]:e.push(o)}}if(e)throw new co(e)}}add(e){var n;if(e&&e!==this)if(this.closed)jp(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Cn(n,e)}remove(e){let{_finalizers:n}=this;n&&Cn(n,e),e instanceof t&&e._removeParent(this)}};ce.EMPTY=(()=>{let t=new ce;return t.closed=!0,t})();var ll=ce.EMPTY;function lo(t){return t instanceof ce||t&&"closed"in t&&S(t.remove)&&S(t.add)&&S(t.unsubscribe)}function jp(t){S(t)?t():t.unsubscribe()}var et={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fr={setTimeout(t,e,...n){let{delegate:r}=fr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=fr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function uo(t){fr.setTimeout(()=>{let{onUnhandledError:e}=et;if(e)e(t);else throw t})}function Ei(){}var Up=ul("C",void 0,void 0);function Bp(t){return ul("E",void 0,t)}function $p(t){return ul("N",t,void 0)}function ul(t,e,n){return{kind:t,value:e,error:n}}var Dn=null;function pr(t){if(et.useDeprecatedSynchronousErrorHandling){let e=!Dn;if(e&&(Dn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Dn;if(Dn=null,n)throw r}}else t()}function Hp(t){et.useDeprecatedSynchronousErrorHandling&&Dn&&(Dn.errorThrown=!0,Dn.error=t)}var bn=class extends ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lo(e)&&e.add(this)):this.destination=WE}static create(e,n,r){return new gr(e,n,r)}next(e){this.isStopped?hl($p(e),this):this._next(e)}error(e){this.isStopped?hl(Bp(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hl(Up,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$E=Function.prototype.bind;function dl(t,e){return $E.call(t,e)}var fl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ho(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ho(r)}else ho(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ho(n)}}},gr=class extends bn{constructor(e,n,r){super();let i;if(S(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&et.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&dl(e.next,s),error:e.error&&dl(e.error,s),complete:e.complete&&dl(e.complete,s)}):i=e}this.destination=new fl(i)}};function ho(t){et.useDeprecatedSynchronousErrorHandling?Hp(t):uo(t)}function HE(t){throw t}function hl(t,e){let{onStoppedNotification:n}=et;n&&fr.setTimeout(()=>n(t,e))}var WE={closed:!0,next:Ei,error:HE,complete:Ei};var mr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ke(t){return t}function pl(...t){return gl(t)}function gl(t){return t.length===0?ke:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var $=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=GE(n)?n:new gr(n,r,i);return pr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Wp(r),new r((i,s)=>{let o=new gr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[mr](){return this}pipe(...n){return gl(n)(this)}toPromise(n){return n=Wp(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Wp(t){var e;return(e=t??et.Promise)!==null&&e!==void 0?e:Promise}function zE(t){return t&&S(t.next)&&S(t.error)&&S(t.complete)}function GE(t){return t&&t instanceof bn||zE(t)&&lo(t)}function ml(t){return S(t?.lift)}function H(t){return e=>{if(ml(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(t,e,n,r,i){return new vl(t,e,n,r,i)}var vl=class extends bn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function vr(){return H((t,e)=>{let n=null;t._refCount++;let r=j(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var yr=class extends ${constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ml(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ce;let n=this.getSubject();e.add(this.source.subscribe(j(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ce.EMPTY)}return e}refCount(){return vr()(this)}};var zp=hr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=(()=>{class t extends ${constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new fo(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new zp}next(n){pr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){pr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){pr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ll:(this.currentObservers=null,s.push(n),new ce(()=>{this.currentObservers=null,Cn(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new $;return n.source=this,n}}return t.create=(e,n)=>new fo(e,n),t})(),fo=class extends X{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ll}};var _e=class extends X{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var yl={now(){return(yl.delegate||Date).now()},delegate:void 0};var po=class extends ce{constructor(e,n){super()}schedule(e,n=0){return this}};var Ci={setInterval(t,e,...n){let{delegate:r}=Ci;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ci;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _r=class extends po{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Ci.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ci.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Cn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ir=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ir.now=yl.now;var wr=class extends Ir{constructor(e,n=Ir.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var _l=new wr(_r);var go=class extends _r{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var mo=class extends wr{};var Il=new mo(go);var Fe=new $(t=>t.complete());function Gp(t){return t&&S(t.schedule)}function qp(t){return t[t.length-1]}function vo(t){return S(qp(t))?t.pop():void 0}function qt(t){return Gp(qp(t))?t.pop():void 0}function wl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Kp(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Yp(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tn(t){return this instanceof Tn?(this.v=t,this):new Tn(t)}function Qp(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,v){s.push([h,f,p,v])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){h.value instanceof Tn?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Zp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Yp=="function"?Yp(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var yo=t=>t&&typeof t.length=="number"&&typeof t!="function";function _o(t){return S(t?.then)}function Io(t){return S(t[mr])}function wo(t){return Symbol.asyncIterator&&S(t?.[Symbol.asyncIterator])}function Eo(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Co=qE();function Do(t){return S(t?.[Co])}function bo(t){return Qp(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Tn(n.read());if(i)return yield Tn(void 0);yield yield Tn(r)}}finally{n.releaseLock()}})}function To(t){return S(t?.getReader)}function ue(t){if(t instanceof $)return t;if(t!=null){if(Io(t))return YE(t);if(yo(t))return KE(t);if(_o(t))return QE(t);if(wo(t))return Jp(t);if(Do(t))return ZE(t);if(To(t))return JE(t)}throw Eo(t)}function YE(t){return new $(e=>{let n=t[mr]();if(S(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KE(t){return new $(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function QE(t){return new $(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,uo)})}function ZE(t){return new $(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Jp(t){return new $(e=>{XE(t,e).catch(n=>e.error(n))})}function JE(t){return Jp(bo(t))}function XE(t,e){var n,r,i,s;return Kp(this,void 0,void 0,function*(){try{for(n=Zp(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ne(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Yt(t,e=0){return H((n,r)=>{n.subscribe(j(r,i=>Ne(r,t,()=>r.next(i),e),()=>Ne(r,t,()=>r.complete(),e),i=>Ne(r,t,()=>r.error(i),e)))})}function Kt(t,e=0){return H((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Xp(t,e){return ue(t).pipe(Kt(e),Yt(e))}function eg(t,e){return ue(t).pipe(Kt(e),Yt(e))}function tg(t,e){return new $(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function ng(t,e){return new $(n=>{let r;return Ne(n,e,()=>{r=t[Co](),Ne(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>S(r?.return)&&r.return()})}function So(t,e){if(!t)throw new Error("Iterable cannot be null");return new $(n=>{Ne(n,e,()=>{let r=t[Symbol.asyncIterator]();Ne(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function rg(t,e){return So(bo(t),e)}function ig(t,e){if(t!=null){if(Io(t))return Xp(t,e);if(yo(t))return tg(t,e);if(_o(t))return eg(t,e);if(wo(t))return So(t,e);if(Do(t))return ng(t,e);if(To(t))return rg(t,e)}throw Eo(t)}function le(t,e){return e?ig(t,e):ue(t)}function A(...t){let e=qt(t);return le(t,e)}function Er(t,e){let n=S(t)?t:()=>t,r=i=>i.error(n());return new $(e?i=>e.schedule(r,0,i):r)}function El(t){return!!t&&(t instanceof $||S(t.lift)&&S(t.subscribe))}var kt=hr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function U(t,e){return H((n,r)=>{let i=0;n.subscribe(j(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:eC}=Array;function tC(t,e){return eC(e)?t(...e):t(e)}function Ao(t){return U(e=>tC(t,e))}var{isArray:nC}=Array,{getPrototypeOf:rC,prototype:iC,keys:sC}=Object;function Mo(t){if(t.length===1){let e=t[0];if(nC(e))return{args:e,keys:null};if(oC(e)){let n=sC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function oC(t){return t&&typeof t=="object"&&rC(t)===iC}function No(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ro(...t){let e=qt(t),n=vo(t),{args:r,keys:i}=Mo(t);if(r.length===0)return le([],e);let s=new $(aC(r,e,i?o=>No(i,o):ke));return n?s.pipe(Ao(n)):s}function aC(t,e,n=ke){return r=>{sg(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)sg(e,()=>{let l=le(t[c],e),u=!1;l.subscribe(j(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function sg(t,e,n){t?Ne(n,t,e):e()}function og(t,e,n,r,i,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=v=>l<r?p(v):c.push(v),p=v=>{s&&e.next(v),l++;let T=!1;ue(n(v,u++)).subscribe(j(e,R=>{i?.(R),s?f(R):e.next(R)},()=>{T=!0},void 0,()=>{if(T)try{for(l--;c.length&&l<r;){let R=c.shift();o?Ne(e,o,()=>p(R)):p(R)}h()}catch(R){e.error(R)}}))};return t.subscribe(j(e,f,()=>{d=!0,h()})),()=>{a?.()}}function he(t,e,n=1/0){return S(e)?he((r,i)=>U((s,o)=>e(r,s,i,o))(ue(t(r,i))),n):(typeof e=="number"&&(n=e),H((r,i)=>og(r,i,t,n)))}function Cl(t=1/0){return he(ke,t)}function ag(){return Cl(1)}function Cr(...t){return ag()(le(t,qt(t)))}function xo(t){return new $(e=>{ue(t()).subscribe(e)})}function Dl(...t){let e=vo(t),{args:n,keys:r}=Mo(t),i=new $(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;ue(n[u]).subscribe(j(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?No(r,a):a),s.complete())}))}});return e?i.pipe(Ao(e)):i}function tt(t,e){return H((n,r)=>{let i=0;n.subscribe(j(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Qt(t){return H((e,n)=>{let r=null,i=!1,s;r=e.subscribe(j(n,void 0,void 0,o=>{s=ue(t(o,Qt(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function cg(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(j(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Dr(t,e){return S(e)?he(t,e,1):he(t,1)}function Zt(t){return H((e,n)=>{let r=!1;e.subscribe(j(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ft(t){return t<=0?()=>Fe:H((e,n)=>{let r=0;e.subscribe(j(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function bl(t){return U(()=>t)}function Oo(t=cC){return H((e,n)=>{let r=!1;e.subscribe(j(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function cC(){return new kt}function Di(t){return H((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function gt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?tt((i,s)=>t(i,s,r)):ke,Ft(1),n?Zt(e):Oo(()=>new kt))}function br(t){return t<=0?()=>Fe:H((e,n)=>{let r=[];e.subscribe(j(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Tl(t,e){let n=arguments.length>=2;return r=>r.pipe(t?tt((i,s)=>t(i,s,r)):ke,br(1),n?Zt(e):Oo(()=>new kt))}function Sl(t,e){return H(cg(t,e,arguments.length>=2,!0))}function Al(...t){let e=qt(t);return H((n,r)=>{(e?Cr(t,n,e):Cr(t,n)).subscribe(r)})}function nt(t,e){return H((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(j(r,c=>{i?.unsubscribe();let l=0,u=s++;ue(t(c,u)).subscribe(i=j(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ml(t){return H((e,n)=>{ue(t).subscribe(j(n,()=>n.complete(),Ei)),!n.closed&&e.subscribe(n)})}function fe(t,e,n){let r=S(t)||e||n?{next:t,error:e,complete:n}:t;return r?H((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(j(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ke}var Wg="https://g.co/ng/security#xss",w=class extends Error{constructor(e,n){super(Su(e,n)),this.code=e}};function Su(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Vi(t){return{toString:t}.toString()}var Po="__parameters__";function lC(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function uC(t,e,n){return Vi(()=>{let r=lC(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Po)?c[Po]:Object.defineProperty(c,Po,{value:[]})[Po];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var bi=globalThis;function ee(t){for(let e in t)if(t[e]===ee)return e;throw Error("Could not find renamed property on target object.")}function dC(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Se(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Se).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function lg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var hC=ee({__forward_ref__:ee});function Ln(t){return t.__forward_ref__=Ln,t.toString=function(){return Se(this())},t}function be(t){return zg(t)?t():t}function zg(t){return typeof t=="function"&&t.hasOwnProperty(hC)&&t.__forward_ref__===Ln}function I(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Vn(t){return{providers:t.providers||[],imports:t.imports||[]}}function aa(t){return ug(t,qg)||ug(t,Yg)}function Gg(t){return aa(t)!==null}function ug(t,e){return t.hasOwnProperty(e)?t[e]:null}function fC(t){let e=t&&(t[qg]||t[Yg]);return e||null}function dg(t){return t&&(t.hasOwnProperty(hg)||t.hasOwnProperty(pC))?t[hg]:null}var qg=ee({\u0275prov:ee}),hg=ee({\u0275inj:ee}),Yg=ee({ngInjectableDef:ee}),pC=ee({ngInjectorDef:ee}),C=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Kg(t){return t&&!!t.\u0275providers}var gC=ee({\u0275cmp:ee}),mC=ee({\u0275dir:ee}),vC=ee({\u0275pipe:ee}),yC=ee({\u0275mod:ee}),$o=ee({\u0275fac:ee}),Ti=ee({__NG_ELEMENT_ID__:ee}),fg=ee({__NG_ENV_ID__:ee});function Au(t){return typeof t=="string"?t:t==null?"":String(t)}function _C(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Au(t)}function IC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new w(-200,t)}function Mu(t,e){throw new w(-201,!1)}var P=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(P||{}),zl;function Qg(){return zl}function $e(t){let e=zl;return zl=t,e}function Zg(t,e,n){let r=aa(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&P.Optional)return null;if(e!==void 0)return e;Mu(t,"Injector")}var wC={},Si=wC,Gl="__NG_DI_FLAG__",Ho="ngTempTokenPath",EC="ngTokenPath",CC=/\n/gm,DC="\u0275",pg="__source",Mr;function bC(){return Mr}function Jt(t){let e=Mr;return Mr=t,e}function TC(t,e=P.Default){if(Mr===void 0)throw new w(-203,!1);return Mr===null?Zg(t,void 0,e):Mr.get(t,e&P.Optional?null:void 0,e)}function O(t,e=P.Default){return(Qg()||TC)(be(t),e)}function _(t,e=P.Default){return O(t,ca(e))}function ca(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ql(t){let e=[];for(let n=0;n<t.length;n++){let r=be(t[n]);if(Array.isArray(r)){if(r.length===0)throw new w(900,!1);let i,s=P.Default;for(let o=0;o<r.length;o++){let a=r[o],c=AC(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(O(i,s))}else e.push(O(r))}return e}function SC(t,e){return t[Gl]=e,t.prototype[Gl]=e,t}function AC(t){return t[Gl]}function MC(t,e,n,r){let i=t[Ho];throw e[pg]&&i.unshift(e[pg]),t.message=NC(`
`+t.message,i,n,r),t[EC]=i,t[Ho]=null,t}function NC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==DC?t.slice(2):t;let i=Se(e);if(Array.isArray(e))i=e.map(Se).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Se(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(CC,`
  `)}`}var wt=SC(uC("Optional"),8);function Rr(t,e){let n=t.hasOwnProperty($o);return n?t[$o]:null}function Nu(t,e){t.forEach(n=>Array.isArray(n)?Nu(n,e):e(n))}function Jg(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Wo(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function RC(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function xC(t,e,n){let r=ji(t,e);return r>=0?t[r|1]=n:(r=~r,RC(t,r,e,n)),r}function Nl(t,e){let n=ji(t,e);if(n>=0)return t[n|1]}function ji(t,e){return OC(t,e,1)}function OC(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var xr={},He=[],Or=new C(""),Xg=new C("",-1),em=new C(""),zo=class{get(e,n=Si){if(n===Si){let r=new Error(`NullInjectorError: No provider for ${Se(e)}!`);throw r.name="NullInjectorError",r}return n}},tm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(tm||{}),yt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(yt||{}),ze=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ze||{});function PC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Yl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];FC(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function kC(t){return t===3||t===4||t===6}function FC(t){return t.charCodeAt(0)===64}function Ai(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?gg(t,n,i,null,e[++r]):gg(t,n,i,null,null))}}return t}function gg(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var nm="ng-template";function LC(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&PC(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ru(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Ru(t){return t.type===4&&t.value!==nm}function VC(t,e,n){let r=t.type===4&&!n?nm:t.value;return e===r}function jC(t,e,n){let r=4,i=t.attrs,s=i!==null?$C(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!rt(r)&&!rt(c))return!1;if(o&&rt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!VC(t,c,n)||c===""&&e.length===1){if(rt(r))return!1;o=!0}}else if(r&8){if(i===null||!LC(t,i,c,n)){if(rt(r))return!1;o=!0}}else{let l=e[++a],u=UC(c,i,Ru(t),n);if(u===-1){if(rt(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(rt(r))return!1;o=!0}}}}return rt(r)||o}function rt(t){return(t&1)===0}function UC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return HC(e,t)}function BC(t,e,n=!1){for(let r=0;r<e.length;r++)if(jC(t,e[r],n))return!0;return!1}function $C(t){for(let e=0;e<t.length;e++){let n=t[e];if(kC(n))return e}return t.length}function HC(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function mg(t,e){return t?":not("+e.trim()+")":e}function WC(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!rt(o)&&(e+=mg(s,i),i=""),r=o,s=s||!rt(r);n++}return i!==""&&(e+=mg(s,i)),e}function zC(t){return t.map(WC).join(",")}function GC(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!rt(i))break;i=s}r++}return{attrs:e,classes:n}}function qe(t){return Vi(()=>{let e=am(t),n=Z(y({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===tm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||yt.Emulated,styles:t.styles||He,_:null,schemas:t.schemas||null,tView:null,id:""});cm(n);let r=t.dependencies;return n.directiveDefs=yg(r,!1),n.pipeDefs=yg(r,!0),n.id=KC(n),n})}function qC(t){return Mn(t)||rm(t)}function YC(t){return t!==null}function jn(t){return Vi(()=>({type:t.type,bootstrap:t.bootstrap||He,declarations:t.declarations||He,imports:t.imports||He,exports:t.exports||He,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function vg(t,e){if(t==null)return xr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=ze.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==ze.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Re(t){return Vi(()=>{let e=am(t);return cm(e),e})}function Mn(t){return t[gC]||null}function rm(t){return t[mC]||null}function im(t){return t[vC]||null}function sm(t){let e=Mn(t)||rm(t)||im(t);return e!==null?e.standalone:!1}function om(t,e){let n=t[yC]||null;if(!n&&e===!0)throw new Error(`Type ${Se(t)} does not have '\u0275mod' property.`);return n}function am(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||xr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||He,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:vg(t.inputs,e),outputs:vg(t.outputs),debugInfo:null}}function cm(t){t.features?.forEach(e=>e(t))}function yg(t,e){if(!t)return null;let n=e?im:qC;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(YC)}function KC(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nn(t){return{\u0275providers:t}}function QC(...t){return{\u0275providers:lm(!0,t),\u0275fromNgModule:!0}}function lm(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Nu(e,o=>{let a=o;Kl(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&um(i,s),n}function um(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];xu(i,s=>{e(s,r)})}}function Kl(t,e,n,r){if(t=be(t),!t)return!1;let i=null,s=dg(t),o=!s&&Mn(t);if(!s&&!o){let c=t.ngModule;if(s=dg(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Kl(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Nu(s.imports,u=>{Kl(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&um(l,e)}if(!a){let l=Rr(i)||(()=>new i);e({provide:i,useFactory:l,deps:He},i),e({provide:em,useValue:i,multi:!0},i),e({provide:Or,useValue:()=>O(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;xu(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function xu(t,e){for(let n of t)Kg(n)&&(n=n.\u0275providers),Array.isArray(n)?xu(n,e):e(n)}var ZC=ee({provide:String,useValue:ee});function dm(t){return t!==null&&typeof t=="object"&&ZC in t}function JC(t){return!!(t&&t.useExisting)}function XC(t){return!!(t&&t.useFactory)}function Pr(t){return typeof t=="function"}function eD(t){return!!t.useClass}var la=new C(""),Lo={},tD={},Rl;function Ou(){return Rl===void 0&&(Rl=new zo),Rl}var Ge=class{},Mi=class extends Ge{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zl(e,o=>this.processProvider(o)),this.records.set(Xg,Tr(void 0,this)),i.has("environment")&&this.records.set(Ge,Tr(void 0,this));let s=this.records.get(la);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(em,He,P.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Jt(this),r=$e(void 0),i;try{return e()}finally{Jt(n),$e(r)}}get(e,n=Si,r=P.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(fg))return e[fg](this);r=ca(r);let i,s=Jt(this),o=$e(void 0);try{if(!(r&P.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=oD(e)&&aa(e);l&&this.injectableDefInScope(l)?c=Tr(Ql(e),Lo):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&P.Self?Ou():this.parent;return n=r&P.Optional&&n===Si?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ho]=a[Ho]||[]).unshift(Se(e)),s)throw a;return MC(a,e,"R3InjectorError",this.source)}else throw a}finally{$e(o),Jt(s)}}resolveInjectorInitializers(){let e=G(null),n=Jt(this),r=$e(void 0),i;try{let s=this.get(Or,He,P.Self);for(let o of s)o()}finally{Jt(n),$e(r),G(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Se(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new w(205,!1)}processProvider(e){e=be(e);let n=Pr(e)?e:be(e&&e.provide),r=rD(e);if(!Pr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Tr(void 0,Lo,!0),i.factory=()=>ql(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=G(null);try{return n.value===Lo&&(n.value=tD,n.value=n.factory()),typeof n.value=="object"&&n.value&&sD(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{G(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=be(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ql(t){let e=aa(t),n=e!==null?e.factory:Rr(t);if(n!==null)return n;if(t instanceof C)throw new w(204,!1);if(t instanceof Function)return nD(t);throw new w(204,!1)}function nD(t){if(t.length>0)throw new w(204,!1);let n=fC(t);return n!==null?()=>n.factory(t):()=>new t}function rD(t){if(dm(t))return Tr(void 0,t.useValue);{let e=hm(t);return Tr(e,Lo)}}function hm(t,e,n){let r;if(Pr(t)){let i=be(t);return Rr(i)||Ql(i)}else if(dm(t))r=()=>be(t.useValue);else if(XC(t))r=()=>t.useFactory(...ql(t.deps||[]));else if(JC(t))r=()=>O(be(t.useExisting));else{let i=be(t&&(t.useClass||t.provide));if(iD(t))r=()=>new i(...ql(t.deps));else return Rr(i)||Ql(i)}return r}function Tr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function iD(t){return!!t.deps}function sD(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function oD(t){return typeof t=="function"||typeof t=="object"&&t instanceof C}function Zl(t,e){for(let n of t)Array.isArray(n)?Zl(n,e):n&&Kg(n)?Zl(n.\u0275providers,e):e(n)}function Un(t,e){t instanceof Mi&&t.assertNotDestroyed();let n,r=Jt(t),i=$e(void 0);try{return e()}finally{Jt(r),$e(i)}}function aD(){return Qg()!==void 0||bC()!=null}function cD(t){return typeof t=="function"}var Bt=0,B=1,E=2,Ee=3,it=4,at=5,Go=6,Ni=7,st=8,kr=9,ot=10,Ie=11,Ri=12,_g=13,jr=14,_t=15,ua=16,Sr=17,Fr=18,da=19,fm=20,Xt=21,xl=22,Nn=23,Lt=25,pm=1;var Rn=7,qo=8,Yo=9,We=10,Pu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Pu||{});function Sn(t){return Array.isArray(t)&&typeof t[pm]=="object"}function $t(t){return Array.isArray(t)&&t[pm]===!0}function gm(t){return(t.flags&4)!==0}function ha(t){return t.componentOffset>-1}function ku(t){return(t.flags&1)===1}function en(t){return!!t.template}function lD(t){return(t[E]&512)!==0}var Jl=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function mm(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ur(){return vm}function vm(t){return t.type.prototype.ngOnChanges&&(t.setInput=dD),uD}Ur.ngInherit=!0;function uD(){let t=_m(this),e=t?.current;if(e){let n=t.previous;if(n===xr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function dD(t,e,n,r,i){let s=this.declaredInputs[r],o=_m(t)||hD(t,{previous:xr,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Jl(l&&l.currentValue,n,c===xr),mm(t,e,i,n)}var ym="__ngSimpleChanges__";function _m(t){return t[ym]||null}function hD(t,e){return t[ym]=e}var Ig=null;var mt=function(t,e,n){Ig?.(t,e,n)},fD="svg",pD="math",gD=!1;function mD(){return gD}function It(t){for(;Array.isArray(t);)t=t[Bt];return t}function Im(t,e){return It(e[t])}function ct(t,e){return It(e[t.index])}function wm(t,e){return t.data[e]}function vD(t,e){return t[e]}function rn(t,e){let n=e[t];return Sn(n)?n:n[Bt]}function Fu(t){return(t[E]&128)===128}function yD(t){return $t(t[Ee])}function Ko(t,e){return e==null?null:t[e]}function Em(t){t[Sr]=0}function _D(t){t[E]&1024||(t[E]|=1024,Fu(t)&&xi(t))}function ID(t,e){for(;t>0;)e=e[jr],t--;return e}function Lu(t){return!!(t[E]&9216||t[Nn]?.dirty)}function Xl(t){t[ot].changeDetectionScheduler?.notify(1),Lu(t)?xi(t):t[E]&64&&(mD()?(t[E]|=1024,xi(t)):t[ot].changeDetectionScheduler?.notify())}function xi(t){t[ot].changeDetectionScheduler?.notify();let e=Oi(t);for(;e!==null&&!(e[E]&8192||(e[E]|=8192,!Fu(e)));)e=Oi(e)}function Cm(t,e){if((t[E]&256)===256)throw new w(911,!1);t[Xt]===null&&(t[Xt]=[]),t[Xt].push(e)}function wD(t,e){if(t[Xt]===null)return;let n=t[Xt].indexOf(e);n!==-1&&t[Xt].splice(n,1)}function Oi(t){let e=t[Ee];return $t(e)?e[Ee]:e}var L={lFrame:Rm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ED(){return L.lFrame.elementDepthCount}function CD(){L.lFrame.elementDepthCount++}function DD(){L.lFrame.elementDepthCount--}function Dm(){return L.bindingsEnabled}function bD(){return L.skipHydrationRootTNode!==null}function TD(t){return L.skipHydrationRootTNode===t}function SD(){L.skipHydrationRootTNode=null}function re(){return L.lFrame.lView}function lt(){return L.lFrame.tView}function Vu(t){return L.lFrame.contextLView=t,t[st]}function ju(t){return L.lFrame.contextLView=null,t}function Ye(){let t=bm();for(;t!==null&&t.type===64;)t=t.parent;return t}function bm(){return L.lFrame.currentTNode}function AD(){let t=L.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ui(t,e){let n=L.lFrame;n.currentTNode=t,n.isParent=e}function Tm(){return L.lFrame.isParent}function MD(){L.lFrame.isParent=!1}function ND(){return L.lFrame.contextLView}function RD(t){return L.lFrame.bindingIndex=t}function Sm(){return L.lFrame.bindingIndex++}function xD(t){let e=L.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function OD(){return L.lFrame.inI18n}function PD(t,e){let n=L.lFrame;n.bindingIndex=n.bindingRootIndex=t,eu(e)}function kD(){return L.lFrame.currentDirectiveIndex}function eu(t){L.lFrame.currentDirectiveIndex=t}function FD(t){let e=L.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Am(t){L.lFrame.currentQueryIndex=t}function LD(t){let e=t[B];return e.type===2?e.declTNode:e.type===1?t[at]:null}function Mm(t,e,n){if(n&P.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&P.Host);)if(i=LD(s),i===null||(s=s[jr],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=L.lFrame=Nm();return r.currentTNode=e,r.lView=t,!0}function Uu(t){let e=Nm(),n=t[B];L.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Nm(){let t=L.lFrame,e=t===null?null:t.child;return e===null?Rm(t):e}function Rm(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function xm(){let t=L.lFrame;return L.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Om=xm;function Bu(){let t=xm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function VD(t){return(L.lFrame.contextLView=ID(t,L.lFrame.contextLView))[st]}function Br(){return L.lFrame.selectedIndex}function xn(t){L.lFrame.selectedIndex=t}function Pm(){let t=L.lFrame;return wm(t.tView,t.selectedIndex)}function jD(){return L.lFrame.currentNamespace}var km=!0;function $u(){return km}function Hu(t){km=t}function UD(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=vm(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Wu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Vo(t,e,n){Fm(t,e,3,n)}function jo(t,e,n,r){(t[E]&3)===n&&Fm(t,e,n,r)}function Ol(t,e){let n=t[E];(n&3)===e&&(n&=16383,n+=1,t[E]=n)}function Fm(t,e,n,r){let i=r!==void 0?t[Sr]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Sr]+=65536),(a<s||s==-1)&&(BD(t,n,e,c),t[Sr]=(t[Sr]&4294901760)+c+2),c++}function wg(t,e){mt(4,t,e);let n=G(null);try{e.call(t)}finally{G(n),mt(5,t,e)}}function BD(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[E]>>14<t[Sr]>>16&&(t[E]&3)===e&&(t[E]+=16384,wg(a,s)):wg(a,s)}var Nr=-1,On=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function $D(t){return t instanceof On}function HD(t){return(t.flags&8)!==0}function WD(t){return(t.flags&16)!==0}function Lm(t){return t!==Nr}function Qo(t){return t&32767}function zD(t){return t>>16}function Zo(t,e){let n=zD(t),r=e;for(;n>0;)r=r[jr],n--;return r}var tu=!0;function Eg(t){let e=tu;return tu=t,e}var GD=256,Vm=GD-1,jm=5,qD=0,vt={};function YD(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ti)&&(r=n[Ti]),r==null&&(r=n[Ti]=qD++);let i=r&Vm,s=1<<i;e.data[t+(i>>jm)]|=s}function Jo(t,e){let n=Um(t,e);if(n!==-1)return n;let r=e[B];r.firstCreatePass&&(t.injectorIndex=e.length,Pl(r.data,t),Pl(e,null),Pl(r.blueprint,null));let i=zu(t,e),s=t.injectorIndex;if(Lm(i)){let o=Qo(i),a=Zo(i,e),c=a[B].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Pl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Um(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function zu(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=zm(i),r===null)return Nr;if(n++,i=i[jr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Nr}function nu(t,e,n){YD(t,e,n)}function Bm(t,e,n){if(n&P.Optional||t!==void 0)return t;Mu(e,"NodeInjector")}function $m(t,e,n,r){if(n&P.Optional&&r===void 0&&(r=null),!(n&(P.Self|P.Host))){let i=t[kr],s=$e(void 0);try{return i?i.get(e,r,n&P.Optional):Zg(e,r,n&P.Optional)}finally{$e(s)}}return Bm(r,e,n)}function Hm(t,e,n,r=P.Default,i){if(t!==null){if(e[E]&2048&&!(r&P.Self)){let o=XD(t,e,n,r,vt);if(o!==vt)return o}let s=Wm(t,e,n,r,vt);if(s!==vt)return s}return $m(e,n,r,i)}function Wm(t,e,n,r,i){let s=ZD(n);if(typeof s=="function"){if(!Mm(e,t,r))return r&P.Host?Bm(i,n,r):$m(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&P.Optional))Mu(n);else return o}finally{Om()}}else if(typeof s=="number"){let o=null,a=Um(t,e),c=Nr,l=r&P.Host?e[_t][at]:null;for((a===-1||r&P.SkipSelf)&&(c=a===-1?zu(t,e):e[a+8],c===Nr||!Dg(r,!1)?a=-1:(o=e[B],a=Qo(c),e=Zo(c,e)));a!==-1;){let u=e[B];if(Cg(s,a,u.data)){let d=KD(a,e,n,o,r,l);if(d!==vt)return d}c=e[a+8],c!==Nr&&Dg(r,e[B].data[a+8]===l)&&Cg(s,a,e)?(o=u,a=Qo(c),e=Zo(c,e)):a=-1}}return i}function KD(t,e,n,r,i,s){let o=e[B],a=o.data[t+8],c=r==null?ha(a)&&tu:r!=o&&(a.type&3)!==0,l=i&P.Host&&s===a,u=QD(a,o,n,c,l);return u!==null?Lr(e,o,u,a):vt}function QD(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=o[c];if(f&&en(f)&&f.type===n)return c}return null}function Lr(t,e,n,r){let i=t[n],s=e.data;if($D(i)){let o=i;o.resolving&&IC(_C(s[n]));let a=Eg(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?$e(o.injectImpl):null,u=Mm(t,r,P.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&UD(n,s[n],e)}finally{l!==null&&$e(l),Eg(a),o.resolving=!1,Om()}}return i}function ZD(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ti)?t[Ti]:void 0;return typeof e=="number"?e>=0?e&Vm:JD:e}function Cg(t,e,n){let r=1<<t;return!!(n[e+(t>>jm)]&r)}function Dg(t,e){return!(t&P.Self)&&!(t&P.Host&&e)}var An=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Hm(this._tNode,this._lView,e,ca(r),n)}};function JD(){return new An(Ye(),re())}function Bn(t){return Vi(()=>{let e=t.prototype.constructor,n=e[$o]||ru(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[$o]||ru(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function ru(t){return zg(t)?()=>{let e=ru(be(t));return e&&e()}:Rr(t)}function XD(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[E]&2048&&!(o[E]&512);){let a=Wm(s,o,n,r|P.Self,vt);if(a!==vt)return a;let c=s.parent;if(!c){let l=o[fm];if(l){let u=l.get(n,vt,r);if(u!==vt)return u}c=zm(o),o=o[jr]}s=c}return i}function zm(t){let e=t[B],n=e.type;return n===2?e.declTNode:n===1?t[at]:null}function bg(t,e=null,n=null,r){let i=Gm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Gm(t,e=null,n=null,r,i=new Set){let s=[n||He,QC(t)];return r=r||(typeof t=="object"?void 0:Se(t)),new Mi(s,e||Ou(),r||null,i)}var Et=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return bg({name:""},i,r,"");{let s=r.name??"";return bg({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Si,e.NULL=new zo,e.\u0275prov=I({token:e,providedIn:"any",factory:()=>O(Xg)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var eb="ngOriginalError";function kl(t){return t[eb]}var Vt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&kl(e);for(;n&&kl(n);)n=kl(n);return n||null}},qm=new C("",{providedIn:"root",factory:()=>_(Vt).handleError.bind(void 0)}),Ym=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=tb,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),iu=class extends Ym{constructor(e){super(),this._lView=e}onDestroy(e){return Cm(this._lView,e),()=>wD(this._lView,e)}};function tb(){return new iu(re())}function nb(){return fa(Ye(),re())}function fa(t,e){return new Ht(ct(t,e))}var Ht=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=nb;let t=e;return t})();var su=class extends X{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,aD()&&(this.destroyRef=_(Ym,{optional:!0})??void 0)}emit(e){let n=G(null);try{super.next(e)}finally{G(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Fl(s),i&&(i=Fl(i)),o&&(o=Fl(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ce&&e.add(a),a}};function Fl(t){return e=>{setTimeout(t,void 0,e)}}var Te=su;function Km(t){return(t.flags&128)===128}var Qm=new Map,rb=0;function ib(){return rb++}function sb(t){Qm.set(t[da],t)}function ob(t){Qm.delete(t[da])}var Tg="__ngContext__";function Pn(t,e){Sn(e)?(t[Tg]=e[da],sb(e)):t[Tg]=e}function Zm(t){return Xm(t[Ri])}function Jm(t){return Xm(t[it])}function Xm(t){for(;t!==null&&!$t(t);)t=t[it];return t}var ou;function ev(t){ou=t}function ab(){if(ou!==void 0)return ou;if(typeof document<"u")return document;throw new w(210,!1)}var Gu=new C("",{providedIn:"root",factory:()=>cb}),cb="ng",qu=new C(""),sn=new C("",{providedIn:"platform",factory:()=>"unknown"});var Yu=new C("",{providedIn:"root",factory:()=>ab().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var lb="h",ub="b";var db=()=>null;function Ku(t,e,n=!1){return db(t,e,n)}var tv=!1,hb=new C("",{providedIn:"root",factory:()=>tv});var Xo=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Wg})`}};function pa(t){return t instanceof Xo?t.changingThisBreaksApplicationSecurity:t}function nv(t,e){let n=fb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Wg})`)}return n===e}function fb(t){return t instanceof Xo&&t.getTypeName()||null}var pb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rv(t){return t=String(t),t.match(pb)?t:"unsafe:"+t}var Qu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Qu||{});function $n(t){let e=gb();return e?e.sanitize(Qu.URL,t)||"":nv(t,"URL")?pa(t):rv(Au(t))}function gb(){let t=re();return t&&t[ot].sanitizer}function iv(t){return t instanceof Function?t():t}var jt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(jt||{}),mb;function Zu(t,e){return mb(t,e)}function Ar(t,e,n,r,i){if(r!=null){let s,o=!1;$t(r)?s=r:Sn(r)&&(o=!0,r=r[Bt]);let a=It(r);t===0&&n!==null?i==null?lv(e,n,a):ea(e,n,a,i||null,!0):t===1&&n!==null?ea(e,n,a,i||null,!0):t===2?Ob(e,a,o):t===3&&e.destroyNode(a),s!=null&&kb(e,t,s,n,i)}}function vb(t,e){return t.createText(e)}function yb(t,e,n){t.setValue(e,n)}function sv(t,e,n){return t.createElement(e,n)}function _b(t,e){ov(t,e),e[Bt]=null,e[at]=null}function Ib(t,e,n,r,i,s){r[Bt]=i,r[at]=e,ga(t,r,n,1,i,s)}function ov(t,e){e[ot].changeDetectionScheduler?.notify(1),ga(t,e,e[Ie],2,null,null)}function wb(t){let e=t[Ri];if(!e)return Ll(t[B],t);for(;e;){let n=null;if(Sn(e))n=e[Ri];else{let r=e[We];r&&(n=r)}if(!n){for(;e&&!e[it]&&e!==t;)Sn(e)&&Ll(e[B],e),e=e[Ee];e===null&&(e=t),Sn(e)&&Ll(e[B],e),n=e&&e[it]}e=n}}function Eb(t,e,n,r){let i=We+r,s=n.length;r>0&&(n[i-1][it]=e),r<s-We?(e[it]=n[i],Jg(n,We+r,e)):(n.push(e),e[it]=null),e[Ee]=n;let o=e[ua];o!==null&&n!==o&&Cb(o,e);let a=e[Fr];a!==null&&a.insertView(t),Xl(e),e[E]|=128}function Cb(t,e){let n=t[Yo],i=e[Ee][Ee][_t];e[_t]!==i&&(t[E]|=Pu.HasTransplantedViews),n===null?t[Yo]=[e]:n.push(e)}function av(t,e){let n=t[Yo],r=n.indexOf(e);n.splice(r,1)}function au(t,e){if(t.length<=We)return;let n=We+e,r=t[n];if(r){let i=r[ua];i!==null&&i!==t&&av(i,r),e>0&&(t[n-1][it]=r[it]);let s=Wo(t,We+e);_b(r[B],r);let o=s[Fr];o!==null&&o.detachView(s[B]),r[Ee]=null,r[it]=null,r[E]&=-129}return r}function cv(t,e){if(!(e[E]&256)){let n=e[Ie];n.destroyNode&&ga(t,e,n,3,null,null),wb(e)}}function Ll(t,e){if(e[E]&256)return;let n=G(null);try{e[E]&=-129,e[E]|=256,e[Nn]&&Lp(e[Nn]),bb(t,e),Db(t,e),e[B].type===1&&e[Ie].destroy();let r=e[ua];if(r!==null&&$t(e[Ee])){r!==e[Ee]&&av(r,e);let i=e[Fr];i!==null&&i.detachView(t)}ob(e)}finally{G(n)}}function Db(t,e){let n=t.cleanup,r=e[Ni];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Ni]=null);let i=e[Xt];if(i!==null){e[Xt]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function bb(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof On)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];mt(4,a,c);try{c.call(a)}finally{mt(5,a,c)}}else{mt(4,i,s);try{s.call(i)}finally{mt(5,i,s)}}}}}function Tb(t,e,n){return Sb(t,e.parent,n)}function Sb(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Bt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===yt.None||s===yt.Emulated)return null}return ct(r,n)}}function ea(t,e,n,r,i){t.insertBefore(e,n,r,i)}function lv(t,e,n){t.appendChild(e,n)}function Sg(t,e,n,r,i){r!==null?ea(t,e,n,r,i):lv(t,e,n)}function Ab(t,e,n,r){t.removeChild(e,n,r)}function Ju(t,e){return t.parentNode(e)}function Mb(t,e){return t.nextSibling(e)}function Nb(t,e,n){return xb(t,e,n)}function Rb(t,e,n){return t.type&40?ct(t,n):null}var xb=Rb,Ag;function Xu(t,e,n,r){let i=Tb(t,r,e),s=e[Ie],o=r.parent||e[at],a=Nb(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Sg(s,i,n[c],a,!1);else Sg(s,i,n,a,!1);Ag!==void 0&&Ag(s,r,e,n,i)}function Uo(t,e){if(e!==null){let n=e.type;if(n&3)return ct(e,t);if(n&4)return cu(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Uo(t,r);{let i=t[e.index];return $t(i)?cu(-1,i):It(i)}}else{if(n&32)return Zu(e,t)()||It(t[e.index]);{let r=uv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Oi(t[_t]);return Uo(i,r)}else return Uo(t,e.next)}}}return null}function uv(t,e){if(e!==null){let r=t[_t][at],i=e.projection;return r.projection[i]}return null}function cu(t,e){let n=We+t+1;if(n<e.length){let r=e[n],i=r[B].firstChild;if(i!==null)return Uo(r,i)}return e[Rn]}function Ob(t,e,n){let r=Ju(t,e);r&&Ab(t,r,e,n)}function ed(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Pn(It(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)ed(t,e,n.child,r,i,s,!1),Ar(e,t,i,a,s);else if(c&32){let l=Zu(n,r),u;for(;u=l();)Ar(e,t,i,u,s);Ar(e,t,i,a,s)}else c&16?Pb(t,e,r,n,i,s):Ar(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ga(t,e,n,r,i,s){ed(n,r,t.firstChild,e,i,s,!1)}function Pb(t,e,n,r,i,s){let o=n[_t],c=o[at].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ar(e,t,i,u,s)}else{let l=c,u=o[Ee];Km(r)&&(l.flags|=128),ed(t,e,l,u,i,s,!0)}}function kb(t,e,n,r,i){let s=n[Rn],o=It(n);s!==o&&Ar(e,t,r,s,i);for(let a=We;a<n.length;a++){let c=n[a];ga(c[B],c,t,e,r,s)}}function Fb(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:jt.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=jt.Important),t.setStyle(n,r,i,s))}}function Lb(t,e,n){t.setAttribute(e,"style",n)}function dv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function hv(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Yl(t,e,r),i!==null&&dv(t,e,i),s!==null&&Lb(t,e,s)}var Hn={};function te(t=1){fv(lt(),re(),Br()+t,!1)}function fv(t,e,n,r){if(!r)if((e[E]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Vo(e,s,n)}else{let s=t.preOrderHooks;s!==null&&jo(e,s,0,n)}xn(n)}function x(t,e=P.Default){let n=re();if(n===null)return O(t,e);let r=Ye();return Hm(r,n,be(t),e)}function pv(t,e,n,r,i,s){let o=G(null);try{let a=null;i&ze.SignalBased&&(a=e[r][Op]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&ze.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):mm(e,a,r,s)}finally{G(o)}}function Vb(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)xn(~i);else{let s=i,o=n[++r],a=n[++r];PD(o,s);let c=e[s];a(2,c)}}}finally{xn(-1)}}function ma(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Bt]=i,d[E]=r|4|128|8|64,(l!==null||t&&t[E]&2048)&&(d[E]|=2048),Em(d),d[Ee]=d[jr]=t,d[st]=n,d[ot]=o||t&&t[ot],d[Ie]=a||t&&t[Ie],d[kr]=c||t&&t[kr]||null,d[at]=s,d[da]=ib(),d[Go]=u,d[fm]=l,d[_t]=e.type==2?t[_t]:d,d}function va(t,e,n,r,i){let s=t.data[e];if(s===null)s=jb(t,e,n,r,i),OD()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=AD();s.injectorIndex=o===null?-1:o.injectorIndex}return Ui(s,!0),s}function jb(t,e,n,r,i){let s=bm(),o=Tm(),a=o?s:s&&s.parent,c=t.data[e]=Wb(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function gv(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function mv(t,e,n,r,i){let s=Br(),o=r&2;try{xn(-1),o&&e.length>Lt&&fv(t,e,Lt,!1),mt(o?2:0,i),n(r,i)}finally{xn(s),mt(o?3:1,i)}}function vv(t,e,n){if(gm(e)){let r=G(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{G(r)}}}function yv(t,e,n){Dm()&&(Qb(t,e,n,ct(n,e)),(n.flags&64)===64&&Dv(t,e,n))}function _v(t,e,n=ct){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Iv(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=td(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function td(t,e,n,r,i,s,o,a,c,l,u){let d=Lt+r,h=d+i,f=Ub(d,h),p=typeof l=="function"?l():l;return f[B]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function Ub(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Hn);return n}function Bb(t,e,n,r){let s=r.get(hb,tv)||n===yt.ShadowDom,o=t.selectRootElement(e,s);return $b(o),o}function $b(t){Hb(t)}var Hb=()=>null;function Wb(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return bD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Mg(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=ze.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?Ng(r,n,l,a,c):Ng(r,n,l,a)}return r}function Ng(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function zb(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=Mg(0,d.inputs,u,c,f),l=Mg(1,d.outputs,u,l,p);let v=c!==null&&o!==null&&!Ru(e)?sT(c,u,o):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Gb(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function wv(t,e,n,r,i,s,o,a){let c=ct(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(nd(t,n,u,r,i),ha(e)&&qb(n,e.index)):e.type&3?(r=Gb(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function qb(t,e){let n=rn(e,t);n[E]&16||(n[E]|=64)}function Ev(t,e,n,r){if(Dm()){let i=r===null?null:{"":-1},s=Jb(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Cv(t,e,n,o,i,a),i&&Xb(n,r,i)}n.mergedAttrs=Ai(n.mergedAttrs,n.attrs)}function Cv(t,e,n,r,i,s){for(let l=0;l<r.length;l++)nu(Jo(n,e),t,r[l].type);tT(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=gv(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Ai(n.mergedAttrs,u.hostAttrs),nT(t,n,e,c,u),eT(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}zb(t,n,s)}function Yb(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;Kb(o)!=a&&o.push(a),o.push(n,r,s)}}function Kb(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Qb(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ha(n)&&rT(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Jo(n,e),Pn(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Lr(e,t,a,n);if(Pn(l,e),o!==null&&iT(e,a-i,l,c,n,o),en(c)){let u=rn(n.index,e);u[st]=Lr(e,t,a,n)}}}function Dv(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=kD();try{xn(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];eu(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Zb(c,l)}}finally{xn(-1),eu(o)}}function Zb(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Jb(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(BC(e,o.selectors,!1))if(r||(r=[]),en(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;lu(t,e,c)}else r.unshift(o),lu(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function lu(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Xb(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new w(-301,!1);r.push(e[i],s)}}}function eT(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;en(e)&&(n[""]=t)}}function tT(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function nT(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Rr(i.type,!0)),o=new On(s,en(i),x);t.blueprint[r]=o,n[r]=o,Yb(t,e,r,gv(t,n,i.hostVars,Hn),i)}function rT(t,e,n){let r=ct(e,t),i=Iv(n),s=t[ot].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=ya(t,ma(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function iT(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];pv(r,n,c,l,u,d)}}function sT(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function bv(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Tv(t,e){let n=t.contentQueries;if(n!==null){let r=G(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Am(s),a.contentQueries(2,e[o],o)}}}finally{G(r)}}}function ya(t,e){return t[Ri]?t[_g][it]=e:t[Ri]=e,t[_g]=e,e}function uu(t,e,n){Am(0);let r=G(null);try{e(t,n)}finally{G(r)}}function oT(t){return t[Ni]||(t[Ni]=[])}function aT(t){return t.cleanup||(t.cleanup=[])}function Sv(t,e){let n=t[kr],r=n?n.get(Vt,null):null;r&&r.handleError(e)}function nd(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];pv(u,l,r,a,c,i)}}function cT(t,e,n){let r=Im(e,t);yb(t[Ie],r,n)}function lT(t,e){let n=rn(e,t),r=n[B];uT(r,n);let i=n[Bt];i!==null&&n[Go]===null&&(n[Go]=Ku(i,n[kr])),rd(r,n,n[st])}function uT(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function rd(t,e,n){Uu(e);try{let r=t.viewQuery;r!==null&&uu(1,r,n);let i=t.template;i!==null&&mv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Fr]?.finishViewCreation(t),t.staticContentQueries&&Tv(t,e),t.staticViewQueries&&uu(2,t.viewQuery,n);let s=t.components;s!==null&&dT(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[E]&=-5,Bu()}}function dT(t,e){for(let n=0;n<e.length;n++)lT(t,e[n])}function hT(t,e,n,r){let i=G(null);try{let s=e.tView,a=t[E]&4096?4096:16,c=ma(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[ua]=l;let u=t[Fr];return u!==null&&(c[Fr]=u.createEmbeddedView(s)),rd(s,c,n),c}finally{G(i)}}function Rg(t,e){return!e||e.firstChild===null||Km(t)}function fT(t,e,n,r=!0){let i=e[B];if(Eb(i,e,t,n),r){let o=cu(n,t),a=e[Ie],c=Ju(a,t[Rn]);c!==null&&Ib(i,t[at],a,e,c,o)}let s=e[Go];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ta(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(It(s)),$t(s)&&pT(s,r);let o=n.type;if(o&8)ta(t,e,n.child,r);else if(o&32){let a=Zu(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=uv(e,n);if(Array.isArray(a))r.push(...a);else{let c=Oi(e[_t]);ta(c[B],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function pT(t,e){for(let n=We;n<t.length;n++){let r=t[n],i=r[B].firstChild;i!==null&&ta(r[B],r,i,e)}t[Rn]!==t[Bt]&&e.push(t[Rn])}var Av=[];function gT(t){return t[Nn]??mT(t)}function mT(t){let e=Av.pop()??Object.create(yT);return e.lView=t,e}function vT(t){t.lView[Nn]!==t&&(t.lView=null,Av.push(t))}var yT=Z(y({},Pp),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{xi(t.lView)},consumerOnSignalRead(){this.lView[Nn]=this}}),Mv=100;function Nv(t,e=!0,n=0){let r=t[ot],i=r.rendererFactory,s=!1;s||i.begin?.();try{_T(t,n)}catch(o){throw e&&Sv(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function _T(t,e){du(t,e);let n=0;for(;Lu(t);){if(n===Mv)throw new w(103,!1);n++,du(t,1)}}function IT(t,e,n,r){let i=e[E];if((i&256)===256)return;let s=!1;!s&&e[ot].inlineEffectRunner?.flush(),Uu(e);let o=null,a=null;!s&&wT(t)&&(a=gT(e),o=kp(a));try{Em(e),RD(t.bindingStartIndex),n!==null&&mv(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Vo(e,d,null)}else{let d=t.preOrderHooks;d!==null&&jo(e,d,0,null),Ol(e,0)}if(ET(e),Rv(e,0),t.contentQueries!==null&&Tv(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Vo(e,d)}else{let d=t.contentHooks;d!==null&&jo(e,d,1),Ol(e,1)}Vb(t,e);let l=t.components;l!==null&&Ov(e,l,0);let u=t.viewQuery;if(u!==null&&uu(2,u,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Vo(e,d)}else{let d=t.viewHooks;d!==null&&jo(e,d,2),Ol(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[xl]){for(let d of e[xl])d();e[xl]=null}s||(e[E]&=-73)}catch(c){throw xi(e),c}finally{a!==null&&(Fp(a,o),vT(a)),Bu()}}function wT(t){return t.type!==2}function Rv(t,e){for(let n=Zm(t);n!==null;n=Jm(n))for(let r=We;r<n.length;r++){let i=n[r];xv(i,e)}}function ET(t){for(let e=Zm(t);e!==null;e=Jm(e)){if(!(e[E]&Pu.HasTransplantedViews))continue;let n=e[Yo];for(let r=0;r<n.length;r++){let i=n[r],s=i[Ee];_D(i)}}}function CT(t,e,n){let r=rn(e,t);xv(r,n)}function xv(t,e){Fu(t)&&du(t,e)}function du(t,e){let r=t[B],i=t[E],s=t[Nn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&ol(s)),s&&(s.dirty=!1),t[E]&=-9217,o)IT(r,t,r.template,t[st]);else if(i&8192){Rv(t,1);let a=r.components;a!==null&&Ov(t,a,1)}}function Ov(t,e,n){for(let r=0;r<e.length;r++)CT(t,e[r],n)}function id(t){for(t[ot].changeDetectionScheduler?.notify();t;){t[E]|=64;let e=Oi(t);if(lD(t)&&!e)return t;t=e}return null}var kn=class{get rootNodes(){let e=this._lView,n=e[B];return ta(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[st]}set context(e){this._lView[st]=e}get destroyed(){return(this._lView[E]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ee];if($t(e)){let n=e[qo],r=n?n.indexOf(this):-1;r>-1&&(au(e,r),Wo(n,r))}this._attachedToViewContainer=!1}cv(this._lView[B],this._lView)}onDestroy(e){Cm(this._lView,e)}markForCheck(){id(this._cdRefInjectingView||this._lView)}detach(){this._lView[E]&=-129}reattach(){Xl(this._lView),this._lView[E]|=128}detectChanges(){this._lView[E]|=1024,Nv(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new w(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ov(this._lView[B],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new w(902,!1);this._appRef=e,Xl(this._lView)}},sd=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=TT;let t=e;return t})(),DT=sd,bT=class extends DT{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=hT(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new kn(i)}};function TT(){return Pv(Ye(),re())}function Pv(t,e){return t.type&4?new bT(e,t,fa(t,e)):null}var sB=new RegExp(`^(\\d+)*(${ub}|${lb})*(.*)`);var ST=()=>null;function xg(t,e){return ST(t,e)}var hu=class{},fu=class{},na=class{};function AT(t){let e=Error(`No component factory found for ${Se(t)}.`);return e[MT]=t,e}var MT="ngComponent";var pu=class{resolveComponentFactory(e){throw AT(e)}},_a=(()=>{let e=class e{};e.NULL=new pu;let t=e;return t})(),Pi=class{},on=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>NT();let t=e;return t})();function NT(){let t=re(),e=Ye(),n=rn(e.index,t);return(Sn(n)?n:t)[Ie]}var RT=(()=>{let e=class e{};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Vl={};var Og=new Set;function kv(t){Og.has(t)||(Og.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Pg(...t){}function xT(){let t=typeof bi.requestAnimationFrame=="function",e=bi[t?"requestAnimationFrame":"setTimeout"],n=bi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var J=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Te(!1),this.onMicrotaskEmpty=new Te(!1),this.onStable=new Te(!1),this.onError=new Te(!1),typeof Zone>"u")throw new w(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=xT().nativeRequestAnimationFrame,kT(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new w(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new w(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,OT,Pg,Pg);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},OT={};function od(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function PT(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(bi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gu(t),t.isCheckStableRunning=!0,od(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gu(t))}function kT(t){let e=()=>{PT(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(FT(a))return n.invokeTask(i,s,o,a);try{return kg(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Fg(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return kg(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),Fg(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,gu(t),od(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function gu(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function kg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Fg(t){t._nesting--,od(t)}function FT(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Fv=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function mu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=lg(i,a);else if(s==2){let c=a,l=e[++o];r=lg(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ra=class extends _a{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Mn(e);return new ki(n,this.ngModule)}};function Lg(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function LT(t){let e=t.toLowerCase();return e==="svg"?fD:e==="math"?pD:null}var vu=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ca(r);let i=this.injector.get(e,Vl,r);return i!==Vl||n===Vl?i:this.parentInjector.get(e,n,r)}},ki=class extends na{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Lg(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Lg(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=zC(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=G(null);try{i=i||this.ngModule;let o=i instanceof Ge?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new vu(e,o):e,c=a.get(Pi,null);if(c===null)throw new w(407,!1);let l=a.get(RT,null),u=a.get(Fv,null),d=a.get(hu,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",v=r?Bb(f,r,this.componentDef.encapsulation,a):sv(f,p,LT(p)),T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let R=null;v!==null&&(R=Ku(v,a,!0));let ye=td(0,null,null,1,0,null,null,null,null,null,null),se=ma(null,ye,null,T,null,null,h,f,a,null,R);Uu(se);let Me,Ot;try{let De=this.componentDef,Pt,Ii=null;De.findHostDirectiveDefs?(Pt=[],Ii=new Map,De.findHostDirectiveDefs(De,Pt,Ii),Pt.push(De)):Pt=[De];let wi=VT(se,v),il=jT(wi,v,De,Pt,se,h,f);Ot=wm(ye,Lt),v&&$T(f,De,v,r),n!==void 0&&HT(Ot,this.ngContentSelectors,n),Me=BT(il,De,Pt,Ii,se,[WT]),rd(ye,se,null)}finally{Bu()}return new yu(this.componentType,Me,fa(Ot,se),se,Ot)}finally{G(s)}}},yu=class extends fu{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new kn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;nd(s[B],s,i,e,n),this.previousInputValues.set(e,n);let o=rn(this._tNode.index,s);id(o)}}get injector(){return new An(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function VT(t,e){let n=t[B],r=Lt;return t[r]=e,va(n,r,2,"#host",null)}function jT(t,e,n,r,i,s,o){let a=i[B];UT(r,t,e,o);let c=null;e!==null&&(c=Ku(e,i[kr]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=ma(i,Iv(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&lu(a,t,r.length-1),ya(i,d),i[t.index]=d}function UT(t,e,n,r){for(let i of t)e.mergedAttrs=Ai(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(mu(e,e.mergedAttrs,!0),n!==null&&hv(r,n,e))}function BT(t,e,n,r,i,s){let o=Ye(),a=i[B],c=ct(o,i);Cv(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=Lr(i,a,d,o);Pn(h,i)}Dv(a,i,o),c&&Pn(c,i);let l=Lr(i,a,o.directiveStart+o.componentOffset,o);if(t[st]=i[st]=l,s!==null)for(let u of s)u(l,e);return vv(a,o,i),l}function $T(t,e,n,r){if(r)Yl(t,n,["ng-version","17.3.9"]);else{let{attrs:i,classes:s}=GC(e.selectors[0]);i&&Yl(t,n,i),s&&s.length>0&&dv(t,n,s.join(" "))}}function HT(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function WT(){let t=Ye();Wu(re()[B],t)}var Bi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=zT;let t=e;return t})();function zT(){let t=Ye();return qT(t,re())}var GT=Bi,Lv=class extends GT{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return fa(this._hostTNode,this._hostLView)}get injector(){return new An(this._hostTNode,this._hostLView)}get parentInjector(){let e=zu(this._hostTNode,this._hostLView);if(Lm(e)){let n=Zo(e,this._hostLView),r=Qo(e),i=n[B].data[r+8];return new An(i,n)}else return new An(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Vg(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-We}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=xg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Rg(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!cD(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new ki(Mn(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let v=(o?l:this.parentInjector).get(Ge,null);v&&(s=v)}let u=Mn(c.componentType??{}),d=xg(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,s);return this.insertImpl(f.hostView,a,Rg(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(yD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ee],l=new Lv(c,c[at],c[Ee]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return fT(o,i,s,r),e.attachToViewContainerRef(),Jg(jl(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Vg(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=au(this._lContainer,n);r&&(Wo(jl(this._lContainer),n),cv(r[B],r))}detach(e){let n=this._adjustIndex(e,-1),r=au(this._lContainer,n);return r&&Wo(jl(this._lContainer),n)!=null?new kn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Vg(t){return t[qo]}function jl(t){return t[qo]||(t[qo]=[])}function qT(t,e){let n,r=e[t.index];return $t(r)?n=r:(n=bv(r,e,null,t),e[t.index]=n,ya(e,n)),KT(n,e,t,r),new Lv(n,t,e)}function YT(t,e){let n=t[Ie],r=n.createComment(""),i=ct(e,t),s=Ju(n,i);return ea(n,s,r,Mb(n,i),!1),r}var KT=JT,QT=()=>!1;function ZT(t,e,n){return QT(t,e,n)}function JT(t,e,n,r){if(t[Rn])return;let i;n.type&8?i=It(r):i=YT(e,n),t[Rn]=i}function XT(t){return Object.getPrototypeOf(t.prototype).constructor}function an(t){let e=XT(t.type),n=!0,r=[t];for(;e;){let i;if(en(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new w(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=ko(t.inputs),o.inputTransforms=ko(t.inputTransforms),o.declaredInputs=ko(t.declaredInputs),o.outputs=ko(t.outputs);let a=i.hostBindings;a&&i0(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&n0(t,c),l&&r0(t,l),e0(t,i),dC(t.outputs,i.outputs),en(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===an&&(n=!1)}}e=Object.getPrototypeOf(e)}t0(r)}function e0(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function t0(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ai(i.hostAttrs,n=Ai(n,i.hostAttrs))}}function ko(t){return t===xr?{}:t===He?[]:t}function n0(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function r0(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function i0(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var tn=class{},Fi=class{};var _u=class extends tn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ra(this);let i=om(e);this._bootstrapComponents=iv(i.bootstrap),this._r3Injector=Gm(e,n,[{provide:tn,useValue:this},{provide:_a,useValue:this.componentFactoryResolver},...r],Se(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Iu=class extends Fi{constructor(e){super(),this.moduleType=e}create(e){return new _u(this.moduleType,e,[])}};var ia=class extends tn{constructor(e){super(),this.componentFactoryResolver=new ra(this),this.instance=null;let n=new Mi([...e.providers,{provide:tn,useValue:this},{provide:_a,useValue:this.componentFactoryResolver}],e.parent||Ou(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ad(t,e,n=null){return new ia({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ia=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new _e(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cd(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function s0(t){return(t.flags&32)===32}function o0(t,e,n,r,i,s,o,a,c){let l=e.consts,u=va(e,t,4,o||null,Ko(l,a));Ev(e,n,u,Ko(l,c)),Wu(e,u);let d=u.tView=td(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function wa(t,e,n,r,i,s,o,a){let c=re(),l=lt(),u=t+Lt,d=l.firstCreatePass?o0(u,l,c,e,n,r,i,s,o):l.data[u];Ui(d,!1);let h=a0(l,c,d,t);$u()&&Xu(l,c,h,d),Pn(h,c);let f=bv(h,c,h,d);return c[u]=f,ya(c,f),ZT(f,d,c),ku(d)&&yv(l,c,d),o!=null&&_v(c,d,a),wa}var a0=c0;function c0(t,e,n,r){return Hu(!0),e[Ie].createComment("")}function Vv(t,e,n,r){return cd(t,Sm(),n)?e+Au(n)+r:Hn}function Fo(t,e){return t<<17|e<<2}function Fn(t){return t>>17&32767}function l0(t){return(t&2)==2}function u0(t,e){return t&131071|e<<17}function wu(t){return t|2}function Vr(t){return(t&131068)>>2}function Ul(t,e){return t&-131069|e<<2}function d0(t){return(t&1)===1}function Eu(t){return t|1}function h0(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Fn(o),c=Vr(o);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||ji(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=Fn(t[a+1]);t[r+1]=Fo(h,a),h!==0&&(t[h+1]=Ul(t[h+1],r)),t[a+1]=u0(t[a+1],r)}else t[r+1]=Fo(a,0),a!==0&&(t[a+1]=Ul(t[a+1],r)),a=r;else t[r+1]=Fo(c,0),a===0?a=r:t[c+1]=Ul(t[c+1],r),c=r;l&&(t[r+1]=wu(t[r+1])),jg(t,u,r,!0),jg(t,u,r,!1),f0(e,u,t,r,s),o=Fo(a,c),s?e.classBindings=o:e.styleBindings=o}function f0(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ji(s,e)>=0&&(n[r+1]=Eu(n[r+1]))}function jg(t,e,n,r){let i=t[n+1],s=e===null,o=r?Fn(i):Vr(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];p0(c,e)&&(a=!0,t[o+1]=r?Eu(l):wu(l)),o=r?Fn(l):Vr(l)}a&&(t[n+1]=r?wu(i):Eu(i))}function p0(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ji(t,e)>=0:!1}function $r(t,e,n){let r=re(),i=Sm();if(cd(r,i,e)){let s=lt(),o=Pm();wv(s,o,r,t,e,r[Ie],n,!1)}return $r}function Ug(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";nd(t,n,s[o],o,r)}function ld(t,e){return g0(t,e,null,!0),ld}function g0(t,e,n,r){let i=re(),s=lt(),o=xD(2);if(s.firstUpdatePass&&v0(s,t,o,r),e!==Hn&&cd(i,o,e)){let a=s.data[Br()];E0(s,a,i,i[Ie],t,i[o+1]=C0(e,n),r,o)}}function m0(t,e){return e>=t.expandoStartIndex}function v0(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Br()],o=m0(t,n);D0(s,r)&&e===null&&!o&&(e=!1),e=y0(i,s,e,r),h0(i,s,e,n,o,r)}}function y0(t,e,n,r){let i=FD(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Bl(null,t,e,n,r),n=Li(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Bl(i,t,e,n,r),s===null){let c=_0(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Bl(null,t,e,c[1],r),c=Li(c,e.attrs,r),I0(t,e,r,c))}else s=w0(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function _0(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Vr(r)!==0)return t[Fn(r)]}function I0(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Fn(i)]=r}function w0(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Li(r,o,n)}return Li(r,e.attrs,n)}function Bl(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Li(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Li(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),xC(t,o,n?!0:e[++s]))}return t===void 0?null:t}function E0(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=d0(l)?Bg(c,e,n,i,Vr(l),o):void 0;if(!sa(u)){sa(s)||l0(l)&&(s=Bg(c,null,n,i,a,o));let d=Im(Br(),n);Fb(r,o,d,i,s)}}function Bg(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===Hn&&(h=d?He:void 0);let f=d?Nl(h,r):u===r?h:void 0;if(l&&!sa(f)&&(f=Nl(c,r)),sa(f)&&(a=f,o))return a;let p=t[i+1];i=o?Fn(p):Vr(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Nl(c,r))}return a}function sa(t){return t!==void 0}function C0(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Se(pa(t)))),t}function D0(t,e){return(t.flags&(e?8:16))!==0}function b0(t,e,n,r,i,s){let o=e.consts,a=Ko(o,i),c=va(e,t,2,r,a);return Ev(e,n,c,Ko(o,s)),c.attrs!==null&&mu(c,c.attrs,!1),c.mergedAttrs!==null&&mu(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function D(t,e,n,r){let i=re(),s=lt(),o=Lt+t,a=i[Ie],c=s.firstCreatePass?b0(o,s,i,e,n,r):s.data[o],l=T0(s,i,c,a,e,t);i[o]=l;let u=ku(c);return Ui(c,!0),hv(a,l,c),!s0(c)&&$u()&&Xu(s,i,l,c),ED()===0&&Pn(l,i),CD(),u&&(yv(s,i,c),vv(s,c,i)),r!==null&&_v(i,c),D}function b(){let t=Ye();Tm()?MD():(t=t.parent,Ui(t,!1));let e=t;TD(e)&&SD(),DD();let n=lt();return n.firstCreatePass&&(Wu(n,t),gm(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&HD(e)&&Ug(n,e,re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&WD(e)&&Ug(n,e,re(),e.stylesWithoutHost,!1),b}function oe(t,e,n,r){return D(t,e,n,r),b(),oe}var T0=(t,e,n,r,i,s)=>(Hu(!0),sv(r,i,jD()));function ud(){return re()}var oa="en-US";var S0=oa;function A0(t){typeof t=="string"&&(S0=t.toLowerCase().replace(/_/g,"-"))}function Le(t,e,n,r){let i=re(),s=lt(),o=Ye();return N0(s,i,i[Ie],o,t,e,r),Le}function M0(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Ni],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function N0(t,e,n,r,i,s,o){let a=ku(r),l=t.firstCreatePass&&aT(t),u=e[st],d=oT(e),h=!0;if(r.type&3||o){let v=ct(r,e),T=o?o(v):v,R=d.length,ye=o?Me=>o(It(Me[r.index])):r.index,se=null;if(!o&&a&&(se=M0(t,e,i,r.index)),se!==null){let Me=se.__ngLastListenerFn__||se;Me.__ngNextListenerFn__=s,se.__ngLastListenerFn__=s,h=!1}else{s=Hg(r,e,u,s,!1);let Me=n.listen(T,i,s);d.push(s,Me),l&&l.push(i,ye,R,R+1)}}else s=Hg(r,e,u,s,!1);let f=r.outputs,p;if(h&&f!==null&&(p=f[i])){let v=p.length;if(v)for(let T=0;T<v;T+=2){let R=p[T],ye=p[T+1],Ot=e[R][ye].subscribe(s),De=d.length;d.push(s,Ot),l&&l.push(i,r.index,De,-(De+1))}}}function $g(t,e,n,r){let i=G(null);try{return mt(6,e,n),n(r)!==!1}catch(s){return Sv(t,s),!1}finally{mt(7,e,n),G(i)}}function Hg(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?rn(t.index,e):e;id(a);let c=$g(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=$g(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function $i(t=1){return VD(t)}function cn(t,e,n){return jv(t,"",e,"",n),cn}function jv(t,e,n,r,i){let s=re(),o=Vv(s,e,n,r);if(o!==Hn){let a=lt(),c=Pm();wv(a,c,s,t,o,s[Ie],i,!1)}return jv}function Hi(t){let e=ND();return vD(e,Lt+t)}function W(t,e=""){let n=re(),r=lt(),i=t+Lt,s=r.firstCreatePass?va(r,i,1,e,null):r.data[i],o=R0(r,n,s,e,t);n[i]=o,$u()&&Xu(r,n,o,s),Ui(s,!1)}var R0=(t,e,n,r,i)=>(Hu(!0),vb(e[Ie],r));function pe(t){return Ea("",t,""),pe}function Ea(t,e,n){let r=re(),i=Vv(r,t,e,n);return i!==Hn&&cT(r,Br(),i),Ea}function x0(t,e,n){let r=lt();if(r.firstCreatePass){let i=en(t);Cu(n,r.data,r.blueprint,i,!0),Cu(e,r.data,r.blueprint,i,!1)}}function Cu(t,e,n,r,i){if(t=be(t),Array.isArray(t))for(let s=0;s<t.length;s++)Cu(t[s],e,n,r,i);else{let s=lt(),o=re(),a=Ye(),c=Pr(t)?t:be(t.provide),l=hm(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Pr(t)||!t.multi){let f=new On(l,i,x),p=Hl(c,e,i?u:u+h,d);p===-1?(nu(Jo(a,o),s,c),$l(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{let f=Hl(c,e,u+h,d),p=Hl(c,e,u,u+h),v=f>=0&&n[f],T=p>=0&&n[p];if(i&&!T||!i&&!v){nu(Jo(a,o),s,c);let R=k0(i?P0:O0,n.length,i,r,l);!i&&T&&(n[p].providerFactory=R),$l(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(R),o.push(R)}else{let R=Uv(n[i?p:f],l,!i&&r);$l(s,t,f>-1?f:p,R)}!i&&r&&T&&n[p].componentProviders++}}}function $l(t,e,n,r){let i=Pr(e),s=eD(e);if(i||s){let c=(s?be(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Uv(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Hl(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function O0(t,e,n,r){return Du(this.multi,[])}function P0(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Lr(n,n[B],this.providerFactory.index,r);s=a.slice(0,o),Du(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Du(i,s);return s}function Du(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function k0(t,e,n,r,i){let s=new On(t,n,x);return s.multi=[],s.index=e,s.componentProviders=0,Uv(s,i,r&&!n),s}function Wi(t,e=[]){return n=>{n.providersResolver=(r,i)=>x0(r,i?i(t):t,e)}}var F0=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=lm(!1,r.type),s=i.length>0?ad([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=I({token:e,providedIn:"environment",factory:()=>new e(O(Ge))});let t=e;return t})();function Ke(t){kv("NgStandalone"),t.getStandaloneInjector=e=>e.get(F0).getOrCreateStandaloneInjector(t)}function zi(t,e){return Pv(t,e)}var Ut=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Bv=new Ut("17.3.9"),Ca=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var $v=new C("");function Wn(t){return!!t&&typeof t.then=="function"}function Hv(t){return!!t&&typeof t.subscribe=="function"}var Wv=new C(""),zv=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=_(Wv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Wn(o))r.push(o);else if(Hv(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dd=new C("");function L0(){Vp(()=>{throw new w(600,!1)})}function V0(t){return t.isBoundToModule}function j0(t,e,n){try{let r=n();return Wn(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Gi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_(qm),this.afterRenderEffectManager=_(Fv),this.externalTestViews=new Set,this.beforeRender=new X,this.afterTick=new X,this.componentTypes=[],this.components=[],this.isStable=_(Ia).hasPendingTasks.pipe(U(r=>!r)),this._injector=_(Ge)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof na;if(!this._injector.get(zv).done){let f=!s&&sm(r),p=!1;throw new w(405,p)}let a;s?a=r:a=this._injector.get(_a).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=V0(a)?void 0:this._injector.get(tn),l=i||a.selector,u=a.create(Et.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get($v,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Wl(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new w(101,!1);let i=G(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,G(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===Mv)throw new w(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)U0(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>bu(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>bu(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Wl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(dd,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Wl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new w(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Wl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function U0(t,e,n){!e&&!bu(t)||B0(t,n,e)}function bu(t){return Lu(t)}function B0(t,e,n){let r;n?(r=0,t[E]|=1024):t[E]&64?r=0:r=1,Nv(t,e,r)}var Tu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},hd=(()=>{let e=class e{compileModuleSync(r){return new Iu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=om(r),o=iv(s.declarations).reduce((a,c)=>{let l=Mn(c);return l&&a.push(new ki(l)),a},[]);return new Tu(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $0=(()=>{let e=class e{constructor(){this.zone=_(J),this.applicationRef=_(Gi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function H0(t){return[{provide:J,useFactory:t},{provide:Or,multi:!0,useFactory:()=>{let e=_($0,{optional:!0});return()=>e.initialize()}},{provide:Or,multi:!0,useFactory:()=>{let e=_(q0);return()=>{e.initialize()}}},{provide:qm,useFactory:W0}]}function W0(){let t=_(J),e=_(Vt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function z0(t){let e=H0(()=>new J(G0(t)));return nn([[],e])}function G0(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var q0=(()=>{let e=class e{constructor(){this.subscription=new ce,this.initialized=!1,this.zone=_(J),this.pendingTasks=_(Ia)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{J.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Y0(){return typeof $localize<"u"&&$localize.locale||oa}var fd=new C("",{providedIn:"root",factory:()=>_(fd,P.Optional|P.SkipSelf)||Y0()});var Gv=new C("");var Bo=null;function K0(t=[],e){return Et.create({name:e,providers:[{provide:la,useValue:"platform"},{provide:Gv,useValue:new Set([()=>Bo=null])},...t]})}function Q0(t=[]){if(Bo)return Bo;let e=K0(t);return Bo=e,L0(),Z0(e),e}function Z0(t){t.get(qu,null)?.forEach(n=>n())}var Hr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=J0;let t=e;return t})();function J0(t){return X0(Ye(),re(),(t&16)===16)}function X0(t,e,n){if(ha(t)&&!n){let r=rn(t.index,e);return new kn(r,r)}else if(t.type&47){let r=e[_t];return new kn(r,e)}return null}function qv(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Q0(r),s=[z0(),...n||[]],a=new ia({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(J);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(Vt,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=i.get(Gv);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),j0(l,c,()=>{let f=a.get(zv);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(fd,oa);A0(p||oa);let v=a.get(Gi);return e!==void 0&&v.bootstrap(e),v})})})}catch(e){return Promise.reject(e)}}var Jv=null;function Wt(){return Jv}function Xv(t){Jv??=t}var Da=class{};var Qe=new C(""),ey=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(nS),providedIn:"platform"});let t=e;return t})();var nS=(()=>{let e=class e extends ey{constructor(){super(),this._doc=_(Qe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wt().getBaseHref(this._doc)}onPopState(r){let i=Wt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Wt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function ty(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Yv(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function zn(t){return t&&t[0]!=="?"?"?"+t:t}var Ta=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(ny),providedIn:"root"});let t=e;return t})(),rS=new C(""),ny=(()=>{let e=class e extends Ta{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??_(Qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return ty(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+zn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+zn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+zn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(O(ey),O(rS,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var qi=(()=>{let e=class e{constructor(r){this._subject=new Te,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=oS(Yv(Kv(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+zn(i))}normalize(r){return e.stripTrailingSlash(sS(this._basePath,Kv(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+zn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+zn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=zn,e.joinWithSlash=ty,e.stripTrailingSlash=Yv,e.\u0275fac=function(i){return new(i||e)(O(Ta))},e.\u0275prov=I({token:e,factory:()=>iS(),providedIn:"root"});let t=e;return t})();function iS(){return new qi(O(Ta))}function sS(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Kv(t){return t.replace(/\/index.html$/,"")}function oS(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function ry(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var iy=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new pd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Qv("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Qv("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(x(Bi),x(sd))},e.\u0275dir=Re({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),pd=class{constructor(){this.$implicit=null,this.ngIf=null}};function Qv(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Se(e)}'.`)}var Yi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=jn({type:e}),e.\u0275inj=Vn({});let t=e;return t})(),sy="browser",aS="server";function gd(t){return t===aS}var ba=class{};var yd=class extends Da{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_d=class t extends yd{static makeCurrent(){Xv(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=lS();return n==null?null:uS(n)}resetBaseElement(){Ki=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ry(document.cookie,e)}},Ki=null;function lS(){return Ki=Ki||document.querySelector("base"),Ki?Ki.getAttribute("href"):null}function uS(t){return new URL(t,document.baseURI).pathname}var dS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Id=new C(""),ly=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new w(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(O(Id),O(J))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Sa=class{constructor(e){this._doc=e}},md="ng-app-id",uy=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gd(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${md}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(md),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(md,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(O(Qe),O(Gu),O(Yu,8),O(sn))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),vd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ed=/%COMP%/g,dy="%COMP%",hS=`_nghost-${dy}`,fS=`_ngcontent-${dy}`,pS=!0,gS=new C("",{providedIn:"root",factory:()=>pS});function mS(t){return fS.replace(Ed,t)}function vS(t){return hS.replace(Ed,t)}function hy(t,e){return e.map(n=>n.replace(Ed,t))}var oy=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=gd(c),this.defaultRenderer=new Qi(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===yt.ShadowDom&&(i=Z(y({},i),{encapsulation:yt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Aa?s.applyToHost(r):s instanceof Zi&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case yt.Emulated:o=new Aa(l,u,i,this.appId,d,a,c,h);break;case yt.ShadowDom:return new wd(l,u,r,i,a,c,this.nonce,h);default:o=new Zi(l,u,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(O(ly),O(uy),O(Gu),O(gS),O(Qe),O(sn),O(J),O(Yu))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Qi=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(vd[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(ay(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ay(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new w(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=vd[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=vd[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(jt.DashCase|jt.Important)?e.style.setProperty(n,r,i&jt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&jt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Wt().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function ay(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var wd=class extends Qi{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=hy(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Zi=class extends Qi{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?hy(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Aa=class extends Zi{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=mS(l),this.hostAttr=vS(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},yS=(()=>{let e=class e extends Sa{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(O(Qe))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),cy=["alt","control","meta","shift"],_S={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},IS={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},wS=(()=>{let e=class e extends Sa{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wt().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),cy.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=_S[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),cy.forEach(a=>{if(a!==s){let c=IS[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(O(Qe))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function fy(t,e){return qv(y({rootComponent:t},ES(e)))}function ES(t){return{appProviders:[...SS,...t?.providers??[]],platformProviders:TS}}function CS(){_d.makeCurrent()}function DS(){return new Vt}function bS(){return ev(document),document}var TS=[{provide:sn,useValue:sy},{provide:qu,useValue:CS,multi:!0},{provide:Qe,useFactory:bS,deps:[]}];var SS=[{provide:la,useValue:"root"},{provide:Vt,useFactory:DS,deps:[]},{provide:Id,useClass:yS,multi:!0,deps:[Qe,J,sn]},{provide:Id,useClass:wS,multi:!0,deps:[Qe]},oy,uy,ly,{provide:Pi,useExisting:oy},{provide:ba,useClass:dS,deps:[]},[]];var py=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(O(Qe))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var N="primary",hs=Symbol("RouteTitle"),Sd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Yr(t){return new Sd(t)}function NS(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function RS(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ct(t[n],e[n]))return!1;return!0}function Ct(t,e){let n=t?Ad(t):void 0,r=e?Ad(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Iy(t[i],e[i]))return!1;return!0}function Ad(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Iy(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function wy(t){return t.length>0?t[t.length-1]:null}function dn(t){return El(t)?t:Wn(t)?le(Promise.resolve(t)):A(t)}var xS={exact:Cy,subset:Dy},Ey={exact:OS,subset:PS,ignored:()=>!0};function gy(t,e,n){return xS[n.paths](t.root,e.root,n.matrixParams)&&Ey[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function OS(t,e){return Ct(t,e)}function Cy(t,e,n){if(!qn(t.segments,e.segments)||!Ra(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Cy(t.children[r],e.children[r],n))return!1;return!0}function PS(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Iy(t[n],e[n]))}function Dy(t,e,n){return by(t,e,e.segments,n)}function by(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!qn(i,n)||e.hasChildren()||!Ra(i,n,r))}else if(t.segments.length===n.length){if(!qn(t.segments,n)||!Ra(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Dy(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!qn(t.segments,i)||!Ra(t.segments,i,r)||!t.children[N]?!1:by(t.children[N],e,s,r)}}function Ra(t,e,n){return e.every((r,i)=>Ey[n](t[i].parameters,r.parameters))}var ln=class{constructor(e=new Y([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Yr(this.queryParams),this._queryParamMap}toString(){return LS.serialize(this)}},Y=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xa(this)}},Gn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Yr(this.parameters),this._parameterMap}toString(){return Sy(this)}};function kS(t,e){return qn(t,e)&&t.every((n,r)=>Ct(n.parameters,e[r].parameters))}function qn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function FS(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===N&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==N&&(n=n.concat(e(i,r)))}),n}var eh=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new Pa,providedIn:"root"});let t=e;return t})(),Pa=class{parse(e){let n=new Nd(e);return new ln(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ji(e.root,!0)}`,r=US(e.queryParams),i=typeof e.fragment=="string"?`#${VS(e.fragment)}`:"";return`${n}${r}${i}`}},LS=new Pa;function xa(t){return t.segments.map(e=>Sy(e)).join("/")}function Ji(t,e){if(!t.hasChildren())return xa(t);if(e){let n=t.children[N]?Ji(t.children[N],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==N&&r.push(`${i}:${Ji(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=FS(t,(r,i)=>i===N?[Ji(t.children[N],!1)]:[`${i}:${Ji(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[N]!=null?`${xa(t)}/${n[0]}`:`${xa(t)}/(${n.join("//")})`}}function Ty(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ma(t){return Ty(t).replace(/%3B/gi,";")}function VS(t){return encodeURI(t)}function Md(t){return Ty(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oa(t){return decodeURIComponent(t)}function my(t){return Oa(t.replace(/\+/g,"%20"))}function Sy(t){return`${Md(t.path)}${jS(t.parameters)}`}function jS(t){return Object.entries(t).map(([e,n])=>`;${Md(e)}=${Md(n)}`).join("")}function US(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ma(n)}=${Ma(i)}`).join("&"):`${Ma(n)}=${Ma(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var BS=/^[^\/()?;#]+/;function Cd(t){let e=t.match(BS);return e?e[0]:""}var $S=/^[^\/()?;=#]+/;function HS(t){let e=t.match($S);return e?e[0]:""}var WS=/^[^=?&#]+/;function zS(t){let e=t.match(WS);return e?e[0]:""}var GS=/^[^&#]+/;function qS(t){let e=t.match(GS);return e?e[0]:""}var Nd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[N]=new Y(e,n)),r}parseSegment(){let e=Cd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new w(4009,!1);return this.capture(e),new Gn(Oa(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=HS(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Cd(this.remaining);i&&(r=i,this.capture(r))}e[Oa(n)]=Oa(r)}parseQueryParam(e){let n=zS(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=qS(this.remaining);o&&(r=o,this.capture(r))}let i=my(n),s=my(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Cd(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new w(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=N);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[N]:new Y([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new w(4011,!1)}};function Ay(t){return t.segments.length>0?new Y([],{[N]:t}):t}function My(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=My(i);if(r===N&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Y(t.segments,e);return YS(n)}function YS(t){if(t.numberOfChildren===1&&t.children[N]){let e=t.children[N];return new Y(t.segments.concat(e.segments),e.children)}return t}function Kr(t){return t instanceof ln}function KS(t,e,n=null,r=null){let i=Ny(t);return Ry(i,e,n,r)}function Ny(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Y(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=Ay(r);return e??i}function Ry(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Dd(i,i,i,n,r);let s=QS(e);if(s.toRoot())return Dd(i,i,new Y([],{}),n,r);let o=ZS(s,i,t),a=o.processChildren?ts(o.segmentGroup,o.index,s.commands):Oy(o.segmentGroup,o.index,s.commands);return Dd(i,o.segmentGroup,a,n,r)}function ka(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function is(t){return typeof t=="object"&&t!=null&&t.outlets}function Dd(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=xy(t,e,n);let a=Ay(My(o));return new ln(a,s,i)}function xy(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=xy(s,e,n)}),new Y(t.segments,r)}var Fa=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ka(r[0]))throw new w(4003,!1);let i=r.find(is);if(i&&i!==wy(r))throw new w(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function QS(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Fa(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Fa(n,e,r)}var Gr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function ZS(t,e,n){if(t.isAbsolute)return new Gr(e,!0,0);if(!n)return new Gr(e,!1,NaN);if(n.parent===null)return new Gr(n,!0,0);let r=ka(t.commands[0])?0:1,i=n.segments.length-1+r;return JS(n,i,t.numberOfDoubleDots)}function JS(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new w(4005,!1);i=r.segments.length}return new Gr(r,!1,i-s)}function XS(t){return is(t[0])?t[0].outlets:{[N]:t}}function Oy(t,e,n){if(t??=new Y([],{}),t.segments.length===0&&t.hasChildren())return ts(t,e,n);let r=eA(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Y(t.segments.slice(0,r.pathIndex),{});return s.children[N]=new Y(t.segments.slice(r.pathIndex),t.children),ts(s,0,i)}else return r.match&&i.length===0?new Y(t.segments,{}):r.match&&!t.hasChildren()?Rd(t,e,n):r.match?ts(t,0,i):Rd(t,e,n)}function ts(t,e,n){if(n.length===0)return new Y(t.segments,{});{let r=XS(n),i={};if(Object.keys(r).some(s=>s!==N)&&t.children[N]&&t.numberOfChildren===1&&t.children[N].segments.length===0){let s=ts(t.children[N],e,n);return new Y(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Oy(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Y(t.segments,i)}}function eA(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(is(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!yy(c,l,o))return s;r+=2}else{if(!yy(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Rd(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(is(s)){let c=tA(s.outlets);return new Y(r,c)}if(i===0&&ka(n[0])){let c=t.segments[e];r.push(new Gn(c.path,vy(n[0]))),i++;continue}let o=is(s)?s.outlets[N]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ka(a)?(r.push(new Gn(o,vy(a))),i+=2):(r.push(new Gn(o,{})),i++)}return new Y(r,{})}function tA(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Rd(new Y([],{}),0,r))}),e}function vy(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function yy(t,e,n){return t==n.path&&Ct(e,n.parameters)}var ns="imperative",we=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(we||{}),Ze=class{constructor(e,n){this.id=e,this.url=n}},ss=class extends Ze{constructor(e,n,r="imperative",i=null){super(e,n),this.type=we.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Yn=class extends Ze{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=we.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ue=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ue||{}),xd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(xd||{}),un=class extends Ze{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=we.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Kn=class extends Ze{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=we.NavigationSkipped}},os=class extends Ze{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=we.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},La=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Od=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pd=class extends Ze{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=we.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kd=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fd=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ld=class{constructor(e){this.route=e,this.type=we.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Vd=class{constructor(e){this.route=e,this.type=we.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jd=class{constructor(e){this.snapshot=e,this.type=we.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ud=class{constructor(e){this.snapshot=e,this.type=we.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bd=class{constructor(e){this.snapshot=e,this.type=we.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$d=class{constructor(e){this.snapshot=e,this.type=we.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var as=class{},cs=class{constructor(e){this.url=e}};var Hd=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ha,this.attachRef=null}},Ha=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Hd,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Va=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Wd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Wd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=zd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zd(e,this._root).map(n=>n.value)}};function Wd(t,e){if(t===e.value)return e;for(let n of e.children){let r=Wd(t,n);if(r)return r}return null}function zd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=zd(t,n);if(r.length)return r.unshift(e),r}return[]}var je=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function zr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ja=class extends Va{constructor(e,n){super(e),this.snapshot=n,nh(this,e)}toString(){return this.snapshot.toString()}};function Py(t){let e=nA(t),n=new _e([new Gn("",{})]),r=new _e({}),i=new _e({}),s=new _e({}),o=new _e(""),a=new Qr(n,r,s,o,i,N,t,e.root);return a.snapshot=e.root,new ja(new je(a,[]),e)}function nA(t){let e={},n={},r={},i="",s=new ls([],e,r,i,n,N,t,null,{});return new Ua("",new je(s,[]))}var Qr=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(U(l=>l[hs]))??A(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(U(e=>Yr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(U(e=>Yr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function th(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:y(y({},e.params),t.params),data:y(y({},e.data),t.data),resolve:y(y(y(y({},t.data),e.data),i?.data),t._resolvedData)}:r={params:y({},t.params),data:y({},t.data),resolve:y(y({},t.data),t._resolvedData??{})},i&&Fy(i)&&(r.resolve[hs]=i.title),r}var ls=class{get title(){return this.data?.[hs]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ua=class extends Va{constructor(e,n){super(n),this.url=e,nh(this,n)}toString(){return ky(this._root)}};function nh(t,e){e.value._routerState=t,e.children.forEach(n=>nh(t,n))}function ky(t){let e=t.children.length>0?` { ${t.children.map(ky).join(", ")} } `:"";return`${t.value}${e}`}function bd(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ct(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ct(e.params,n.params)||t.paramsSubject.next(n.params),RS(e.url,n.url)||t.urlSubject.next(n.url),Ct(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Gd(t,e){let n=Ct(t.params,e.params)&&kS(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Gd(t.parent,e.parent))}function Fy(t){return typeof t.title=="string"||t.title===null}var rh=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=N,this.activateEvents=new Te,this.deactivateEvents=new Te,this.attachEvents=new Te,this.detachEvents=new Te,this.parentContexts=_(Ha),this.location=_(Bi),this.changeDetector=_(Hr),this.environmentInjector=_(Ge),this.inputBinder=_(ih,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new w(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new qd(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Re({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ur]});let t=e;return t})(),qd=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Qr?this.route:e===Ha?this.childContexts:this.parent.get(e,n)}},ih=new C("");function rA(t,e,n){let r=us(t,e._root,n?n._root:void 0);return new ja(r,e)}function us(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=iA(t,e,n);return new je(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>us(t,a)),o}}let r=sA(e.value),i=e.children.map(s=>us(t,s));return new je(r,i)}}function iA(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return us(t,r,i);return us(t,r)})}function sA(t){return new Qr(new _e(t.url),new _e(t.params),new _e(t.queryParams),new _e(t.fragment),new _e(t.data),t.outlet,t.component,t)}var Ly="ngNavigationCancelingError";function Vy(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Kr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=jy(!1,Ue.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function jy(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Ly]=!0,n.cancellationCode=e,n}function oA(t){return Uy(t)&&Kr(t.url)}function Uy(t){return!!t&&t[Ly]}var aA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=qe({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ke],decls:1,vars:0,template:function(i,s){i&1&&oe(0,"router-outlet")},dependencies:[rh],encapsulation:2});let t=e;return t})();function cA(t,e){return t.providers&&!t._injector&&(t._injector=ad(t.providers,e,`Route: ${t.path}`)),t._injector??e}function sh(t){let e=t.children&&t.children.map(sh),n=e?Z(y({},t),{children:e}):y({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==N&&(n.component=aA),n}function Dt(t){return t.outlet||N}function lA(t,e){let n=t.filter(r=>Dt(r)===e);return n.push(...t.filter(r=>Dt(r)!==e)),n}function fs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var uA=(t,e,n,r)=>U(i=>(new Yd(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Yd=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),bd(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=zr(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=zr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=zr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=zr(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new $d(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Ud(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(bd(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),bd(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=fs(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Ba=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},qr=class{constructor(e,n){this.component=e,this.route=n}};function dA(t,e,n){let r=t._root,i=e?e._root:null;return Xi(r,i,n,[r.value])}function hA(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Jr(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Gg(t)?t:e.get(t):r}function Xi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=zr(e);return t.children.forEach(o=>{fA(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>rs(a,n.getContext(o),i)),i}function fA(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=pA(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ba(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Xi(t,e,a?a.children:null,r,i):Xi(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new qr(a.outlet.component,o))}else o&&rs(e,a,i),i.canActivateChecks.push(new Ba(r)),s.component?Xi(t,null,a?a.children:null,r,i):Xi(t,null,n,r,i);return i}function pA(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!qn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!qn(t.url,e.url)||!Ct(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gd(t,e)||!Ct(t.queryParams,e.queryParams);case"paramsChange":default:return!Gd(t,e)}}function rs(t,e,n){let r=zr(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?rs(o,e.children.getContext(s),n):rs(o,null,n):rs(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new qr(e.outlet.component,i)):n.canDeactivateChecks.push(new qr(null,i)):n.canDeactivateChecks.push(new qr(null,i))}function ps(t){return typeof t=="function"}function gA(t){return typeof t=="boolean"}function mA(t){return t&&ps(t.canLoad)}function vA(t){return t&&ps(t.canActivate)}function yA(t){return t&&ps(t.canActivateChild)}function _A(t){return t&&ps(t.canDeactivate)}function IA(t){return t&&ps(t.canMatch)}function By(t){return t instanceof kt||t?.name==="EmptyError"}var Na=Symbol("INITIAL_VALUE");function Zr(){return nt(t=>Ro(t.map(e=>e.pipe(Ft(1),Al(Na)))).pipe(U(e=>{for(let n of e)if(n!==!0){if(n===Na)return Na;if(n===!1||n instanceof ln)return n}return!0}),tt(e=>e!==Na),Ft(1)))}function wA(t,e){return he(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?A(Z(y({},n),{guardsResult:!0})):EA(o,r,i,t).pipe(he(a=>a&&gA(a)?CA(r,s,t,e):A(a)),U(a=>Z(y({},n),{guardsResult:a})))})}function EA(t,e,n,r){return le(t).pipe(he(i=>AA(i.component,i.route,n,e,r)),gt(i=>i!==!0,!0))}function CA(t,e,n,r){return le(e).pipe(Dr(i=>Cr(bA(i.route.parent,r),DA(i.route,r),SA(t,i.path,n),TA(t,i.route,n))),gt(i=>i!==!0,!0))}function DA(t,e){return t!==null&&e&&e(new Bd(t)),A(!0)}function bA(t,e){return t!==null&&e&&e(new jd(t)),A(!0)}function TA(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return A(!0);let i=r.map(s=>xo(()=>{let o=fs(e)??n,a=Jr(s,o),c=vA(a)?a.canActivate(e,t):Un(o,()=>a(e,t));return dn(c).pipe(gt())}));return A(i).pipe(Zr())}function SA(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>hA(o)).filter(o=>o!==null).map(o=>xo(()=>{let a=o.guards.map(c=>{let l=fs(o.node)??n,u=Jr(c,l),d=yA(u)?u.canActivateChild(r,t):Un(l,()=>u(r,t));return dn(d).pipe(gt())});return A(a).pipe(Zr())}));return A(s).pipe(Zr())}function AA(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return A(!0);let o=s.map(a=>{let c=fs(e)??i,l=Jr(a,c),u=_A(l)?l.canDeactivate(t,e,n,r):Un(c,()=>l(t,e,n,r));return dn(u).pipe(gt())});return A(o).pipe(Zr())}function MA(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return A(!0);let s=i.map(o=>{let a=Jr(o,t),c=mA(a)?a.canLoad(e,n):Un(t,()=>a(e,n));return dn(c)});return A(s).pipe(Zr(),$y(r))}function $y(t){return pl(fe(e=>{if(Kr(e))throw Vy(t,e)}),U(e=>e===!0))}function NA(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return A(!0);let s=i.map(o=>{let a=Jr(o,t),c=IA(a)?a.canMatch(e,n):Un(t,()=>a(e,n));return dn(c)});return A(s).pipe(Zr(),$y(r))}var ds=class{constructor(e){this.segmentGroup=e||null}},$a=class extends Error{constructor(e){super(),this.urlTree=e}};function Wr(t){return Er(new ds(t))}function RA(t){return Er(new w(4e3,!1))}function xA(t){return Er(jy(!1,Ue.GuardRejected))}var Kd=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return A(r);if(i.numberOfChildren>1||!i.children[N])return RA(e.redirectTo);i=i.children[N]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new $a(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new ln(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Y(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new w(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Qd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OA(t,e,n,r,i){let s=oh(t,e,n);return s.matched?(r=cA(e,r),NA(r,e,n,i).pipe(U(o=>o===!0?s:y({},Qd)))):A(s)}function oh(t,e,n){if(e.path==="**")return PA(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?y({},Qd):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||NS)(n,t,e);if(!i)return y({},Qd);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?y(y({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function PA(t){return{matched:!0,parameters:t.length>0?wy(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function _y(t,e,n,r){return n.length>0&&LA(t,n,r)?{segmentGroup:new Y(e,FA(r,new Y(n,t.children))),slicedSegments:[]}:n.length===0&&VA(t,n,r)?{segmentGroup:new Y(t.segments,kA(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Y(t.segments,t.children),slicedSegments:n}}function kA(t,e,n,r){let i={};for(let s of n)if(Wa(t,e,s)&&!r[Dt(s)]){let o=new Y([],{});i[Dt(s)]=o}return y(y({},r),i)}function FA(t,e){let n={};n[N]=e;for(let r of t)if(r.path===""&&Dt(r)!==N){let i=new Y([],{});n[Dt(r)]=i}return n}function LA(t,e,n){return n.some(r=>Wa(t,e,r)&&Dt(r)!==N)}function VA(t,e,n){return n.some(r=>Wa(t,e,r))}function Wa(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function jA(t,e,n,r){return Dt(t)!==r&&(r===N||!Wa(e,n,t))?!1:oh(e,t,n).matched}function UA(t,e,n){return e.length===0&&!t.children[n]}var Zd=class{};function BA(t,e,n,r,i,s,o="emptyOnly"){return new Jd(t,e,n,r,i,o,s).recognize()}var $A=31,Jd=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Kd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new w(4002,`'${e.segmentGroup}'`)}recognize(){let e=_y(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(U(n=>{let r=new ls([],Object.freeze({}),Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,{},N,this.rootComponentType,null,{}),i=new je(r,n),s=new Ua("",i),o=KS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,N).pipe(Qt(r=>{if(r instanceof $a)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ds?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=th(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(U(s=>s instanceof je?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return le(i).pipe(Dr(s=>{let o=r.children[s],a=lA(n,s);return this.processSegmentGroup(e,a,o,s)}),Sl((s,o)=>(s.push(...o),s)),Zt(null),Tl(),he(s=>{if(s===null)return Wr(r);let o=Hy(s);return HA(o),A(o)}))}processSegment(e,n,r,i,s,o){return le(n).pipe(Dr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Qt(c=>{if(c instanceof ds)return A(null);throw c}))),gt(a=>!!a),Qt(a=>{if(By(a))return UA(r,i,s)?A(new Zd):Wr(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return jA(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Wr(i):Wr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=oh(n,i,s);if(!a)return Wr(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$A&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(he(h=>this.processSegment(e,r,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=OA(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(nt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(nt(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new ls(u,h,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,zA(r),Dt(r),r.component??r._loadedComponent??null,r,GA(r)),{segmentGroup:p,slicedSegments:v}=_y(n,u,d,c);if(v.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(U(R=>R===null?null:new je(f,R)));if(c.length===0&&v.length===0)return A(new je(f,[]));let T=Dt(r)===s;return this.processSegment(l,c,p,v,T?N:s,!0).pipe(U(R=>new je(f,R instanceof je?[R]:[])))}))):Wr(n)))}getChildConfig(e,n,r){return n.children?A({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?A({routes:n._loadedRoutes,injector:n._loadedInjector}):MA(e,n,r,this.urlSerializer).pipe(he(i=>i?this.configLoader.loadChildren(e,n).pipe(fe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):xA(n))):A({routes:[],injector:e})}};function HA(t){t.sort((e,n)=>e.value.outlet===N?-1:n.value.outlet===N?1:e.value.outlet.localeCompare(n.value.outlet))}function WA(t){let e=t.value.routeConfig;return e&&e.path===""}function Hy(t){let e=[],n=new Set;for(let r of t){if(!WA(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Hy(r.children);e.push(new je(r.value,i))}return e.filter(r=>!n.has(r))}function zA(t){return t.data||{}}function GA(t){return t.resolve||{}}function qA(t,e,n,r,i,s){return he(o=>BA(t,e,n,r,o.extractedUrl,i,s).pipe(U(({state:a,tree:c})=>Z(y({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function YA(t,e){return he(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of Wy(c))o.add(l);let a=0;return le(o).pipe(Dr(c=>s.has(c)?KA(c,r,t,e):(c.data=th(c,c.parent,t).resolve,A(void 0))),fe(()=>a++),br(1),he(c=>a===o.size?A(n):Fe))})}function Wy(t){let e=t.children.map(n=>Wy(n)).flat();return[t,...e]}function KA(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Fy(i)&&(s[hs]=i.title),QA(s,t,e,r).pipe(U(o=>(t._resolvedData=o,t.data=th(t,t.parent,n).resolve,null)))}function QA(t,e,n,r){let i=Ad(t);if(i.length===0)return A({});let s={};return le(i).pipe(he(o=>ZA(t[o],e,n,r).pipe(gt(),fe(a=>{s[o]=a}))),br(1),bl(s),Qt(o=>By(o)?Fe:Er(o)))}function ZA(t,e,n,r){let i=fs(e)??r,s=Jr(t,i),o=s.resolve?s.resolve(e,n):Un(i,()=>s(e,n));return dn(o)}function Td(t){return nt(e=>{let n=t(e);return n?le(n).pipe(U(()=>e)):A(e)})}var zy=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===N);return i}getResolvedTitleForRoute(r){return r.data[hs]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(JA),providedIn:"root"});let t=e;return t})(),JA=(()=>{let e=class e extends zy{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(O(py))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ah=new C("",{providedIn:"root",factory:()=>({})}),ch=new C(""),XA=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_(hd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return A(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=dn(r.loadComponent()).pipe(U(Gy),fe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Di(()=>{this.componentLoaders.delete(r)})),s=new yr(i,()=>new X).pipe(vr());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return A({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=eM(i,this.compiler,r,this.onLoadEndListener).pipe(Di(()=>{this.childrenLoaders.delete(i)})),a=new yr(o,()=>new X).pipe(vr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function eM(t,e,n,r){return dn(t.loadChildren()).pipe(U(Gy),he(i=>i instanceof Fi||Array.isArray(i)?A(i):le(e.compileModuleAsync(i))),U(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(ch,[],{optional:!0,self:!0}).flat()),{routes:o.map(sh),injector:s}}))}function tM(t){return t&&typeof t=="object"&&"default"in t}function Gy(t){return tM(t)?t.default:t}var lh=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(nM),providedIn:"root"});let t=e;return t})(),nM=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rM=new C("");var iM=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new X,this.transitionAbortSubject=new X,this.configLoader=_(XA),this.environmentInjector=_(Ge),this.urlSerializer=_(eh),this.rootContexts=_(Ha),this.location=_(qi),this.inputBindingEnabled=_(ih,{optional:!0})!==null,this.titleStrategy=_(zy),this.options=_(ah,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=_(lh),this.createViewTransition=_(rM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>A(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Ld(s)),i=s=>this.events.next(new Vd(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Z(y(y({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new _e({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ns,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(tt(o=>o.id!==0),U(o=>Z(y({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),nt(o=>{let a=!1,c=!1;return A(o).pipe(nt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ue.SupersededByNewNavigation),Fe;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Z(y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Kn(l.id,this.urlSerializer.serialize(l.rawUrl),h,xd.IgnoredSameUrlNavigation)),l.resolve(null),Fe}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return A(l).pipe(nt(h=>{let f=this.transitions?.getValue();return this.events.next(new ss(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Fe:Promise.resolve(h)}),qA(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),fe(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Z(y({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new La(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:v,extras:T}=l,R=new ss(h,this.urlSerializer.serialize(f),p,v);this.events.next(R);let ye=Py(this.rootComponentType).snapshot;return this.currentTransition=o=Z(y({},l),{targetSnapshot:ye,urlAfterRedirects:f,extras:Z(y({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,A(o)}else{let h="";return this.events.next(new Kn(l.id,this.urlSerializer.serialize(l.extractedUrl),h,xd.IgnoredByUrlHandlingStrategy)),l.resolve(null),Fe}}),fe(l=>{let u=new Od(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),U(l=>(this.currentTransition=o=Z(y({},l),{guards:dA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),wA(this.environmentInjector,l=>this.events.next(l)),fe(l=>{if(o.guardsResult=l.guardsResult,Kr(l.guardsResult))throw Vy(this.urlSerializer,l.guardsResult);let u=new Pd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),tt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ue.GuardRejected),!1)),Td(l=>{if(l.guards.canActivateChecks.length)return A(l).pipe(fe(u=>{let d=new kd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),nt(u=>{let d=!1;return A(u).pipe(YA(this.paramsInheritanceStrategy,this.environmentInjector),fe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Ue.NoDataFromResolver)}}))}),fe(u=>{let d=new Fd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Td(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(fe(f=>{d.component=f}),U(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Ro(u(l.targetSnapshot.root)).pipe(Zt(null),Ft(1))}),Td(()=>this.afterPreactivation()),nt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?le(d).pipe(U(()=>o)):A(o)}),U(l=>{let u=rA(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Z(y({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),fe(()=>{this.events.next(new as)}),uA(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ft(1),fe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Yn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Ml(this.transitionAbortSubject.pipe(fe(l=>{throw l}))),Di(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Ue.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qt(l=>{if(c=!0,Uy(l))this.events.next(new un(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),oA(l)?this.events.next(new cs(l.url)):o.resolve(!1);else{this.events.next(new os(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Fe}))}))}cancelNavigationTransition(r,i,s){let o=new un(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sM(t){return t!==ns}var oM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(aM),providedIn:"root"});let t=e;return t})(),Xd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},aM=(()=>{let e=class e extends Xd{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(cM),providedIn:"root"});let t=e;return t})(),cM=(()=>{let e=class e extends qy{constructor(){super(...arguments),this.location=_(qi),this.urlSerializer=_(eh),this.options=_(ah,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=_(lh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ln,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Py(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ss)this.stateMemento=this.createStateMemento();else if(r instanceof Kn)this.rawUrlTree=i.initialUrl;else if(r instanceof La){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof as?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof un&&(r.code===Ue.GuardRejected||r.code===Ue.NoDataFromResolver)?this.restoreHistory(i):r instanceof os?this.restoreHistory(i,!0):r instanceof Yn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=y(y({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=y(y({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),es=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(es||{});function lM(t,e){t.events.pipe(tt(n=>n instanceof Yn||n instanceof un||n instanceof os||n instanceof Kn),U(n=>n instanceof Yn||n instanceof Kn?es.COMPLETE:(n instanceof un?n.code===Ue.Redirect||n.code===Ue.SupersededByNewNavigation:!1)?es.REDIRECTING:es.FAILED),tt(n=>n!==es.REDIRECTING),Ft(1)).subscribe(()=>{e()})}function uM(t){throw t}var dM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xr=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=_(Ca),this.stateManager=_(qy),this.options=_(ah,{optional:!0})||{},this.pendingTasks=_(Ia),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=_(iM),this.urlSerializer=_(eh),this.location=_(qi),this.urlHandlingStrategy=_(lh),this._events=new X,this.errorHandler=this.options.errorHandler||uM,this.navigated=!1,this.routeReuseStrategy=_(oM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=_(ch,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!_(ih,{optional:!0}),this.eventsSubscription=new ce,this.isNgZoneEnabled=_(J)instanceof J&&J.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof un&&i.code!==Ue.Redirect&&i.code!==Ue.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Yn)this.navigated=!0;else if(i instanceof cs){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||sM(s.source)};this.scheduleNavigation(a,ns,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}pM(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ns,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=y({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(sh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=y(y({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=Ny(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return Ry(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Kr(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ns,null,i)}navigate(r,i={skipLocationChange:!1}){return fM(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=y({},dM):i===!1?s=y({},hM):s=i,Kr(r))return gy(this.currentUrlTree,r,s);let o=this.parseUrl(r);return gy(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return lM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function fM(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new w(4008,!1)}function pM(t){return!(t instanceof as)&&!(t instanceof cs)}var gM=new C("");function Yy(t,...e){return nn([{provide:ch,multi:!0,useValue:t},[],{provide:Qr,useFactory:mM,deps:[Xr]},{provide:dd,multi:!0,useFactory:vM},e.map(n=>n.\u0275providers)])}function mM(t){return t.routerState.root}function vM(){let t=_(Et);return e=>{let n=t.get(Gi);if(e!==n.components[0])return;let r=t.get(Xr),i=t.get(yM);t.get(_M)===1&&r.initialNavigation(),t.get(IM,null,P.Optional)?.setUpPreloading(),t.get(gM,null,P.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var yM=new C("",{factory:()=>new X}),_M=new C("",{providedIn:"root",factory:()=>1});var IM=new C("");var dh={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var g=function(t,e){if(!t)throw Qn(e)},Qn=function(t){return new Error("Firebase Database ("+dh.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var Zy=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wM=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ga={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Zy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new hh;let h=s<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},hh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ph=function(t){let e=Zy(t);return Ga.encodeByteArray(e,!0)},gs=function(t){return ph(t).replace(/\./g,"")},ms=function(t){try{return Ga.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jy(t){return Xy(void 0,t)}function Xy(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!EM(n)||(t[n]=Xy(t[n],e[n]));return t}function EM(t){return t!=="__proto__"}function CM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var DM=()=>CM().__FIREBASE_DEFAULTS__,bM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ms(t[1]);return e&&JSON.parse(e)},gh=()=>{try{return DM()||bM()||TM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},e_=t=>{var e,n;return(n=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},t_=t=>{let e=e_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mh=()=>{var t;return(t=gh())===null||t===void 0?void 0:t.config},n_=t=>{var e;return(e=gh())===null||e===void 0?void 0:e[`_${t}`]};var hn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function r_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gs(JSON.stringify(n)),gs(JSON.stringify(o)),""].join(".")}function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vs(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function i_(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qa(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tt(){return dh.NODE_CLIENT===!0||dh.NODE_ADMIN===!0}function s_(){try{return typeof indexedDB=="object"}catch{return!1}}function o_(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var SM="FirebaseError",bt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SM,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}},zt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?AM(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new bt(i,a,r)}};function AM(t,e){return t.replace(MM,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var MM=/\{\$([^}]+)}/g;function ei(t){return JSON.parse(t)}function de(t){return JSON.stringify(t)}var a_=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=ei(ms(s[0])||""),n=ei(ms(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var c_=function(t){let e=a_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},l_=function(t){let e=a_(t).claims;return typeof e=="object"&&e.admin===!0};function St(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Zn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ya(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ys(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function _s(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Qy(s)&&Qy(o)){if(!_s(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Qy(t){return t!==null&&typeof t=="object"}function Is(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var za=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function u_(t,e){let n=new fh(t,e);return n.subscribe.bind(n)}var fh=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");NM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=uh),i.error===void 0&&(i.error=uh),i.complete===void 0&&(i.complete=uh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function NM(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function uh(){}function Ka(t,e){return`${t} failed: ${e} argument `}var d_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,g(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ws=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var x$=4*60*60*1e3;function Be(t){return t&&t._delegate?t._delegate:t}var Je=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Jn="[DEFAULT]";var Qa=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new hn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xM(e))try{this.getOrInitializeService({instanceIdentifier:Jn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Jn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Jn){return this.instances.has(e)}getOptions(e=Jn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jn){return this.component?this.component.multipleInstances?e:Jn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function RM(t){return t===Jn?void 0:t}function xM(t){return t.instantiationMode==="EAGER"}var Es=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Qa(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var OM=[],K=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(K||{}),PM={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},kM=K.INFO,FM={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},LM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=FM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},fn=class{constructor(e){this.name=e,this._logLevel=kM,this._logHandler=LM,this._userLogHandler=null,OM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in K))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...e),this._logHandler(this,K.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...e),this._logHandler(this,K.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,K.INFO,...e),this._logHandler(this,K.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,K.WARN,...e),this._logHandler(this,K.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...e),this._logHandler(this,K.ERROR,...e)}};var VM=(t,e)=>e.some(n=>t instanceof n),h_,f_;function jM(){return h_||(h_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UM(){return f_||(f_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var p_=new WeakMap,yh=new WeakMap,g_=new WeakMap,vh=new WeakMap,Ih=new WeakMap;function BM(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(At(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&p_.set(n,t)}).catch(()=>{}),Ih.set(e,t),e}function $M(t){if(yh.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});yh.set(t,e)}var _h={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||g_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return At(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function m_(t){_h=t(_h)}function HM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Za(this),e,...n);return g_.set(r,e.sort?e.sort():[e]),At(r)}:UM().includes(t)?function(...e){return t.apply(Za(this),e),At(p_.get(this))}:function(...e){return At(t.apply(Za(this),e))}}function WM(t){return typeof t=="function"?HM(t):(t instanceof IDBTransaction&&$M(t),VM(t,jM())?new Proxy(t,_h):t)}function At(t){if(t instanceof IDBRequest)return BM(t);if(vh.has(t))return vh.get(t);let e=WM(t);return e!==t&&(vh.set(t,e),Ih.set(e,t)),e}var Za=t=>Ih.get(t);function y_(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=At(o);return r&&o.addEventListener("upgradeneeded",c=>{r(At(o.result),c.oldVersion,c.newVersion,At(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var zM=["get","getKey","getAll","getAllKeys","count"],GM=["put","add","delete","clear"],wh=new Map;function v_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wh.get(e))return wh.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=GM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zM.includes(n)))return;let s=function(o,...a){return m(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return wh.set(e,s),s}m_(t=>Z(y({},t),{get:(e,n,r)=>v_(e,n)||t.get(e,n,r),has:(e,n)=>!!v_(e,n)||t.has(e,n)}));var Ch=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qM(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function qM(t){let e=t.getComponent();return e?.type==="VERSION"}var Dh="@firebase/app",__="0.10.3";var Xn=new fn("@firebase/app"),YM="@firebase/app-compat",KM="@firebase/analytics-compat",QM="@firebase/analytics",ZM="@firebase/app-check-compat",JM="@firebase/app-check",XM="@firebase/auth",eN="@firebase/auth-compat",tN="@firebase/database",nN="@firebase/database-compat",rN="@firebase/functions",iN="@firebase/functions-compat",sN="@firebase/installations",oN="@firebase/installations-compat",aN="@firebase/messaging",cN="@firebase/messaging-compat",lN="@firebase/performance",uN="@firebase/performance-compat",dN="@firebase/remote-config",hN="@firebase/remote-config-compat",fN="@firebase/storage",pN="@firebase/storage-compat",gN="@firebase/firestore",mN="@firebase/vertexai-preview",vN="@firebase/firestore-compat",yN="firebase",_N="10.12.0";var bh="[DEFAULT]",IN={[Dh]:"fire-core",[YM]:"fire-core-compat",[QM]:"fire-analytics",[KM]:"fire-analytics-compat",[JM]:"fire-app-check",[ZM]:"fire-app-check-compat",[XM]:"fire-auth",[eN]:"fire-auth-compat",[tN]:"fire-rtdb",[nN]:"fire-rtdb-compat",[rN]:"fire-fn",[iN]:"fire-fn-compat",[sN]:"fire-iid",[oN]:"fire-iid-compat",[aN]:"fire-fcm",[cN]:"fire-fcm-compat",[lN]:"fire-perf",[uN]:"fire-perf-compat",[dN]:"fire-rc",[hN]:"fire-rc-compat",[fN]:"fire-gcs",[pN]:"fire-gcs-compat",[gN]:"fire-fst",[vN]:"fire-fst-compat",[mN]:"fire-vertex","fire-js":"fire-js",[yN]:"fire-js-all"};var Cs=new Map,wN=new Map,Th=new Map;function I_(t,e){try{t.container.addComponent(e)}catch(n){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gn(t){let e=t.name;if(Th.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;Th.set(e,t);for(let n of Cs.values())I_(n,t);for(let n of wN.values())I_(n,t);return!0}function Nh(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ti(t){return t.settings!==void 0}var EN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pn=new zt("app","Firebase",EN);var Sh=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Je("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}};var ni=_N;function Rh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:bh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw pn.create("bad-app-name",{appName:String(i)});if(n||(n=mh()),!n)throw pn.create("no-options");let s=Cs.get(i);if(s){if(_s(n,s.options)&&_s(r,s.config))return s;throw pn.create("duplicate-app",{appName:i})}let o=new Es(i);for(let c of Th.values())o.addComponent(c);let a=new Sh(n,r,o);return Cs.set(i,a),a}function bs(t=bh){let e=Cs.get(t);if(!e&&t===bh&&mh())return Rh();if(!e)throw pn.create("no-app",{appName:t});return e}function Ja(){return Array.from(Cs.values())}function me(t,e,n){var r;let i=(r=IN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(a.join(" "));return}gn(new Je(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var CN="firebase-heartbeat-database",DN=1,Ds="firebase-heartbeat-store",Eh=null;function D_(){return Eh||(Eh=y_(CN,DN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ds)}catch(n){console.warn(n)}}}}).catch(t=>{throw pn.create("idb-open",{originalErrorMessage:t.message})})),Eh}function bN(t){return m(this,null,function*(){try{let n=(yield D_()).transaction(Ds),r=yield n.objectStore(Ds).get(b_(t));return yield n.done,r}catch(e){if(e instanceof bt)Xn.warn(e.message);else{let n=pn.create("idb-get",{originalErrorMessage:e?.message});Xn.warn(n.message)}}})}function w_(t,e){return m(this,null,function*(){try{let r=(yield D_()).transaction(Ds,"readwrite");yield r.objectStore(Ds).put(e,b_(t)),yield r.done}catch(n){if(n instanceof bt)Xn.warn(n.message);else{let r=pn.create("idb-set",{originalErrorMessage:n?.message});Xn.warn(r.message)}}})}function b_(t){return`${t.name}!${t.options.appId}`}var TN=1024,SN=30*24*60*60*1e3,Ah=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Mh(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=E_();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=SN}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return m(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=E_(),{heartbeatsToSend:r,unsentEntries:i}=AN(this._heartbeatsCache.heartbeats),s=gs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function E_(){return new Date().toISOString().substring(0,10)}function AN(t,e=TN){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),C_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),C_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Mh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return s_()?o_().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield bN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return w_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return w_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function C_(t){return gs(JSON.stringify({version:2,heartbeats:t})).length}function MN(t){gn(new Je("platform-logger",e=>new Ch(e),"PRIVATE")),gn(new Je("heartbeat",e=>new Ah(e),"PRIVATE")),me(Dh,__,t),me(Dh,__,"esm2017"),me("fire-js","")}MN("");var NN="firebase",RN="10.12.0";me(NN,RN,"app");var ii=new Ut("ANGULARFIRE2_VERSION");function Oh(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ss=(t,e)=>{let n=e?[e]:Ja(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ts=class{constructor(){return Ss(xN)}},xN="app-check";function ri(){}var Xa=class{zone;delegate;constructor(e,n=Il){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},xh=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ri,{},ri,ri)),n.pipe(fe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},As=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Xa(Zone.current)),this.insideAngular=n.run(()=>new Xa(Zone.current,_l)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(O(J))};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ec(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function ON(t){return ec().ngZone.runOutsideAngular(()=>t())}function er(t){return ec().ngZone.run(()=>t())}function PN(t){return kN(ec())(t)}function kN(t){return function(n){return n=n.lift(new xh(t.ngZone)),n.pipe(Kt(t.outsideAngular),Yt(t.insideAngular))}}var FN=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),er(()=>t.apply(void 0,r))},dt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=er(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ri,{},ri,ri))),r[s]=FN(r[s],n));let i=ON(()=>t.apply(this,r));if(!e)if(i instanceof $){let s=ec();return i.pipe(Kt(s.outsideAngular),Yt(s.insideAngular))}else return er(()=>i);return i instanceof $?i.pipe(PN):i instanceof Promise?er(()=>new Promise((s,o)=>i.then(a=>er(()=>s(a)),a=>er(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:er(()=>i)};var tr=class{constructor(e){return e}},Ms=class{constructor(){return Ja()}};function LN(t){return t&&t.length===1?t[0]:new tr(bs())}var Ph=new C("angularfire2._apps"),VN={provide:tr,useFactory:LN,deps:[[new wt,Ph]]},jN={provide:Ms,deps:[[new wt,Ph]]};function UN(t){return(e,n)=>{let r=n.get(sn);me("angularfire",ii.full,"core"),me("angularfire",ii.full,"app"),me("angular",Bv.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new tr(i)}}function T_(t,...e){return nn([VN,jN,{provide:Ph,useFactory:UN(t),multi:!0,deps:[J,Et,As,...e]}])}var S_=dt(Rh,!0);function k_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var F_=k_,L_=new zt("auth","Firebase",k_());var ic=new fn("@firebase/auth");function BN(t,...e){ic.logLevel<=K.WARN&&ic.warn(`Auth (${ni}): ${t}`,...e)}function nc(t,...e){ic.logLevel<=K.ERROR&&ic.error(`Auth (${ni}): ${t}`,...e)}function A_(t,...e){throw Gh(t,...e)}function zh(t,...e){return Gh(t,...e)}function V_(t,e,n){let r=Object.assign(Object.assign({},F_()),{[e]:n});return new zt("auth","Firebase",r).create(e,{appName:t.name})}function rc(t){return V_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gh(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return L_.create(t,...e)}function q(t,e,...n){if(!t)throw Gh(e,...n)}function Ns(t){let e="INTERNAL ASSERTION FAILED: "+t;throw nc(e),new Error(e)}function sc(t,e){t||Ns(e)}function $N(){return M_()==="http:"||M_()==="https:"}function M_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function HN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($N()||i_()||"connection"in navigator)?navigator.onLine:!0}function WN(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var rr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,sc(n>e,"Short delay should be less than long delay!"),this.isMobile=vs()||qa()}get(){return HN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function zN(t,e){sc(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var oc=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var GN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var qN=new rr(3e4,6e4);function j_(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function uc(s,o,a,c){return m(this,arguments,function*(t,e,n,r,i={}){return U_(t,i,()=>m(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Is(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),oc.fetch()(B_(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function U_(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},GN),e);try{let i=new Lh(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw tc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw tc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw tc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw tc(t,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw V_(t,u,l);A_(t,u)}}catch(i){if(i instanceof bt)throw i;A_(t,"network-request-failed",{message:String(i)})}})}function B_(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?zN(t.config,i):`${t.config.apiScheme}://${i}`}var Lh=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zh(this.auth,"network-request-failed")),qN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function tc(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=zh(t,e,r);return i.customData._tokenResponse=n,i}function YN(t,e){return m(this,null,function*(){return uc(t,"POST","/v1/accounts:delete",e)})}function $_(t,e){return m(this,null,function*(){return uc(t,"POST","/v1/accounts:lookup",e)})}function Rs(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function qh(t,e=!1){return m(this,null,function*(){let n=Be(t),r=yield n.getIdToken(e),i=H_(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Rs(kh(i.auth_time)),issuedAtTime:Rs(kh(i.iat)),expirationTime:Rs(kh(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function kh(t){return Number(t)*1e3}function H_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nc("JWT malformed, contained fewer than 3 sections"),null;try{let i=ms(n);return i?JSON.parse(i):(nc("Failed to decode base64 JWT payload"),null)}catch(i){return nc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function N_(t){let e=H_(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Vh(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof bt&&KN(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function KN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var jh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Os=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rs(this.lastLoginAt),this.creationTime=Rs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ac(t){return m(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Vh(t,$_(n,{idToken:r}));q(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?W_(s.providerUserInfo):[],a=QN(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Os(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function Yh(t){return m(this,null,function*(){let e=Be(t);yield ac(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function QN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function W_(t){return t.map(e=>{var{providerId:n}=e,r=wl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function ZN(t,e){return m(this,null,function*(){let n=yield U_(t,{},()=>m(this,null,function*(){let r=Is({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=B_(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",oc.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function JN(t,e){return m(this,null,function*(){return uc(t,"POST","/v2/accounts:revokeToken",j_(t,e))})}var xs=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");let n=N_(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return m(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield ZN(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ns("not implemented")}};function mn(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ps=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=wl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Os(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield Vh(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return qh(this,e)}reload(){return Yh(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield ac(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(ti(this.auth.app))return Promise.reject(rc(this.auth));let e=yield this.getIdToken();return yield Vh(this,YN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,R=(l=n.createdAt)!==null&&l!==void 0?l:void 0,ye=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:se,emailVerified:Me,isAnonymous:Ot,providerData:De,stsTokenManager:Pt}=n;q(se&&Pt,e,"internal-error");let Ii=xs.fromJSON(this.name,Pt);q(typeof se=="string",e,"internal-error"),mn(d,e.name),mn(h,e.name),q(typeof Me=="boolean",e,"internal-error"),q(typeof Ot=="boolean",e,"internal-error"),mn(f,e.name),mn(p,e.name),mn(v,e.name),mn(T,e.name),mn(R,e.name),mn(ye,e.name);let wi=new t({uid:se,auth:e,email:h,emailVerified:Me,displayName:d,isAnonymous:Ot,photoURL:p,phoneNumber:f,tenantId:v,stsTokenManager:Ii,createdAt:R,lastLoginAt:ye});return De&&Array.isArray(De)&&(wi.providerData=De.map(il=>Object.assign({},il))),T&&(wi._redirectEventId=T),wi}static _fromIdTokenResponse(e,n,r=!1){return m(this,null,function*(){let i=new xs;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ac(s),s})}static _fromGetAccountInfoResponse(e,n,r){return m(this,null,function*(){let i=n.users[0];q(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?W_(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new xs;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Os(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var R_=new Map;function nr(t){sc(t instanceof Function,"Expected a class definition");let e=R_.get(t);return e?(sc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,R_.set(t,e),e)}var XN=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,r){return m(this,null,function*(){this.storage[n]=r})}_get(n){return m(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Uh=XN;function Fh(t,e,n){return`firebase:${t}:${e}:${n}`}var cc=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Fh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Fh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ps._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(this,null,function*(){if(!n.length)return new t(nr(Uh),e,r);let i=(yield Promise.all(n.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||nr(Uh),o=Fh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=Ps._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>m(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function x_(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sR(e))return"Blackberry";if(oR(e))return"Webos";if(tR(e))return"Safari";if((e.includes("chrome/")||nR(e))&&!e.includes("edge/"))return"Chrome";if(iR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function eR(t=ut()){return/firefox\//i.test(t)}function tR(t=ut()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nR(t=ut()){return/crios\//i.test(t)}function rR(t=ut()){return/iemobile/i.test(t)}function iR(t=ut()){return/android/i.test(t)}function sR(t=ut()){return/blackberry/i.test(t)}function oR(t=ut()){return/webos/i.test(t)}function z_(t,e=[]){let n;switch(t){case"Browser":n=x_(ut());break;case"Worker":n=`${x_(ut())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ni}/${r}`}var Bh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function aR(n){return m(this,arguments,function*(t,e={}){return uc(t,"GET","/v2/passwordPolicy",j_(t,e))})}var cR=6,$h=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:cR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Hh=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lc(this),this.idTokenSubscription=new lc(this),this.beforeStateQueue=new Bh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield cc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let n=yield $_(this,{idToken:e}),r=yield Ps._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var n;if(ti(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield ac(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=WN()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(ti(this.app))return Promise.reject(rc(this));let n=e?Be(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return ti(this.app)?Promise.reject(rc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ti(this.app)?Promise.reject(rc(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(nr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield aR(this),n=new $h(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield JN(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&nr(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=yield cc.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return m(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&BN(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function lR(t){return Be(t)}var lc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=u_(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var uR={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dR(t){uR=t}function hR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function fR(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(nr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var AH=hR("rcb"),MH=new rr(3e4,6e4);var NH=new rr(2e3,1e4);var RH=10*60*1e3;var xH=new rr(3e4,6e4);var OH=new rr(5e3,15e3);var PH=encodeURIComponent("fac");var O_="@firebase/auth",P_="1.7.3";var Wh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function pR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gR(t){gn(new Je("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z_(t)},l=new Hh(r,i,s,c);return fR(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gn(new Je("auth-internal",e=>{let n=lR(e.getProvider("auth").getImmediate());return(r=>new Wh(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),me(O_,P_,pR(t)),me(O_,P_,"esm2017")}var mR=5*60,kH=n_("authIdTokenMaxAge")||mR;function vR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dR({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=zh("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",vR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gR("Browser");var mx="auth";var dc=class{constructor(){return Ss(mx)}};var G_="@firebase/database",q_="1.0.5";var Qf="";function vx(t){Qf=t}var nf=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),de(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ei(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var rf=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return St(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var TI=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nf(e)}}catch{}return new rf},sr=TI("localStorage"),sf=TI("sessionStorage");var ai=new fn("@firebase/database"),yx=function(){let t=1;return function(){return t++}}(),SI=function(t){let e=d_(t),n=new za;n.update(e);let r=n.digest();return Ga.encodeByteArray(r)},Js=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Js.apply(null,r):typeof r=="object"?e+=de(r):e+=r,e+=" "}return e},ar=null,Y_=!0,_x=function(t,e){g(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ai.logLevel=K.VERBOSE,ar=ai.log.bind(ai),e&&sf.set("logging_enabled",!0)):typeof t=="function"?ar=t:(ar=null,sf.remove("logging_enabled"))},Ce=function(...t){if(Y_===!0&&(Y_=!1,ar===null&&sf.get("logging_enabled")===!0&&_x(!0)),ar){let e=Js.apply(null,t);ar(e)}},Xs=function(t){return function(...e){Ce(t,...e)}},of=function(...t){let e="FIREBASE INTERNAL ERROR: "+Js(...t);ai.error(e)},Gt=function(...t){let e=`FIREBASE FATAL ERROR: ${Js(...t)}`;throw ai.error(e),new Error(e)},xe=function(...t){let e="FIREBASE WARNING: "+Js(...t);ai.warn(e)},Ix=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},AI=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},wx=function(t){if(Tt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},li="[MIN_NAME]",cr="[MAX_NAME]",mi=function(t,e){if(t===e)return 0;if(t===li||e===cr)return-1;if(e===li||t===cr)return 1;{let n=K_(t),r=K_(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Ex=function(t,e){return t===e?0:t<e?-1:1},ks=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+de(e))},Zf=function(t){if(typeof t!="object"||t===null)return de(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=de(e[r]),n+=":",n+=Zf(t[e[r]]);return n+="}",n},MI=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Oe(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var NI=function(t){g(!AI(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Cx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Dx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function bx(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var Tx=new RegExp("^-?(0*)\\d{1,10}$"),Sx=-2147483648,Ax=2147483647,K_=function(t){if(Tx.test(t)){let e=Number(t);if(e>=Sx&&e<=Ax)return e}return null},vi=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw xe("Exception was thrown by user callback.",n),e},Math.floor(0))}},Mx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Us=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var af=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){xe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var cf=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ce("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xe(e)}},Bs=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),fc="5",RI="v",xI="s",OI="r",PI="f",kI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,FI="ls",LI="p",lf="ac",VI="websocket",jI="long_polling";var pc=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function Nx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function UI(t,e,n){g(typeof e=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(e===VI)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===jI)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Nx(t)&&(n.ns=t.namespace);let i=[];return Oe(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var uf=class{constructor(){this.counters_={}}incrementCounter(e,n=1){St(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Jy(this.counters_)}};var Kh={},Qh={};function Jf(t){let e=t.toString();return Kh[e]||(Kh[e]=new uf),Kh[e]}function Rx(t,e){let n=t.toString();return Qh[n]||(Qh[n]=e()),Qh[n]}var df=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&vi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Q_="start",xx="close",Ox="pLPCommand",Px="pRTLPCB",BI="id",$I="pw",HI="ser",kx="cb",Fx="seg",Lx="ts",Vx="d",jx="dframe",WI=1870,zI=30,Ux=WI-zI,Bx=25e3,$x=3e4,hf=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xs(e),this.stats_=Jf(n),this.urlFn=c=>(this.appCheckToken&&(c[lf]=this.appCheckToken),UI(n,jI,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new df(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($x)),wx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ff((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Q_)this.id=a,this.password=c;else if(o===xx)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[Q_]="t",r[HI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[kx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[RI]=fc,this.transportSessionId&&(r[xI]=this.transportSessionId),this.lastSessionId&&(r[FI]=this.lastSessionId),this.applicationId&&(r[LI]=this.applicationId),this.appCheckToken&&(r[lf]=this.appCheckToken),typeof location<"u"&&location.hostname&&kI.test(location.hostname)&&(r[OI]=PI);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Tt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Cx()&&!Dx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=de(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=ph(n),i=MI(r,Ux);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Tt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[jx]="t",r[BI]=e,r[$I]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=de(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},ff=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Tt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=yx(),window[Ox+this.uniqueCallbackIdentifier]=e,window[Px+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ce("frame writing exception"),a.stack&&Ce(a.stack),Ce(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ce("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[BI]=this.myID,e[$I]=this.myPW,e[HI]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+zI+r.length<=WI;){let o=this.pendingSegs.shift();r=r+"&"+Fx+i+"="+o.seg+"&"+Lx+i+"="+o.ts+"&"+Vx+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Bx)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Tt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ce("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Hx=16384,Wx=45e3,gc=null;typeof MozWebSocket<"u"?gc=MozWebSocket:typeof WebSocket<"u"&&(gc=WebSocket);var Fs=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xs(this.connId),this.stats_=Jf(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[RI]=fc,!Tt()&&typeof location<"u"&&location.hostname&&kI.test(location.hostname)&&(a[OI]=PI),r&&(a[xI]=r),i&&(a[FI]=i),s&&(a[lf]=s),o&&(a[LI]=o),UI(n,VI,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sr.set("previous_websocket_failure",!0);try{let i;if(Tt()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${fc}/${Qf}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new gc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&gc!==null&&!t.forceDisallow_}static previouslyFailed(){return sr.isInMemoryStorage||sr.get("previous_websocket_failure")===!0}markConnectionHealthy(){sr.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ei(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=de(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=MI(r,Hx);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Wx))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),zx=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[hf,Fs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Fs&&Fs.isAvailable(),i=r&&!Fs.previouslyFailed();if(n.webSocketOnly&&(r||xe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Fs];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),Gx=6e4,qx=5e3,Yx=10*1024,Kx=100*1024,Zh="t",Z_="d",Qx="s",J_="r",Zx="e",X_="o",eI="a",tI="n",nI="p",Jx="h",pf=class{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xs("c:"+this.id+":"),this.transportManager_=new zx(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Us(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Kx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Yx?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Zh in e){let n=e[Zh];n===eI?this.upgradeIfSecondaryHealthy_():n===J_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===X_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=ks("t",e),r=ks("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:nI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:eI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:tI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=ks("t",e),r=ks("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=ks(Zh,e);if(Z_ in e){let r=e[Z_];if(n===Jx){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===tI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Qx?this.onConnectionShutdown_(r):n===J_?this.onReset_(r):n===Zx?of("Server Error: "+r):n===X_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):of("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),fc!==r&&xe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Us(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Gx))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Us(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(qx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:nI,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var mc=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var vc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},g(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){g(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var yc=class t extends vc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!vs()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return g(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var rI=32,iI=768,Q=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function z(){return new Q("")}function k(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function _n(t){return t.pieces_.length-t.pieceNum_}function ne(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Q(t.pieces_,e)}function GI(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Xx(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function qI(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function YI(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Q(e,0)}function ge(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Q)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Q(n,0)}function V(t){return t.pieceNum_>=t.pieces_.length}function Ae(t,e){let n=k(t),r=k(e);if(n===null)return e;if(n===r)return Ae(ne(t),ne(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Xf(t,e){if(_n(t)!==_n(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ft(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(_n(t)>_n(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var gf=class{constructor(e,n){this.errorPrefix_=n,this.parts_=qI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ws(this.parts_[r]);KI(this)}};function eO(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ws(e),KI(t)}function tO(t){let e=t.parts_.pop();t.byteLength_-=ws(e),t.parts_.length>0&&(t.byteLength_-=1)}function KI(t){if(t.byteLength_>iI)throw new Error(t.errorPrefix_+"has a key path longer than "+iI+" bytes ("+t.byteLength_+").");if(t.parts_.length>rI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+rI+") or object contains a cycle "+ir(t))}function ir(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var mf=class t extends vc{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return g(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ls=1e3,nO=60*5*1e3,sI=30*1e3,rO=1.3,iO=3e4,sO="server_kill",oI=3,ep=(()=>{class t extends mc{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Xs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ls,this.maxReconnectDelay_=nO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Tt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mf.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&yc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(de(o)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new hn,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&St(n,"w")){let i=Zn(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();xe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||l_(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sI)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=c_(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+de(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):of("Unrecognized action received from server: "+de(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ls,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ls,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>iO&&(this.reconnectDelay_=Ls),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*rO)}this.onConnectStatus_(!1)}establishConnection_(){return m(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){g(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ce("getToken() completed but was canceled"):(Ce("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new pf(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{xe(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(sO)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&xe(h),l())}}})}interrupt(n){Ce("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ce("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ya(this.interruptReasons_)&&(this.reconnectDelay_=Ls,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Zf(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Q(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Ce("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=oI&&(this.reconnectDelay_=sI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ce("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=oI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Tt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Qf.replace(/\./g,"-")]=1,vs()?n["framework.cordova"]=1:qa()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=yc.getInstance().currentlyOnline();return Ya(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),F=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var ui=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new F(li,e),i=new F(li,n);return this.compare(r,i)!==0}minPost(){return F.MIN}};var hc,_c=class extends ui{static get __EMPTY_NODE(){return hc}static set __EMPTY_NODE(e){hc=e}compare(e,n){return mi(e.name,n.name)}isDefinedOn(e){throw Qn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return F.MIN}maxPost(){return new F(cr,hc)}makePost(e,n){return g(typeof e=="string","KeyIndex indexValue must always be a string."),new F(e,hc)}toString(){return".key"}},ci=new _c;var oi=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ht=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Xe.EMPTY_NODE,this.right=o??Xe.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xe.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Xe.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),vf=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new ht(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Xe=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ht.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ht.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new oi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new oi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new oi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new oi(this.root_,null,this.comparator_,!0,e)}};Xe.EMPTY_NODE=new vf;function oO(t,e){return mi(t.name,e.name)}function tp(t,e){return mi(t,e)}var yf;function aO(t){yf=t}var QI=function(t){return typeof t=="number"?"number:"+NI(t):"string:"+t},ZI=function(t){if(t.isLeafNode()){let e=t.val();g(typeof e=="string"||typeof e=="number"||typeof e=="object"&&St(e,".sv"),"Priority must be a string or number.")}else g(t===yf||t.isEmpty(),"priority of unexpected type.");g(t===yf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var aI,di=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ZI(this.priorityNode_)}static set __childrenNodeConstructor(n){aI=n}static get __childrenNodeConstructor(){return aI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return V(n)?this:k(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=k(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||_n(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ne(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+QI(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=NI(this.value_):n+=this.value_,this.lazyHash_=SI(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return g(s>=0,"Unknown leaf type: "+r),g(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),JI,XI;function cO(t){JI=t}function lO(t){XI=t}var _f=class extends ui{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?mi(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return F.MIN}maxPost(){return new F(cr,new di("[PRIORITY-POST]",XI))}makePost(e,n){let r=JI(e);return new F(n,new di("[PRIORITY-POST]",r))}toString(){return".priority"}},ae=new _f;var uO=Math.log(2),If=class{constructor(e){let n=s=>parseInt(Math.log(s)/uO,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Ic=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new ht(h,d.node,ht.BLACK,null,null);{let f=parseInt(u/2,10)+c,p=i(c,f),v=i(f+1,l);return d=t[f],h=n?n(d):d,new ht(h,d.node,ht.BLACK,p,v)}},s=function(c){let l=null,u=null,d=t.length,h=function(p,v){let T=d-p,R=d;d-=p;let ye=i(T+1,R),se=t[T],Me=n?n(se):se;f(new ht(Me,se.node,v,null,ye))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let v=c.nextBitIsOne(),T=Math.pow(2,c.count-(p+1));v?h(T,ht.BLACK):(h(T,ht.BLACK),h(T,ht.RED))}return u},o=new If(t.length),a=s(o);return new Xe(r||e,a)};var Jh,si={},hi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return g(si&&ae,"ChildrenNode.ts has not been loaded"),Jh=Jh||new t({".priority":si},{".priority":ae}),Jh}get(e){let n=Zn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Xe?n:null}hasIndex(e){return St(this.indexSet_,e.toString())}addIndex(e,n){g(e!==ci,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(F.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Ic(r,e.getCompare()):a=si;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=ys(this.indexes_,(i,s)=>{let o=Zn(this.indexSet_,s);if(g(o,"Missing index implementation for "+s),i===si)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(F.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Ic(a,o.getCompare())}else return si;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new F(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=ys(this.indexes_,i=>{if(i===si)return i;{let s=n.get(e.name);return s?i.remove(new F(e.name,s)):i}});return new t(r,this.indexSet_)}};var Vs,M=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&ZI(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Vs||(Vs=new t(new Xe(tp),null,hi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Vs}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Vs:r}}getChild(n){let r=k(n);return r===null?this:this.getImmediateChild(r).getChild(ne(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new F(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Vs:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=k(n);if(i===null)return r;{g(k(n)!==".priority"||_n(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(ne(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(ae,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+QI(this.getPriority().val())+":"),this.forEachChild(ae,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":SI(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new F(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new F(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new F(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,F.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,F.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===eo?-1:0}withIndex(n){if(n===ci||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===ci||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ae),s=r.getIterator(ae),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===ci?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),wf=class extends M{constructor(){super(new Xe(tp),M.EMPTY_NODE,hi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return M.EMPTY_NODE}isEmpty(){return!1}},eo=new wf;Object.defineProperties(F,{MIN:{value:new F(li,M.EMPTY_NODE)},MAX:{value:new F(cr,eo)}});_c.__EMPTY_NODE=M.EMPTY_NODE;di.__childrenNodeConstructor=M;aO(eo);lO(eo);var dO=!0;function ve(t,e=null){if(t===null)return M.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),g(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new di(n,ve(e))}if(!(t instanceof Array)&&dO){let n=[],r=!1;if(Oe(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=ve(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new F(o,c)))}}),n.length===0)return M.EMPTY_NODE;let s=Ic(n,oO,o=>o.name,tp);if(r){let o=Ic(n,ae.getCompare());return new M(s,ve(e),new hi({".priority":o},{".priority":ae}))}else return new M(s,ve(e),hi.Default)}else{let n=M.EMPTY_NODE;return Oe(t,(r,i)=>{if(St(t,r)&&r.substring(0,1)!=="."){let s=ve(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ve(e))}}cO(ve);var Ef=class extends ui{constructor(e){super(),this.indexPath_=e,g(!V(e)&&k(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?mi(e.name,n.name):s}makePost(e,n){let r=ve(e),i=M.EMPTY_NODE.updateChild(this.indexPath_,r);return new F(n,i)}maxPost(){let e=M.EMPTY_NODE.updateChild(this.indexPath_,eo);return new F(cr,e)}toString(){return qI(this.indexPath_,0).join("/")}};var Cf=class extends ui{compare(e,n){let r=e.node.compareTo(n.node);return r===0?mi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return F.MIN}maxPost(){return F.MAX}makePost(e,n){let r=ve(e);return new F(n,r)}toString(){return".value"}},hO=new Cf;function ew(t){return{type:"value",snapshotNode:t}}function fi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function zs(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Gs(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function fO(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var qs=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){g(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(zs(n,a)):g(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(fi(n,r)):o.trackChildChange(Gs(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ae,(i,s)=>{n.hasChild(i)||r.trackChildChange(zs(i,s))}),n.isLeafNode()||n.forEachChild(ae,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Gs(i,s,o))}else r.trackChildChange(fi(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?M.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var wc=class t{constructor(e){this.indexedFilter_=new qs(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new F(n,r))||(r=M.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=M.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(M.EMPTY_NODE);let s=this;return n.forEachChild(ae,(o,a)=>{s.matches(new F(o,a))||(i=i.updateImmediateChild(o,M.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Df=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new wc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new F(n,r))||(r=M.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=M.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=M.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(M.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,M.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;g(a.numChildren()===this.limit_,"");let c=new F(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return s?.trackChildChange(Gs(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(zs(n,d));let v=a.updateImmediateChild(n,M.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(fi(h.name,h.node)),v.updateImmediateChild(h.name,h.node)):v}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(zs(l.name,l.node)),s.trackChildChange(fi(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,M.EMPTY_NODE)):e}};var bf=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:li}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ae}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function pO(t){return t.loadsAllData()?new qs(t.getIndex()):t.hasLimit()?new Df(t):new wc(t)}function cI(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ae?n="$priority":t.index_===hO?n="$value":t.index_===ci?n="$key":(g(t.index_ instanceof Ef,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=de(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=de(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+de(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=de(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+de(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function lI(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ae&&(e.i=t.index_.toString()),e}var Tf=class t extends mc{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Xs("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(g(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=cI(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Zn(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=cI(e._queryParams),r=e._path.toString(),i=new hn;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Is(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ei(a.responseText)}catch{xe("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&xe("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Sf=class{constructor(){this.rootNode_=M.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Ec(){return{value:null,children:new Map}}function tw(t,e,n){if(V(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=k(e);t.children.has(r)||t.children.set(r,Ec());let i=t.children.get(r);e=ne(e),tw(i,e,n)}}function Af(t,e,n){t.value!==null?n(e,t.value):gO(t,(r,i)=>{let s=new Q(e.toString()+"/"+r);Af(i,s,n)})}function gO(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Mf=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Oe(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var uI=10*1e3,mO=30*1e3,vO=5*60*1e3,Nf=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Mf(e);let r=uI+(mO-uI)*Math.random();Us(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Oe(e,(i,s)=>{s>0&&St(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Us(this.reportStats_.bind(this),Math.floor(Math.random()*2*vO))}};var Mt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Mt||{});function nw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function np(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function rp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Rf=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Mt.ACK_USER_WRITE,this.source=nw()}operationForChild(e){if(V(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Q(e));return new t(z(),n,this.revert)}}else return g(k(this.path)===e,"operationForChild called for unrelated child."),new t(ne(this.path),this.affectedTree,this.revert)}};var Cc=class t{constructor(e,n){this.source=e,this.path=n,this.type=Mt.LISTEN_COMPLETE}operationForChild(e){return V(this.path)?new t(this.source,z()):new t(this.source,ne(this.path))}};var pi=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Mt.OVERWRITE}operationForChild(e){return V(this.path)?new t(this.source,z(),this.snap.getImmediateChild(e)):new t(this.source,ne(this.path),this.snap)}};var Dc=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Mt.MERGE}operationForChild(e){if(V(this.path)){let n=this.children.subtree(new Q(e));return n.isEmpty()?null:n.value?new pi(this.source,z(),n.value):new t(this.source,z(),n)}else return g(k(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ne(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Nt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(V(e))return this.isFullyInitialized()&&!this.filtered_;let n=k(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var xf=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function yO(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(fO(o.childName,o.snapshotNode))}),js(t,i,"child_removed",e,r,n),js(t,i,"child_added",e,r,n),js(t,i,"child_moved",s,r,n),js(t,i,"child_changed",e,r,n),js(t,i,"value",e,r,n),i}function js(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>IO(t,a,c)),o.forEach(a=>{let c=_O(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function _O(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function IO(t,e,n){if(e.childName==null||n.childName==null)throw Qn("Should only compare child_ events.");let r=new F(e.childName,e.snapshotNode),i=new F(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Vc(t,e){return{eventCache:t,serverCache:e}}function $s(t,e,n,r){return Vc(new Nt(e,n,r),t.serverCache)}function rw(t,e,n,r){return Vc(t.eventCache,new Nt(e,n,r))}function bc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function lr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Xh,wO=()=>(Xh||(Xh=new Xe(Ex)),Xh),Pe=class t{constructor(e,n=wO()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Oe(e,(r,i)=>{n=n.set(new Q(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:z(),value:this.value};if(V(e))return null;{let r=k(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(ne(e),n);return s!=null?{path:ge(new Q(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(V(e))return this;{let n=k(e),r=this.children.get(n);return r!==null?r.subtree(ne(e)):new t(null)}}set(e,n){if(V(e))return new t(n,this.children);{let r=k(e),s=(this.children.get(r)||new t(null)).set(ne(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(V(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=k(e),r=this.children.get(n);if(r){let i=r.remove(ne(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(V(e))return this.value;{let n=k(e),r=this.children.get(n);return r?r.get(ne(e)):null}}setTree(e,n){if(V(e))return n;{let r=k(e),s=(this.children.get(r)||new t(null)).setTree(ne(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(z(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ge(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,z(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(V(e))return null;{let s=k(e),o=this.children.get(s);return o?o.findOnPath_(ne(e),ge(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,z(),n)}foreachOnPath_(e,n,r){if(V(e))return this;{this.value&&r(n,this.value);let i=k(e),s=this.children.get(i);return s?s.foreachOnPath_(ne(e),ge(n,i),r):new t(null)}}foreach(e){this.foreach_(z(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ge(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var pt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Pe(null))}};function Hs(t,e,n){if(V(e))return new pt(new Pe(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Ae(i,e);return s=s.updateChild(o,n),new pt(t.writeTree_.set(i,s))}else{let i=new Pe(n),s=t.writeTree_.setTree(e,i);return new pt(s)}}}function dI(t,e,n){let r=t;return Oe(n,(i,s)=>{r=Hs(r,ge(e,i),s)}),r}function hI(t,e){if(V(e))return pt.empty();{let n=t.writeTree_.setTree(e,new Pe(null));return new pt(n)}}function Of(t,e){return ur(t,e)!=null}function ur(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ae(n.path,e)):null}function fI(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ae,(r,i)=>{e.push(new F(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new F(r,i.value))}),e}function vn(t,e){if(V(e))return t;{let n=ur(t,e);return n!=null?new pt(new Pe(n)):new pt(t.writeTree_.subtree(e))}}function Pf(t){return t.writeTree_.isEmpty()}function gi(t,e){return iw(z(),t.writeTree_,e)}function iw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(g(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=iw(ge(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ge(t,".priority"),r)),n}}function jc(t,e){return cw(e,t)}function EO(t,e,n,r,i){g(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Hs(t.visibleWrites,e,n)),t.lastWriteId=r}function CO(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function DO(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);g(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&bO(a,r.path)?i=!1:ft(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return TO(t),!0;if(r.snap)t.visibleWrites=hI(t.visibleWrites,r.path);else{let a=r.children;Oe(a,c=>{t.visibleWrites=hI(t.visibleWrites,ge(r.path,c))})}return!0}else return!1}function bO(t,e){if(t.snap)return ft(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&ft(ge(t.path,n),e))return!0;return!1}function TO(t){t.visibleWrites=sw(t.allWrites,SO,z()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function SO(t){return t.visible}function sw(t,e,n){let r=pt.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)ft(n,o)?(a=Ae(n,o),r=Hs(r,a,s.snap)):ft(o,n)&&(a=Ae(o,n),r=Hs(r,z(),s.snap.getChild(a)));else if(s.children){if(ft(n,o))a=Ae(n,o),r=dI(r,a,s.children);else if(ft(o,n))if(a=Ae(o,n),V(a))r=dI(r,z(),s.children);else{let c=Zn(s.children,k(a));if(c){let l=c.getChild(ne(a));r=Hs(r,z(),l)}}}else throw Qn("WriteRecord should have .snap or .children")}}return r}function ow(t,e,n,r,i){if(!r&&!i){let s=ur(t.visibleWrites,e);if(s!=null)return s;{let o=vn(t.visibleWrites,e);if(Pf(o))return n;if(n==null&&!Of(o,z()))return null;{let a=n||M.EMPTY_NODE;return gi(o,a)}}}else{let s=vn(t.visibleWrites,e);if(!i&&Pf(s))return n;if(!i&&n==null&&!Of(s,z()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(ft(l.path,e)||ft(e,l.path))},a=sw(t.allWrites,o,e),c=n||M.EMPTY_NODE;return gi(a,c)}}}function AO(t,e,n){let r=M.EMPTY_NODE,i=ur(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ae,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=vn(t.visibleWrites,e);return n.forEachChild(ae,(o,a)=>{let c=gi(vn(s,new Q(o)),a);r=r.updateImmediateChild(o,c)}),fI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=vn(t.visibleWrites,e);return fI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function MO(t,e,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ge(e,n);if(Of(t.visibleWrites,s))return null;{let o=vn(t.visibleWrites,s);return Pf(o)?i.getChild(n):gi(o,i.getChild(n))}}function NO(t,e,n,r){let i=ge(e,n),s=ur(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=vn(t.visibleWrites,i);return gi(o,r.getNode().getImmediateChild(n))}else return null}function RO(t,e){return ur(t.visibleWrites,e)}function xO(t,e,n,r,i,s,o){let a,c=vn(t.visibleWrites,e),l=ur(c,z());if(l!=null)a=l;else if(n!=null)a=gi(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function OO(){return{visibleWrites:pt.empty(),allWrites:[],lastWriteId:-1}}function Tc(t,e,n,r){return ow(t.writeTree,t.treePath,e,n,r)}function ip(t,e){return AO(t.writeTree,t.treePath,e)}function pI(t,e,n,r){return MO(t.writeTree,t.treePath,e,n,r)}function Sc(t,e){return RO(t.writeTree,ge(t.treePath,e))}function PO(t,e,n,r,i,s){return xO(t.writeTree,t.treePath,e,n,r,i,s)}function sp(t,e,n){return NO(t.writeTree,t.treePath,e,n)}function aw(t,e){return cw(ge(t.treePath,e),t.writeTree)}function cw(t,e){return{treePath:t,writeTree:e}}var kf=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Gs(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,zs(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,fi(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Gs(r,e.snapshotNode,i.oldSnap));else throw Qn("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Ff=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},lw=new Ff,Ys=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Nt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sp(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:lr(this.viewCache_),s=PO(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function kO(t){return{filter:t}}function FO(t,e){g(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),g(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function LO(t,e,n,r,i){let s=new kf,o,a;if(n.type===Mt.OVERWRITE){let l=n;l.source.fromUser?o=Lf(t,e,l.path,l.snap,r,i,s):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!V(l.path),o=Ac(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Mt.MERGE){let l=n;l.source.fromUser?o=jO(t,e,l.path,l.children,r,i,s):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Vf(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Mt.ACK_USER_WRITE){let l=n;l.revert?o=$O(t,e,l.path,r,i,s):o=UO(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Mt.LISTEN_COMPLETE)o=BO(t,e,n.path,r,s);else throw Qn("Unknown operation type: "+n.type);let c=s.getChanges();return VO(e,o,c),{viewCache:o,changes:c}}function VO(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=bc(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ew(bc(e)))}}function uw(t,e,n,r,i,s){let o=e.eventCache;if(Sc(r,n)!=null)return e;{let a,c;if(V(n))if(g(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=lr(e),u=l instanceof M?l:M.EMPTY_NODE,d=ip(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Tc(r,lr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=k(n);if(l===".priority"){g(_n(n)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=pI(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=ne(n),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=pI(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=sp(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return $s(e,a,o.isFullyInitialized()||V(n),t.filter.filtersNodes())}}function Ac(t,e,n,r,i,s,o,a){let c=e.serverCache,l,u=o?t.filter:t.filter.getIndexedFilter();if(V(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{let f=k(n);if(!c.isCompleteForPath(n)&&_n(n)>1)return e;let p=ne(n),T=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),T):l=u.updateChild(c.getNode(),f,T,p,lw,null)}let d=rw(e,l,c.isFullyInitialized()||V(n),u.filtersNodes()),h=new Ys(i,d,s);return uw(t,d,n,i,h,a)}function Lf(t,e,n,r,i,s,o){let a=e.eventCache,c,l,u=new Ys(i,e,s);if(V(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=$s(e,l,!0,t.filter.filtersNodes());else{let d=k(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=$s(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=ne(n),f=a.getNode().getImmediateChild(d),p;if(V(h))p=r;else{let v=u.getCompleteChild(d);v!=null?GI(h)===".priority"&&v.getChild(YI(h)).isEmpty()?p=v:p=v.updateChild(h,r):p=M.EMPTY_NODE}if(f.equals(p))c=e;else{let v=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=$s(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function gI(t,e){return t.eventCache.isCompleteForChild(e)}function jO(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=ge(n,c);gI(e,k(u))&&(a=Lf(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=ge(n,c);gI(e,k(u))||(a=Lf(t,a,u,l,i,s,o))}),a}function mI(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Vf(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;V(n)?l=r:l=new Pe(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),p=mI(t,f,h);c=Ac(t,c,new Q(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let p=e.serverCache.getNode().getImmediateChild(d),v=mI(t,p,h);c=Ac(t,c,new Q(d),v,i,s,o,a)}}),c}function UO(t,e,n,r,i,s,o){if(Sc(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(V(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ac(t,e,n,c.getNode().getChild(n),i,s,a,o);if(V(n)){let l=new Pe(null);return c.getNode().forEachChild(ci,(u,d)=>{l=l.set(new Q(u),d)}),Vf(t,e,n,l,i,s,a,o)}else return e}else{let l=new Pe(null);return r.foreach((u,d)=>{let h=ge(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),Vf(t,e,n,l,i,s,a,o)}}function BO(t,e,n,r,i){let s=e.serverCache,o=rw(e,s.getNode(),s.isFullyInitialized()||V(n),s.isFiltered());return uw(t,o,n,r,lw,i)}function $O(t,e,n,r,i,s){let o;if(Sc(r,n)!=null)return e;{let a=new Ys(r,e,i),c=e.eventCache.getNode(),l;if(V(n)||k(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Tc(r,lr(e));else{let d=e.serverCache.getNode();g(d instanceof M,"serverChildren would be complete if leaf node"),u=ip(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{let u=k(n),d=sp(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,ne(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,M.EMPTY_NODE,ne(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Tc(r,lr(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Sc(r,z())!=null,$s(e,l,o,t.filter.filtersNodes())}}var jf=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new qs(r.getIndex()),s=pO(r);this.processor_=kO(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(M.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(M.EMPTY_NODE,a.getNode(),null),u=new Nt(c,o.isFullyInitialized(),i.filtersNodes()),d=new Nt(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Vc(d,u),this.eventGenerator_=new xf(this.query_)}get query(){return this.query_}};function HO(t){return t.viewCache_.serverCache.getNode()}function WO(t){return bc(t.viewCache_)}function zO(t,e){let n=lr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!V(e)&&!n.getImmediateChild(k(e)).isEmpty())?n.getChild(e):null}function vI(t){return t.eventRegistrations_.length===0}function GO(t,e){t.eventRegistrations_.push(e)}function yI(t,e,n){let r=[];if(n){g(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function _I(t,e,n,r){e.type===Mt.MERGE&&e.source.queryId!==null&&(g(lr(t.viewCache_),"We should always have a full cache before handling merges"),g(bc(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=LO(t.processor_,i,e,n,r);return FO(t.processor_,s.viewCache),g(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,dw(t,s.changes,s.viewCache.eventCache.getNode(),null)}function qO(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ae,(s,o)=>{r.push(fi(s,o))}),n.isFullyInitialized()&&r.push(ew(n.getNode())),dw(t,r,n.getNode(),e)}function dw(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return yO(t.eventGenerator_,e,n,i)}var Mc,Nc=class{constructor(){this.views=new Map}};function YO(t){g(!Mc,"__referenceConstructor has already been defined"),Mc=t}function KO(){return g(Mc,"Reference.ts has not been loaded"),Mc}function QO(t){return t.views.size===0}function op(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return g(s!=null,"SyncTree gave us an op for an invalid query."),_I(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(_I(o,e,n,r));return s}}function hw(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Tc(n,i?r:null),c=!1;a?c=!0:r instanceof M?(a=ip(n,r),c=!1):(a=M.EMPTY_NODE,c=!1);let l=Vc(new Nt(a,c,!1),new Nt(r,i,!1));return new jf(e,l)}return o}function ZO(t,e,n,r,i,s){let o=hw(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),GO(o,n),qO(o,n)}function JO(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=In(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(yI(l,n,r)),vI(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(yI(c,n,r)),vI(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!In(t)&&s.push(new(KO())(e._repo,e._path)),{removed:s,events:o}}function fw(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function yn(t,e){let n=null;for(let r of t.views.values())n=n||zO(r,e);return n}function pw(t,e){if(e._queryParams.loadsAllData())return Uc(t);{let r=e._queryIdentifier;return t.views.get(r)}}function gw(t,e){return pw(t,e)!=null}function In(t){return Uc(t)!=null}function Uc(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Rc;function XO(t){g(!Rc,"__referenceConstructor has already been defined"),Rc=t}function eP(){return g(Rc,"Reference.ts has not been loaded"),Rc}var tP=1,xc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pe(null),this.pendingWriteTree_=OO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function mw(t,e,n,r,i){return EO(t.pendingWriteTree_,e,n,r,i),i?no(t,new pi(nw(),e,n)):[]}function or(t,e,n=!1){let r=CO(t.pendingWriteTree_,e);if(DO(t.pendingWriteTree_,e)){let s=new Pe(null);return r.snap!=null?s=s.set(z(),!0):Oe(r.children,o=>{s=s.set(new Q(o),!0)}),no(t,new Rf(r.path,s,n))}else return[]}function to(t,e,n){return no(t,new pi(np(),e,n))}function nP(t,e,n){let r=Pe.fromObject(n);return no(t,new Dc(np(),e,r))}function rP(t,e){return no(t,new Cc(np(),e))}function iP(t,e,n){let r=cp(t,n);if(r){let i=lp(r),s=i.path,o=i.queryId,a=Ae(s,e),c=new Cc(rp(o),a);return up(t,s,c)}else return[]}function Oc(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||gw(o,e))){let c=JO(o,e,n,r);QO(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>In(f));if(u&&!d){let h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=aP(h);for(let p=0;p<f.length;++p){let v=f[p],T=v.query,R=Iw(t,v);t.listenProvider_.startListening(Ws(T),Ks(t,T),R.hashFn,R.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Ws(e),null):l.forEach(h=>{let f=t.queryToTagMap.get(Bc(h));t.listenProvider_.stopListening(Ws(h),f)}))}cP(t,l)}return a}function vw(t,e,n,r){let i=cp(t,r);if(i!=null){let s=lp(i),o=s.path,a=s.queryId,c=Ae(o,e),l=new pi(rp(a),c,n);return up(t,o,l)}else return[]}function sP(t,e,n,r){let i=cp(t,r);if(i){let s=lp(i),o=s.path,a=s.queryId,c=Ae(o,e),l=Pe.fromObject(n),u=new Dc(rp(a),c,l);return up(t,o,u)}else return[]}function Uf(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{let p=Ae(h,i);s=s||yn(f,p),o=o||In(f)});let a=t.syncPointTree_.get(i);a?(o=o||In(a),s=s||yn(a,z())):(a=new Nc,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=M.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,p)=>{let v=yn(p,z());v&&(s=s.updateImmediateChild(f,v))}));let l=gw(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=Bc(e);g(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=lP();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}let u=jc(t.pendingWriteTree_,i),d=ZO(a,e,n,u,s,c);if(!l&&!o&&!r){let h=pw(a,e);d=d.concat(uP(t,e,h))}return d}function ap(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Ae(o,e),l=yn(a,c);if(l)return l});return ow(i,e,s,n,!0)}function oP(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Ae(l,n);r=r||yn(u,d)});let i=t.syncPointTree_.get(n);i?r=r||yn(i,z()):(i=new Nc,t.syncPointTree_=t.syncPointTree_.set(n,i));let s=r!=null,o=s?new Nt(r,!0,!1):null,a=jc(t.pendingWriteTree_,e._path),c=hw(i,e,a,s?o.getNode():M.EMPTY_NODE,s);return WO(c)}function no(t,e){return yw(e,t.syncPointTree_,null,jc(t.pendingWriteTree_,z()))}function yw(t,e,n,r){if(V(t.path))return _w(t,e,n,r);{let i=e.get(z());n==null&&i!=null&&(n=yn(i,z()));let s=[],o=k(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,u=aw(r,o);s=s.concat(yw(a,c,l,u))}return i&&(s=s.concat(op(i,t,r,n))),s}}function _w(t,e,n,r){let i=e.get(z());n==null&&i!=null&&(n=yn(i,z()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=aw(r,o),u=t.operationForChild(o);u&&(s=s.concat(_w(u,a,c,l)))}),i&&(s=s.concat(op(i,t,r,n))),s}function Iw(t,e){let n=e.query,r=Ks(t,n);return{hashFn:()=>(HO(e)||M.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?iP(t,n._path,r):rP(t,n._path);{let s=bx(i,n);return Oc(t,n,null,s)}}}}function Ks(t,e){let n=Bc(e);return t.queryToTagMap.get(n)}function Bc(t){return t._path.toString()+"$"+t._queryIdentifier}function cp(t,e){return t.tagToQueryMap.get(e)}function lp(t){let e=t.indexOf("$");return g(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Q(t.substr(0,e))}}function up(t,e,n){let r=t.syncPointTree_.get(e);g(r,"Missing sync point for query tag that we're tracking");let i=jc(t.pendingWriteTree_,e);return op(r,n,i,null)}function aP(t){return t.fold((e,n,r)=>{if(n&&In(n))return[Uc(n)];{let i=[];return n&&(i=fw(n)),Oe(r,(s,o)=>{i=i.concat(o)}),i}})}function Ws(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(eP())(t._repo,t._path):t}function cP(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Bc(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function lP(){return tP++}function uP(t,e,n){let r=e._path,i=Ks(t,e),s=Iw(t,n),o=t.listenProvider_.startListening(Ws(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)g(!In(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!V(l)&&u&&In(u))return[Uc(u).query];{let h=[];return u&&(h=h.concat(fw(u).map(f=>f.query))),Oe(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(Ws(u),Ks(t,u))}}return o}var Bf=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},$f=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ge(this.path_,e);return new t(this.syncTree_,n)}node(){return ap(this.syncTree_,this.path_)}},dP=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},II=function(t,e,n){if(!t||typeof t!="object")return t;if(g(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return hP(t[".sv"],e,n);if(typeof t[".sv"]=="object")return fP(t[".sv"],e);g(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},hP=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+t)}},fP=function(t,e,n){t.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=e.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},pP=function(t,e,n,r){return dp(e,new $f(n,t),r)},ww=function(t,e,n){return dp(t,new Bf(e),n)};function dp(t,e,n){let r=t.getPriority().val(),i=II(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=II(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new di(a,ve(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new di(i))),o.forEachChild(ae,(a,c)=>{let l=dp(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Qs=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function hp(t,e){let n=e instanceof Q?e:new Q(e),r=t,i=k(n);for(;i!==null;){let s=Zn(r.node.children,i)||{children:{},childCount:0};r=new Qs(i,r,s),n=ne(n),i=k(n)}return r}function yi(t){return t.node.value}function Ew(t,e){t.node.value=e,Hf(t)}function Cw(t){return t.node.childCount>0}function gP(t){return yi(t)===void 0&&!Cw(t)}function $c(t,e){Oe(t.node.children,(n,r)=>{e(new Qs(n,t,r))})}function Dw(t,e,n,r){n&&!r&&e(t),$c(t,i=>{Dw(i,e,!0,r)}),n&&r&&e(t)}function mP(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ro(t){return new Q(t.parent===null?t.name:ro(t.parent)+"/"+t.name)}function Hf(t){t.parent!==null&&vP(t.parent,t.name,t)}function vP(t,e,n){let r=gP(n),i=St(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Hf(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Hf(t))}var yP=/[\[\].#$\/\u0000-\u001F\u007F]/,_P=/[\[\].#$\u0000-\u001F\u007F]/,ef=10*1024*1024,bw=function(t){return typeof t=="string"&&t.length!==0&&!yP.test(t)},Tw=function(t){return typeof t=="string"&&t.length!==0&&!_P.test(t)},IP=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Tw(t)};var Sw=function(t,e,n,r){r&&e===void 0||fp(Ka(t,"value"),e,n)},fp=function(t,e,n){let r=n instanceof Q?new gf(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ir(r));if(typeof e=="function")throw new Error(t+"contains a function "+ir(r)+" with contents = "+e.toString());if(AI(e))throw new Error(t+"contains "+e.toString()+" "+ir(r));if(typeof e=="string"&&e.length>ef/3&&ws(e)>ef)throw new Error(t+"contains a string greater than "+ef+" utf8 bytes "+ir(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Oe(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!bw(o)))throw new Error(t+" contains an invalid key ("+o+") "+ir(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);eO(r,o),fp(t,a,r),tO(r)}),i&&s)throw new Error(t+' contains ".value" child '+ir(r)+" in addition to actual children.")}};var Aw=function(t,e,n,r){if(!(r&&n===void 0)&&!Tw(n))throw new Error(Ka(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},wP=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Aw(t,e,n,r)},Mw=function(t,e){if(k(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},EP=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!bw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!IP(n))throw new Error(Ka(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Wf=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function pp(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!Xf(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Nw(t,e,n){pp(t,n),Rw(t,r=>Xf(r,e))}function Rt(t,e,n){pp(t,n),Rw(t,r=>ft(r,e)||ft(e,r))}function Rw(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(CP(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function CP(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();ar&&Ce("event: "+n.toString()),vi(r)}}}var DP="repo_interrupt",bP=25,zf=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ec(),this.transactionQueueTree_=new Qs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function TP(t,e,n){if(t.stats_=Jf(t.repoInfo_),t.forceRestClient_||Mx())t.server_=new Tf(t.repoInfo_,(r,i,s,o)=>{wI(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>EI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{de(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ep(t.repoInfo_,e,(r,i,s,o)=>{wI(t,r,i,s,o)},r=>{EI(t,r)},r=>{SP(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Rx(t.repoInfo_,()=>new Nf(t.stats_,t.server_)),t.infoData_=new Sf,t.infoSyncTree_=new xc({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=to(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),mp(t,"connected",!1),t.serverSyncTree_=new xc({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Rt(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function xw(t){let n=t.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function gp(t){return dP({timestamp:xw(t)})}function wI(t,e,n,r,i){t.dataUpdateCount++;let s=new Q(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=ys(n,l=>ve(l));o=sP(t.serverSyncTree_,s,c,i)}else{let c=ve(n);o=vw(t.serverSyncTree_,s,c,i)}else if(r){let c=ys(n,l=>ve(l));o=nP(t.serverSyncTree_,s,c)}else{let c=ve(n);o=to(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Wc(t,s)),Rt(t.eventQueue_,a,o)}function EI(t,e){mp(t,"connected",e),e===!1&&NP(t)}function SP(t,e){Oe(e,(n,r)=>{mp(t,n,r)})}function mp(t,e,n){let r=new Q("/.info/"+e),i=ve(n);t.infoData_.updateSnapshot(r,i);let s=to(t.infoSyncTree_,r,i);Rt(t.eventQueue_,r,s)}function Ow(t){return t.nextWriteId_++}function AP(t,e,n){let r=oP(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let s=ve(i).withIndex(e._queryParams.getIndex());Uf(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=to(t.serverSyncTree_,e._path,s);else{let a=Ks(t.serverSyncTree_,e);o=vw(t.serverSyncTree_,e._path,s,a)}return Rt(t.eventQueue_,e._path,o),Oc(t.serverSyncTree_,e,n,null,!0),s},i=>(Hc(t,"get for query "+de(e)+" failed: "+i),Promise.reject(new Error(i))))}function MP(t,e,n,r,i){Hc(t,"set",{path:e.toString(),value:n,priority:r});let s=gp(t),o=ve(n,r),a=ap(t.serverSyncTree_,e),c=ww(o,a,s),l=Ow(t),u=mw(t.serverSyncTree_,e,c,l,!0);pp(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{let p=h==="ok";p||xe("set at "+e+" failed: "+h);let v=or(t.serverSyncTree_,l,!p);Rt(t.eventQueue_,e,v),OP(t,i,h,f)});let d=Vw(t,e);Wc(t,d),Rt(t.eventQueue_,d,[])}function NP(t){Hc(t,"onDisconnectEvents");let e=gp(t),n=Ec();Af(t.onDisconnect_,z(),(i,s)=>{let o=pP(i,s,t.serverSyncTree_,e);tw(n,i,o)});let r=[];Af(n,z(),(i,s)=>{r=r.concat(to(t.serverSyncTree_,i,s));let o=Vw(t,i);Wc(t,o)}),t.onDisconnect_=Ec(),Rt(t.eventQueue_,z(),r)}function RP(t,e,n){let r;k(e._path)===".info"?r=Uf(t.infoSyncTree_,e,n):r=Uf(t.serverSyncTree_,e,n),Nw(t.eventQueue_,e._path,r)}function CI(t,e,n){let r;k(e._path)===".info"?r=Oc(t.infoSyncTree_,e,n):r=Oc(t.serverSyncTree_,e,n),Nw(t.eventQueue_,e._path,r)}function xP(t){t.persistentConnection_&&t.persistentConnection_.interrupt(DP)}function Hc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ce(n,...e)}function OP(t,e,n,r){e&&vi(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function Pw(t,e,n){return ap(t.serverSyncTree_,e,n)||M.EMPTY_NODE}function vp(t,e=t.transactionQueueTree_){if(e||zc(t,e),yi(e)){let n=Fw(t,e);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&PP(t,ro(e),n)}else Cw(e)&&$c(e,n=>{vp(t,n)})}function PP(t,e,n){let r=n.map(l=>l.currentWriteId),i=Pw(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let u=n[l];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ae(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Hc(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(or(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();zc(t,hp(t.transactionQueueTree_,e)),vp(t,t.transactionQueueTree_),Rt(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)vi(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{xe("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Wc(t,e)}},o)}function Wc(t,e){let n=kw(t,e),r=ro(n),i=Fw(t,n);return kP(t,i,r),r}function kP(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Ae(n,c.path),u=!1,d;if(g(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(or(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=bP)u=!0,d="maxretry",i=i.concat(or(t.serverSyncTree_,c.currentWriteId,!0));else{let h=Pw(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){fp("transaction failed: Data returned ",f,c.path);let p=ve(f);typeof f=="object"&&f!=null&&St(f,".priority")||(p=p.updatePriority(h.getPriority()));let T=c.currentWriteId,R=gp(t),ye=ww(p,h,R);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=ye,c.currentWriteId=Ow(t),o.splice(o.indexOf(T),1),i=i.concat(mw(t.serverSyncTree_,c.path,ye,c.currentWriteId,c.applyLocally)),i=i.concat(or(t.serverSyncTree_,T,!0))}else u=!0,d="nodata",i=i.concat(or(t.serverSyncTree_,c.currentWriteId,!0))}Rt(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}zc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)vi(r[a]);vp(t,t.transactionQueueTree_)}function kw(t,e){let n,r=t.transactionQueueTree_;for(n=k(e);n!==null&&yi(r)===void 0;)r=hp(r,n),e=ne(e),n=k(e);return r}function Fw(t,e){let n=[];return Lw(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Lw(t,e,n){let r=yi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);$c(e,i=>{Lw(t,i,n)})}function zc(t,e){let n=yi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Ew(e,n.length>0?n:void 0)}$c(e,r=>{zc(t,r)})}function Vw(t,e){let n=ro(kw(t,e)),r=hp(t.transactionQueueTree_,e);return mP(r,i=>{tf(t,i)}),tf(t,r),Dw(r,i=>{tf(t,i)}),n}function tf(t,e){let n=yi(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(g(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(g(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(or(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Ew(e,void 0):n.length=s+1,Rt(t.eventQueue_,ro(e),i);for(let o=0;o<r.length;o++)vi(r[o])}}function FP(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function LP(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xe(`Invalid query segment '${n}' in query '${t}'`)}return e}var DI=function(t,e){let n=VP(t),r=n.namespace;n.domain==="firebase.com"&&Gt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Gt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Ix();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new pc(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Q(n.pathString)}},VP=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=FP(t.substring(u,d)));let h=LP(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var bI="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",jP=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=bI.charAt(n%64),n=Math.floor(n/64);g(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=bI.charAt(e[i]);return g(o.length===20,"nextPushId: Length should be 20."),o}}();var Pc=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+de(this.snapshot.exportVal())}},kc=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Fc=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Gf=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return V(this._path)?null:GI(this._path)}get ref(){return new xt(this._repo,this._path)}get _queryIdentifier(){let e=lI(this._queryParams),n=Zf(e);return n==="{}"?"default":n}get _queryObject(){return lI(this._queryParams)}isEqual(e){if(e=Be(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Xf(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Xx(this._path)}};var xt=class t extends Gf{constructor(e,n){super(e,n,new bf,!1)}get parent(){let e=YI(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Zs=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new Q(e),r=wn(this.ref,e);return new t(this._node.getChild(n),r,ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,wn(this.ref,r),ae)))}hasChild(e){let n=new Q(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function jw(t,e){return t=Be(t),t._checkNotDeleted("ref"),e!==void 0?wn(t._root,e):t._root}function wn(t,e){return t=Be(t),k(t._path)===null?wP("child","path",e,!1):Aw("child","path",e,!1),new xt(t._repo,ge(t._path,e))}function Uw(t,e){t=Be(t),Mw("push",t._path),Sw("push",e,t._path,!0);let n=xw(t._repo),r=jP(n),i=wn(t,r),s=wn(t,r),o;return e!=null?o=yp(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function yp(t,e){t=Be(t),Mw("set",t._path),Sw("set",e,t._path,!1);let n=new hn;return MP(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Bw(t){t=Be(t);let e=new Fc(()=>{}),n=new Lc(e);return AP(t._repo,t,n).then(r=>new Zs(r,new xt(t._repo,t._path),t._queryParams.getIndex()))}var Lc=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Pc("value",this,new Zs(e.snapshotNode,new xt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new kc(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},qf=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new kc(this,e,n):null}createEvent(e,n){g(e.childName!=null,"Child events should have a childName.");let r=wn(new xt(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Pc(e.type,this,new Zs(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function UP(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{CI(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new Fc(n,s||void 0),a=e==="value"?new Lc(o):new qf(e,o);return RP(t._repo,t,a),()=>CI(t._repo,t,a)}function $w(t,e,n,r){return UP(t,"value",e,n,r)}YO(xt);XO(xt);var BP="FIREBASE_DATABASE_EMULATOR_HOST",Yf={},$P=!1;function HP(t,e,n,r){t.repoInfo_=new pc(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function WP(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Gt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ce("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=DI(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[BP]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=DI(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new Bs(Bs.OWNER):new cf(t.name,t.options,e);EP("Invalid Firebase Database URL",o),V(o.path)||Gt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=GP(a,t,u,new af(t.name,n));return new Kf(d,t)}function zP(t,e){let n=Yf[e];(!n||n[t.key]!==t)&&Gt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),xP(t),delete n[t.key]}function GP(t,e,n,r){let i=Yf[e.name];i||(i={},Yf[e.name]=i);let s=i[t.toURLString()];return s&&Gt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new zf(t,$P,n,r),i[t.toURLString()]=s,s}var Kf=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(TP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xt(this._repo,z())),this._rootInternal}_delete(){return this._rootInternal!==null&&(zP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Gt("Cannot call "+e+" on a deleted database.")}};function Hw(t=bs(),e){let n=Nh(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=t_("database");r&&Ww(n,...r)}return n}function Ww(t,e,n,r={}){t=Be(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Gt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Bs(Bs.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:r_(r.mockUserToken,t.app.options.projectId);s=new Bs(o)}HP(i,e,n,s)}function qP(t){vx(ni),gn(new Je("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return WP(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),me(G_,q_,t),me(G_,q_,"esm2017")}ep.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ep.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};qP();var dr=class{constructor(e){return e}},zw="database",_p=class{constructor(){return Ss(zw)}};var Ip=new C("angularfire2.database-instances");function YP(t,e){let n=Oh(zw,t,e);return n&&new dr(n)}function KP(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new dr(r)}}var QP={provide:_p,deps:[[new wt,Ip]]},ZP={provide:dr,useFactory:YP,deps:[[new wt,Ip],tr]};function Gw(t,...e){return me("angularfire",ii.full,"rtdb"),nn([ZP,QP,{provide:Ip,useFactory:KP(t),multi:!0,deps:[J,Et,As,Ms,[new wt,dc],[new wt,Ts],...e]}])}var qw=dt(wn,!0);var Yw=dt(Bw,!0),Kw=dt(Hw,!0);var Qw=dt($w,!0);var Zw=dt(Uw,!0);var Gc=dt(jw,!0);var Jw=dt(yp,!0);var ie;(function(t){let e;(function(s){s[s.TeamA=0]="TeamA",s[s.TeamB=1]="TeamB"})(e=t.TeamType||(t.TeamType={}));class n{constructor(o,a,c,l){this.x=0,this.y=0,this.name=o,this.force=l,this.userId=a,this.team=c}}t.Player=n;class r{constructor(o,a,c,l,u,d){this.ANoPlayers=c,this.BNoPlayers=l,this.AName=o,this.BName=a,this.ALogo=u,this.BLogo=d}}t.TeamManager=r;class i{constructor(o,a,c,l,u){this.players=[],this.name=o,this.active=!1,this.teams=a,this.startTime=c,this.endTime=l,this.minPlayers=u,this.players_subj=new X,this.players$=this.players_subj.asObservable()}addPlayer(o){let a=!1;this.players.forEach(c=>{c.userId==o.userId&&(c.force=o.force,a=!0)}),this.players_subj.next(o),!a&&(this.players.push(o),o.team==e.TeamA?this.teams.ANoPlayers++:this.teams.BNoPlayers++,this.checkActive())}checkActive(){if(this.teams.ANoPlayers>=this.minPlayers&&this.teams.BNoPlayers>=this.minPlayers){let o=new Date().getTime();console.log("Todo"),this.active=!0}}}t.Competition=i})(ie||(ie={}));var En=(()=>{let e=class e{constructor(r,i){this.db=r,this.ngZone=i,this.competition=null,this.startTime=0,this.playerListRef=null,this.newPlayerPostRef=null,this.competition_subj=new X,this.competition$=this.competition_subj.asObservable(),this.formattedTime=new X,this.formattedTime$=this.formattedTime.asObservable(),this.userJoin=new X,this.userJoin$=this.userJoin.asObservable(),this.currentUser=new ie.Player("","",ie.TeamType.TeamA,0)}loadLocalUser(){this.playerListRef=Gc(this.db,"players"),this.newPlayerPostRef=Zw(this.playerListRef);let r=localStorage.getItem("user");if(r!=null){let i=JSON.parse(r);this.currentUser.name=i.name,this.currentUser.team=i.team==0?ie.TeamType.TeamA:ie.TeamType.TeamB,this.currentUser.userId=i.userId,this.userJoin.next(!0)}}saveLocalUser(r){let i=JSON.stringify(r);localStorage.setItem("user",i)}clearLocalUser(){localStorage.removeItem("user"),this.userJoin.next(!1)}getPlayers(){let r=Gc(this.db,"players");console.log("load players"),Qw(r,i=>{let s=i.val();this.parsePlayers(s)})}parsePlayers(r){r!=null&&Object.values(r).forEach(i=>{let s=i.name,o=i.userId,a=i.force,c=i.team==0?ie.TeamType.TeamA:ie.TeamType.TeamB,l=new ie.Player(s,o,c,a);this.competition?.addPlayer(l)})}createNewPlayer(r){this.currentUser.name=r.name,this.currentUser.userId=r.userId,this.currentUser.team=r.team===this.competition?.teams.AName?ie.TeamType.TeamA:ie.TeamType.TeamB,this.updatePlayer(r.force),this.userJoin.next(!0),this.saveLocalUser(r)}updatePlayer(r){this.currentUser.force=r+1,this.newPlayerPostRef!=null&&Jw(this.newPlayerPostRef,this.currentUser).then(i=>{})}getCompetition(){let r=Gc(this.db);Yw(qw(r,"competition")).then(i=>{i.exists()?this.parseCompetition(i.val()):console.log("No data available")}).catch(i=>{console.error(i)})}parseCompetition(r){let i=r.name,s=r.players.A,o=r.players.B,a=r.teams.A,c=r.teams.B;this.startTime=r.time.start;let l=r.time.end,u=r.min_players,d=r.logo_a_url,h=r.logo_b_url,f=new ie.TeamManager(a,c,s,o,d,h);this.competition=new ie.Competition(i,f,this.startTime,l,u);let p=new Date().getTime();this.competition_subj.next(this.competition),this.handleTimer()}formatTime(r){let i=r%60,s=String(i).padStart(2,"0"),o=Math.floor(r/60)%60,a=String(o).padStart(2,"0");return`${Math.floor(r/3600)}:${a}:${s}`}handleTimer(){let r=new Date().getTime(),i=Math.floor((this.startTime-r)/1e3);if(i>0){let s=this.formatTime(i);this.formattedTime.next(s),setTimeout(()=>{this.handleTimer()},1e3)}else this.formattedTime.next("Over")}};e.\u0275fac=function(i){return new(i||e)(O(dr),O(J))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Xw=(()=>{let e=class e{constructor(r){this.comp=r,this.count=""}ngOnInit(){this.comp.formattedTime$.subscribe(r=>{this.count=r})}};e.\u0275fac=function(i){return new(i||e)(x(En))},e.\u0275cmp=qe({type:e,selectors:[["app-count-down"]],standalone:!0,features:[Ke],decls:3,vars:1,consts:[[1,"button","count-down","column"],[1,"count-down-text"]],template:function(i,s){i&1&&(D(0,"div",0)(1,"div",1),W(2),b()()),i&2&&(te(2),pe(s.count))},styles:[".count-down[_ngcontent-%COMP%]{width:128px;height:128px;border-radius:50%;border-width:2px;color:#fff}.count-down-text[_ngcontent-%COMP%]{align-self:center}"]});let t=e;return t})();var aE=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(x(on),x(Ht))},e.\u0275dir=Re({type:e});let t=e;return t})(),bp=(()=>{let e=class e extends aE{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275dir=Re({type:e,features:[an]});let t=e;return t})(),Zc=new C("");var XP={provide:Zc,useExisting:Ln(()=>Jc),multi:!0};function ek(){let t=Wt()?Wt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var tk=new C(""),Jc=(()=>{let e=class e extends aE{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!ek())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(x(on),x(Ht),x(tk,8))},e.\u0275dir=Re({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Le("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Wi([XP]),an]});let t=e;return t})();var nk=new C(""),rk=new C("");function cE(t){return t!=null}function lE(t){return Wn(t)?le(t):t}function uE(t){let e={};return t.forEach(n=>{e=n!=null?y(y({},e),n):e}),Object.keys(e).length===0?null:e}function dE(t,e){return e.map(n=>n(t))}function ik(t){return!t.validate}function hE(t){return t.map(e=>ik(e)?e:n=>e.validate(n))}function sk(t){if(!t)return null;let e=t.filter(cE);return e.length==0?null:function(n){return uE(dE(n,e))}}function fE(t){return t!=null?sk(hE(t)):null}function ok(t){if(!t)return null;let e=t.filter(cE);return e.length==0?null:function(n){let r=dE(n,e).map(lE);return Dl(r).pipe(U(uE))}}function pE(t){return t!=null?ok(hE(t)):null}function eE(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function gE(t){return t._rawValidators}function mE(t){return t._rawAsyncValidators}function wp(t){return t?Array.isArray(t)?t:[t]:[]}function Kc(t,e){return Array.isArray(t)?t.includes(e):t===e}function tE(t,e){let n=wp(e);return wp(t).forEach(i=>{Kc(n,i)||n.push(i)}),n}function nE(t,e){return wp(e).filter(n=>!Kc(t,n))}var Ep=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}};var oo=class extends Ep{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Cp=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ak={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},jW=Z(y({},ak),{"[class.ng-submitted]":"isSubmitted"}),vE=(()=>{let e=class e extends Cp{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(x(oo,2))},e.\u0275dir=Re({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&ld("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[an]});let t=e;return t})();var io="VALID",Yc="INVALID",_i="PENDING",so="DISABLED";function ck(t){return(Xc(t)?t.validators:t)||null}function lk(t){return Array.isArray(t)?fE(t):t||null}function uk(t,e){return(Xc(e)?e.asyncValidators:t)||null}function dk(t){return Array.isArray(t)?pE(t):t||null}function Xc(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Dp=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===io}get invalid(){return this.status===Yc}get pending(){return this.status==_i}get disabled(){return this.status===so}get enabled(){return this.status!==so}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nE(e,this._rawAsyncValidators))}hasValidator(e){return Kc(this._rawValidators,e)}hasAsyncValidator(e){return Kc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_i,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=so,this.errors=null,this._forEachChild(r=>{r.disable(Z(y({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(y({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=io,this._forEachChild(r=>{r.enable(Z(y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Z(y({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===io||this.status===_i)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?so:io}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_i,this._hasOwnPendingAsyncValidator=!0;let n=lE(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?so:this.errors?Yc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_i)?_i:this._anyControlsHaveStatus(Yc)?Yc:io}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=lk(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=dk(this._rawAsyncValidators)}};var yE=new C("CallSetDisabledState",{providedIn:"root",factory:()=>Tp}),Tp="always";function hk(t,e,n=Tp){pk(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),mk(t,e),yk(t,e),vk(t,e),fk(t,e)}function rE(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),gk(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Qc(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function fk(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function pk(t,e){let n=gE(t);e.validator!==null?t.setValidators(eE(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=mE(t);e.asyncValidator!==null?t.setAsyncValidators(eE(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Qc(e._rawValidators,i),Qc(e._rawAsyncValidators,i)}function gk(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=gE(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=mE(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return Qc(e._rawValidators,r),Qc(e._rawAsyncValidators,r),n}function mk(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&_E(t,e)})}function vk(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&_E(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function _E(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function yk(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function _k(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Ik(t){return Object.getPrototypeOf(t.constructor)===bp}function wk(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Jc?n=s:Ik(s)?r=s:i=s}),i||r||n||null}function iE(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sE(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Sp=class extends Dp{constructor(e=null,n,r){super(ck(n),uk(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xc(n)&&(n.nonNullable||n.initialValueIsDefault)&&(sE(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var IE=new C(""),Ek={provide:oo,useExisting:Ln(()=>Ap)},Ap=(()=>{let e=class e extends oo{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=a,this.update=new Te,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=wk(this,s)}ngOnChanges(r){if(this._isControlChanged(r)){let i=r.form.previousValue;i&&rE(i,this,!1),hk(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}_k(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&rE(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(x(nk,10),x(rk,10),x(Zc,10),x(IE,8),x(yE,8))},e.\u0275dir=Re({type:e,selectors:[["","formControl",""]],inputs:{form:[ze.None,"formControl","form"],isDisabled:[ze.None,"disabled","isDisabled"],model:[ze.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Wi([Ek]),an,Ur]});let t=e;return t})();var Ck={provide:Zc,useExisting:Ln(()=>el),multi:!0};function wE(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Dk(t){return t.split(":")[0]}var el=(()=>{let e=class e extends bp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=wE(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=Dk(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275dir=Re({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&Le("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wi([Ck]),an]});let t=e;return t})(),EE=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(wE(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(x(Ht),x(on),x(el,9))},e.\u0275dir=Re({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),bk={provide:Zc,useExisting:Ln(()=>CE),multi:!0};function oE(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Tk(t){return t.split(":")[0]}var CE=(()=>{let e=class e extends bp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);s.push(u)}}else{let a=i.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);s.push(u)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=Tk(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275dir=Re({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&Le("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Wi([bk]),an]});let t=e;return t})(),DE=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(oE(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(oE(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(x(Ht),x(on),x(CE,9))},e.\u0275dir=Re({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var Sk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=jn({type:e}),e.\u0275inj=Vn({});let t=e;return t})();var bE=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:IE,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:yE,useValue:r.callSetDisabledState??Tp}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=jn({type:e}),e.\u0275inj=Vn({imports:[Sk]});let t=e;return t})();var tl=(()=>{let e=class e{constructor(){this.players=[],this.WIDTH=480,this.HEIGTH=180,this.PLAYER_FORCE=50,this.gameOver=!1,this.running=!1,this.gameState=new X,this.gameState$=this.gameState.asObservable(),this.overState=new X,this.overState$=this.overState.asObservable()}init(r){r.competition!=null&&(this.initGame(r.competition),this.gameLoop(),console.log("running game loop"))}initGame(r){r.players.forEach(i=>{i.force=0,this.processPlayer(i)}),r.players$.subscribe(i=>{this.processPlayer(i)})}processPlayer(r){let i=!1;if(this.players.forEach(s=>{s.userId==r.userId&&(s.force=r.force,i=!0)}),!i){let s=16,o=this.players.length*s+120,a=r.team==ie.TeamType.TeamA?-1:1,c=this.WIDTH/2+a*o,l=Math.floor(Math.random()*3)-1,u=this.HEIGTH/2+l*s,d=new ie.Player(r.name,r.userId,r.team,r.force);d.x=c,d.y=u,this.players.push(d)}}gameLoop(){if(!this.running)return;let r=1e3/(1*30),i=1/r,s=0,o=0;this.players.forEach(u=>{u.force>0&&(u.force=u.force-u.force*i),u.team==ie.TeamType.TeamA?s+=u.force:o+=u.force});let a=this.players.length,c=0;a>0&&(c=(o-s)/a);let l=-1;if(this.players.forEach(u=>{u.x+=c/100,u.team==ie.TeamType.TeamA?u.x>this.WIDTH/2&&(this.gameOver=!0,l=ie.TeamType.TeamB):u.x<this.WIDTH/2&&(this.gameOver=!0,l=ie.TeamType.TeamA)}),this.gameState.next(this.players),this.gameOver){this.overState.next(l);return}setTimeout(()=>{this.gameLoop()},r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var nl=(()=>{let e=class e{constructor(){this.myMessage=new X,this.myTitle=new X,this.myMessage$=this.myMessage.asObservable(),this.myTitle$=this.myTitle.asObservable()}show(r,i){console.log(r,i),this.myTitle.next(r),this.myMessage.next(i),document.getElementById("dialog-notify").showModal()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Mk(t,e){t&1&&oe(0,"div")}function Nk(t,e){t&1&&oe(0,"div")}function Rk(t,e){if(t&1){let n=ud();D(0,"div",11)(1,"div",12),oe(2,"input",13),D(3,"select",14)(4,"option"),W(5),b(),D(6,"option"),W(7),b()()(),D(8,"div",15),Le("click",function(){Vu(n);let i=$i(2);return ju(i.join())}),W(9,"Join"),b()()}if(t&2){let n=$i(2);te(2),$r("formControl",n.inputName),te(),$r("formControl",n.inputTeam),te(2),pe(n.comp==null||n.comp.teams==null?null:n.comp.teams.AName),te(2),pe(n.comp==null||n.comp.teams==null?null:n.comp.teams.BName)}}function xk(t,e){if(t&1){let n=ud();D(0,"div"),W(1,"\xA0"),b(),D(2,"div",15),Le("click",function(){Vu(n);let i=$i(2);return ju(i.go())}),W(3,"Play"),b()}}function Ok(t,e){if(t&1&&(D(0,"div",5)(1,"div",6),W(2),b(),D(3,"div"),W(4,"\xA0"),b(),D(5,"div",7)(6,"div",8)(7,"div"),oe(8,"img",9),b(),D(9,"div",10)(10,"div"),W(11),b(),D(12,"div"),W(13),b()()(),D(14,"div"),W(15,"\xA0"),b(),D(16,"div"),W(17,"\xA0"),b(),D(18,"div",8)(19,"div"),oe(20,"img",9),b(),D(21,"div",10)(22,"div"),W(23),b(),D(24,"div"),W(25),b()()()(),oe(26,"app-count-down"),wa(27,Nk,1,0,"div",4)(28,Rk,10,4,"ng-template",null,2,zi)(30,xk,4,0,"ng-template",null,3,zi),b()),t&2){let n=Hi(29),r=Hi(31),i=$i();te(2),pe(i.comp==null?null:i.comp.name),te(6),cn("src",i.comp==null||i.comp.teams==null?null:i.comp.teams.ALogo,$n),te(3),pe(i.comp==null||i.comp.teams==null?null:i.comp.teams.AName),te(2),pe(i.comp==null||i.comp.teams==null?null:i.comp.teams.ANoPlayers),te(7),cn("src",i.comp==null||i.comp.teams==null?null:i.comp.teams.BLogo,$n),te(3),pe(i.comp==null||i.comp.teams==null?null:i.comp.teams.BName),te(2),pe(i.comp==null||i.comp.teams==null?null:i.comp.teams.BNoPlayers),te(2),$r("ngIf",i.hasJoin)("ngIfThen",r)("ngIfElse",n)}}function Pk(t,e){t&1&&(D(0,"div",16)(1,"div",17)(2,"div",18),W(3,"Rubiks"),b(),D(4,"div"),oe(5,"img",19),b(),D(6,"div"),W(7,"\xA0"),b(),D(8,"div",20),W(9," No active competition. Please try again later. "),b()()())}var Mp=(()=>{let e=class e{constructor(r,i,s,o){this.db=r,this.physics=i,this.notify=s,this.route=o,this.comp=null,this.hasJoin=!1,this.inputName=new Sp,this.inputTeam=new Sp}ngOnInit(){this.db.competition$.subscribe(r=>{this.comp=r,this.db.loadLocalUser(),this.db.getPlayers()}),this.db.userJoin$.subscribe(r=>{this.hasJoin=r}),this.physics.running=!1,this.db.getCompetition()}generateUserId(r){let i=[];for(let s=0;s<r;s++){let o=Math.floor(Math.random()*10);i.push(String(o))}return i.join("")}join(){let r=this.inputName.value,i=this.inputTeam.value;if(console.log(i),r&&i){let s={userId:this.generateUserId(10),name:r,force:0,team:i};console.log(s),this.db.createNewPlayer(s)}else this.notify.show("Error","Enter your name and team.")}go(){this.comp?.active?this.route.navigate(["game"]):this.notify.show("Wait","Please wait for other players to join or game to start.")}};e.\u0275fac=function(i){return new(i||e)(x(En),x(tl),x(nl),x(Xr))},e.\u0275cmp=qe({type:e,selectors:[["app-join-component"]],standalone:!0,features:[Ke],decls:5,vars:3,consts:[["thenBlock",""],["elseBlock",""],["joinBlock",""],["goBlock",""],[4,"ngIf","ngIfThen","ngIfElse"],[1,"competition","column","container"],[1,"name"],[1,"players","row"],[1,"player","column"],["width","100px","height","100px",3,"src"],[1,"column"],[1,"join","pad"],[1,"row"],["type","text","placeholder","Your name, sir","id","inputName",1,"input-join","input-name",3,"formControl"],[1,"input-join",3,"formControl"],[1,"button",3,"click"],[1,"no-competition","column"],[1,"container","column"],[1,"rubiks"],["src","assets/playon.svg","width","300","height","100"],[1,"small-text"]],template:function(i,s){if(i&1&&wa(0,Mk,1,0,"div",4)(1,Ok,32,10,"ng-template",null,0,zi)(3,Pk,10,0,"ng-template",null,1,zi),i&2){let o=Hi(2),a=Hi(4);$r("ngIf",s.comp)("ngIfThen",o)("ngIfElse",a)}},dependencies:[Yi,iy,Xw,bE,EE,DE,Jc,el,vE,Ap],styles:[".no-competition[_ngcontent-%COMP%]{width:100%;height:100%}.input-join[_ngcontent-%COMP%]{height:30px;padding-block:0px;padding-inline:0px;border-style:none}.input-name[_ngcontent-%COMP%]{border-right:2px;border-style:solid}"]});let t=e;return t})();var rl=class{constructor(e,n){this.state=[],this.width=e,this.height=n,this.canvas=document.getElementById("game-canvas"),this.ctx=this.canvas.getContext("2d"),this.rope=document.getElementById("rope")}drawRope(){this.ctx.drawImage(this.rope,0,this.height/2-23/2)}drawCenter(){this.ctx.fillStyle="black";let e=30;this.ctx.fillRect(this.width/2-e/2,0,e,this.height)}rgbFromName(e){let n=[],r="0123456789ABCDEF";for(let c=0;c<Math.min(e.length,6);c++){let l=e.charCodeAt(c)%16,u=r[l];n.push(u)}if(n.length<6)for(let c=0;c<6-n.length;c++)n.push("00");let i=n.join(""),s=+("0x"+i.slice(0,2)),o=+("0x"+i.slice(2,4)),a=+("0x"+i.slice(4,6));return"rgb("+s+","+o+","+a+")"}smoothStep(e,n,r){return r=this.clamp((r-e)/(n-e)),r*r*(3-2*r)}smoothStep2(e,n,r){var i=Math.max(0,Math.min(1,(r-e)/(n-e)));return i*i*(3-2*i)+e}clamp(e,n=0,r=1){return e<n?n:e>r?r:e}drawPlayer(e){let n=this.rgbFromName(e.name);this.ctx.fillStyle=n;let r=this.smoothStep(0,1,e.force)*10+20;this.ctx.beginPath(),this.ctx.ellipse(e.x,e.y,r,r,0,0,2*Math.PI),this.ctx.fill()}drawPlayers(){this.state.forEach(e=>this.drawPlayer(e))}drawBackground(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.fillStyle="black",this.ctx.fillText("Players:"+this.state.length,5,15)}draw(){this.drawBackground(),this.drawCenter(),this.drawRope(),this.drawPlayers()}update(e){this.state=e}};var AE=(()=>{let e=class e{constructor(r,i,s){this.physics=r,this.route=i,this.db=s,this.gameState=[],this.comp=null,this.gameCanvas=null,this.myTeamLogo="",this.canPull=!1,this.PULL_COOLDOWN=1500}ngOnInit(){if(this.comp=this.db.competition,this.comp==null){this.route.navigate([""]);return}this.myTeamLogo=this.db.currentUser.team==ie.TeamType.TeamA?this.comp?.teams.ALogo:this.comp?.teams.BLogo,this.physics.running=!0,this.physics.init(this.db),console.log("started"),this.gameCanvas=new rl(this.physics.WIDTH,this.physics.HEIGTH),this.physics.gameState$.subscribe(r=>{this.gameState=r,this.update()})}afterGameOver(){this.db.clearLocalUser(),this.route.navigate([""])}update(){this.gameCanvas?.update(this.gameState),this.gameCanvas?.draw()}pull(){if(!this.canPull)return;this.canPull=!1,setTimeout(()=>{this.canPull=!0},this.PULL_COOLDOWN);let r=this.physics.PLAYER_FORCE+Math.random();this.db.updatePlayer(r)}};e.\u0275fac=function(i){return new(i||e)(x(tl),x(Xr),x(En))},e.\u0275cmp=qe({type:e,selectors:[["app-game-component"]],standalone:!0,features:[Ke],decls:33,vars:8,consts:[[1,"competition","column","container"],[1,"name"],[1,"players","row"],[1,"player","column"],["width","100px","height","100px",3,"src"],[1,"column"],[1,"game"],[2,"display","none"],["id","rope","src","assets/rope.png","width","480","height","23"],["id","game-canvas","width","480px","height","180px"],[1,"button",3,"click"],["width","24px","height","24px",3,"src"]],template:function(i,s){i&1&&(D(0,"div",0)(1,"div",1),W(2),b(),D(3,"div"),W(4,"\xA0"),b(),D(5,"div",2)(6,"div",3)(7,"div"),oe(8,"img",4),b(),D(9,"div",5)(10,"div"),W(11),b(),D(12,"div"),W(13),b()()(),D(14,"div"),W(15,"\xA0"),b(),D(16,"div"),W(17,"\xA0"),b(),D(18,"div",3)(19,"div"),oe(20,"img",4),b(),D(21,"div",5)(22,"div"),W(23),b(),D(24,"div"),W(25),b()()()(),D(26,"div",6)(27,"div",7),oe(28,"img",8),b(),oe(29,"canvas",9),b(),D(30,"div",10),Le("click",function(){return s.pull()}),oe(31,"img",11),W(32," Pull "),b()()),i&2&&(te(2),pe(s.comp==null?null:s.comp.name),te(6),cn("src",s.comp==null||s.comp.teams==null?null:s.comp.teams.ALogo,$n),te(3),pe(s.comp==null||s.comp.teams==null?null:s.comp.teams.AName),te(2),pe(s.comp==null||s.comp.teams==null?null:s.comp.teams.ANoPlayers),te(7),cn("src",s.comp==null||s.comp.teams==null?null:s.comp.teams.BLogo,$n),te(3),pe(s.comp==null||s.comp.teams==null?null:s.comp.teams.BName),te(2),pe(s.comp==null||s.comp.teams==null?null:s.comp.teams.BNoPlayers),te(6),cn("src",s.myTeamLogo,$n))},styles:[".game[_ngcontent-%COMP%]{width:100%;height:180px}#game-canvas[_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();var ME=[{path:"join",component:Mp},{path:"game",component:AE},{path:"",component:Mp}];var NE={providers:[Yy(ME),T_(()=>S_({apiKey:"AIzaSyBPDdikqDWMXu2jf2-eo0CP5vgOnH3TSBs",authDomain:"tugofwar-65951.firebaseapp.com",projectId:"tugofwar-65951",storageBucket:"tugofwar-65951.appspot.com",messagingSenderId:"258700330053",appId:"1:258700330053:web:64e5aea33d7a56e0fc0f2c",measurementId:"G-N9EF2MK40E"})),Gw(()=>Kw())]};var RE=(()=>{let e=class e{constructor(r){this.notify=r,this.message="",this.title=""}ngOnInit(){this.notify.myMessage$.subscribe(r=>{this.message=r,console.log(r)}),this.notify.myTitle$.subscribe(r=>{this.title=r})}close(){document.getElementById("dialog-notify").close()}};e.\u0275fac=function(i){return new(i||e)(x(nl))},e.\u0275cmp=qe({type:e,selectors:[["app-notify-component"]],standalone:!0,features:[Ke],decls:12,vars:2,consts:[["id","dialog-notify"],[1,"column"],[1,"row","header",3,"click"],[1,"title"],[1,"close"],["src","assets/close-dialog.png","width","32px","height","32px"],[1,"separator"],[1,"message"]],template:function(i,s){i&1&&(D(0,"dialog",0)(1,"div",1)(2,"div",2),Le("click",function(){return s.close()}),D(3,"div",3),W(4),b(),D(5,"div",4),oe(6,"img",5),b()(),oe(7,"div",6),D(8,"div"),W(9,"\xA0"),b(),D(10,"div",7),W(11),b()()()),i&2&&(te(4),pe(s.title),te(7),Ea(" ",s.message," "))},styles:[".header[_ngcontent-%COMP%]{height:32px;justify-content:space-between;width:100%}.separator[_ngcontent-%COMP%]{height:2px;background-color:#8b0000;width:100%}dialog[_ngcontent-%COMP%]{background-color:brown;color:#fff;font-size:large}"]});let t=e;return t})();var xE=(()=>{let e=class e{constructor(r){this.db=r,this.title="TugOfWar"}};e.\u0275fac=function(i){return new(i||e)(x(En))},e.\u0275cmp=qe({type:e,selectors:[["app-root"]],standalone:!0,features:[Ke],decls:2,vars:0,template:function(i,s){i&1&&oe(0,"app-notify-component")(1,"router-outlet")},dependencies:[Yi,rh,RE]});let t=e;return t})();fy(xE,NE).catch(t=>console.error(t));
