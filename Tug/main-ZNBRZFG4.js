var UE=Object.defineProperty,BE=Object.defineProperties;var $E=Object.getOwnPropertyDescriptors;var jp=Object.getOwnPropertySymbols;var HE=Object.prototype.hasOwnProperty,WE=Object.prototype.propertyIsEnumerable;var Up=(t,e,n)=>e in t?UE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y=(t,e)=>{for(var n in e||={})HE.call(e,n)&&Up(t,n,e[n]);if(jp)for(var n of jp(e))WE.call(e,n)&&Up(t,n,e[n]);return t},X=(t,e)=>BE(t,$E(e));var m=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var Bp=null;var ul=1,$p=Symbol("SIGNAL");function G(t){let e=Bp;return Bp=t,e}var Hp={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zE(t){if(!(fl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ul)){if(!t.producerMustRecompute(t)&&!dl(t)){t.dirty=!1,t.lastCleanEpoch=ul;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ul}}function Wp(t){return t&&(t.nextProducerIndex=0),G(t)}function zp(t,e){if(G(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(fl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)hl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function dl(t){fs(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(zE(n),r!==n.version))return!0}return!1}function Gp(t){if(fs(t),fl(t))for(let e=0;e<t.producerNode.length;e++)hl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function hl(t,e){if(GE(t),fs(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)hl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];fs(i),i.producerIndexOfThis[r]=e}}function fl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function fs(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function GE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function qE(){throw new Error}var YE=qE;function qp(t){YE=t}function A(t){return typeof t=="function"}function fr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ps=fr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function bn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(A(r))try{r()}catch(o){e=o instanceof ps?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Yp(o)}catch(s){e=e??[],s instanceof ps?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ps(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Yp(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&bn(n,e)}remove(e){let{_finalizers:n}=this;n&&bn(n,e),e instanceof t&&e._removeParent(this)}};ae.EMPTY=(()=>{let t=new ae;return t.closed=!0,t})();var pl=ae.EMPTY;function gs(t){return t instanceof ae||t&&"closed"in t&&A(t.remove)&&A(t.add)&&A(t.unsubscribe)}function Yp(t){A(t)?t():t.unsubscribe()}var ot={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pr={setTimeout(t,e,...n){let{delegate:r}=pr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=pr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ms(t){pr.setTimeout(()=>{let{onUnhandledError:e}=ot;if(e)e(t);else throw t})}function Ti(){}var Kp=gl("C",void 0,void 0);function Qp(t){return gl("E",void 0,t)}function Zp(t){return gl("N",t,void 0)}function gl(t,e,n){return{kind:t,value:e,error:n}}var Tn=null;function gr(t){if(ot.useDeprecatedSynchronousErrorHandling){let e=!Tn;if(e&&(Tn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Tn;if(Tn=null,n)throw r}}else t()}function Jp(t){ot.useDeprecatedSynchronousErrorHandling&&Tn&&(Tn.errorThrown=!0,Tn.error=t)}var Sn=class extends ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gs(e)&&e.add(this)):this.destination=ZE}static create(e,n,r){return new mr(e,n,r)}next(e){this.isStopped?vl(Zp(e),this):this._next(e)}error(e){this.isStopped?vl(Qp(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vl(Kp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},KE=Function.prototype.bind;function ml(t,e){return KE.call(t,e)}var yl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){vs(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){vs(r)}else vs(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){vs(n)}}},mr=class extends Sn{constructor(e,n,r){super();let i;if(A(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ot.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ml(e.next,o),error:e.error&&ml(e.error,o),complete:e.complete&&ml(e.complete,o)}):i=e}this.destination=new yl(i)}};function vs(t){ot.useDeprecatedSynchronousErrorHandling?Jp(t):ms(t)}function QE(t){throw t}function vl(t,e){let{onStoppedNotification:n}=ot;n&&pr.setTimeout(()=>n(t,e))}var ZE={closed:!0,next:Ti,error:QE,complete:Ti};var vr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function je(t){return t}function _l(...t){return Il(t)}function Il(t){return t.length===0?je:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var $=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=XE(n)?n:new mr(n,r,i);return gr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Xp(r),new r((i,o)=>{let s=new mr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[vr](){return this}pipe(...n){return Il(n)(this)}toPromise(n){return n=Xp(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Xp(t){var e;return(e=t??ot.Promise)!==null&&e!==void 0?e:Promise}function JE(t){return t&&A(t.next)&&A(t.error)&&A(t.complete)}function XE(t){return t&&t instanceof Sn||JE(t)&&gs(t)}function wl(t){return A(t?.lift)}function H(t){return e=>{if(wl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(t,e,n,r,i){return new El(t,e,n,r,i)}var El=class extends Sn{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function yr(){return H((t,e)=>{let n=null;t._refCount++;let r=j(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var _r=class extends ${constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,wl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ae;let n=this.getSubject();e.add(this.source.subscribe(j(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ae.EMPTY)}return e}refCount(){return yr()(this)}};var eg=fr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Q=(()=>{class t extends ${constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ys(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new eg}next(n){gr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){gr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){gr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?pl:(this.currentObservers=null,o.push(n),new ae(()=>{this.currentObservers=null,bn(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new $;return n.source=this,n}}return t.create=(e,n)=>new ys(e,n),t})(),ys=class extends Q{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:pl}};var Ie=class extends Q{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Cl={now(){return(Cl.delegate||Date).now()},delegate:void 0};var _s=class extends ae{constructor(e,n){super()}schedule(e,n=0){return this}};var Si={setInterval(t,e,...n){let{delegate:r}=Si;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Si;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ir=class extends _s{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Si.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Si.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,bn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var wr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};wr.now=Cl.now;var Er=class extends wr{constructor(e,n=wr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Dl=new Er(Ir);var Is=class extends Ir{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ws=class extends Er{};var bl=new ws(Is);var Ue=new $(t=>t.complete());function tg(t){return t&&A(t.schedule)}function ng(t){return t[t.length-1]}function Es(t){return A(ng(t))?t.pop():void 0}function Zt(t){return tg(ng(t))?t.pop():void 0}function Tl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ig(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function rg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function An(t){return this instanceof An?(this.v=t,this):new An(t)}function og(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(f){return new Promise(function(p,v){o.push([h,f,p,v])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(o[0][3],p)}}function c(h){h.value instanceof An?Promise.resolve(h.value.v).then(l,u):d(o[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function sg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rg=="function"?rg(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Cs=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ds(t){return A(t?.then)}function bs(t){return A(t[vr])}function Ts(t){return Symbol.asyncIterator&&A(t?.[Symbol.asyncIterator])}function Ss(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function eC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var As=eC();function Ms(t){return A(t?.[As])}function Ns(t){return og(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield An(n.read());if(i)return yield An(void 0);yield yield An(r)}}finally{n.releaseLock()}})}function Rs(t){return A(t?.getReader)}function le(t){if(t instanceof $)return t;if(t!=null){if(bs(t))return tC(t);if(Cs(t))return nC(t);if(Ds(t))return rC(t);if(Ts(t))return ag(t);if(Ms(t))return iC(t);if(Rs(t))return oC(t)}throw Ss(t)}function tC(t){return new $(e=>{let n=t[vr]();if(A(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nC(t){return new $(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function rC(t){return new $(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ms)})}function iC(t){return new $(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function ag(t){return new $(e=>{sC(t,e).catch(n=>e.error(n))})}function oC(t){return ag(Ns(t))}function sC(t,e){var n,r,i,o;return ig(this,void 0,void 0,function*(){try{for(n=sg(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function xe(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Jt(t,e=0){return H((n,r)=>{n.subscribe(j(r,i=>xe(r,t,()=>r.next(i),e),()=>xe(r,t,()=>r.complete(),e),i=>xe(r,t,()=>r.error(i),e)))})}function Xt(t,e=0){return H((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function cg(t,e){return le(t).pipe(Xt(e),Jt(e))}function lg(t,e){return le(t).pipe(Xt(e),Jt(e))}function ug(t,e){return new $(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function dg(t,e){return new $(n=>{let r;return xe(n,e,()=>{r=t[As](),xe(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>A(r?.return)&&r.return()})}function xs(t,e){if(!t)throw new Error("Iterable cannot be null");return new $(n=>{xe(n,e,()=>{let r=t[Symbol.asyncIterator]();xe(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function hg(t,e){return xs(Ns(t),e)}function fg(t,e){if(t!=null){if(bs(t))return cg(t,e);if(Cs(t))return ug(t,e);if(Ds(t))return lg(t,e);if(Ts(t))return xs(t,e);if(Ms(t))return dg(t,e);if(Rs(t))return hg(t,e)}throw Ss(t)}function ce(t,e){return e?fg(t,e):le(t)}function M(...t){let e=Zt(t);return ce(t,e)}function Cr(t,e){let n=A(t)?t:()=>t,r=i=>i.error(n());return new $(e?i=>e.schedule(r,0,i):r)}function Sl(t){return!!t&&(t instanceof $||A(t.lift)&&A(t.subscribe))}var Vt=fr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function U(t,e){return H((n,r)=>{let i=0;n.subscribe(j(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:aC}=Array;function cC(t,e){return aC(e)?t(...e):t(e)}function Os(t){return U(e=>cC(t,e))}var{isArray:lC}=Array,{getPrototypeOf:uC,prototype:dC,keys:hC}=Object;function Ps(t){if(t.length===1){let e=t[0];if(lC(e))return{args:e,keys:null};if(fC(e)){let n=hC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function fC(t){return t&&typeof t=="object"&&uC(t)===dC}function ks(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Fs(...t){let e=Zt(t),n=Es(t),{args:r,keys:i}=Ps(t);if(r.length===0)return ce([],e);let o=new $(pC(r,e,i?s=>ks(i,s):je));return n?o.pipe(Os(n)):o}function pC(t,e,n=je){return r=>{pg(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)pg(e,()=>{let l=ce(t[c],e),u=!1;l.subscribe(j(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function pg(t,e,n){t?xe(n,t,e):e()}function gg(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=v=>l<r?p(v):c.push(v),p=v=>{o&&e.next(v),l++;let S=!1;le(n(v,u++)).subscribe(j(e,x=>{i?.(x),o?f(x):e.next(x)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let x=c.shift();s?xe(e,s,()=>p(x)):p(x)}h()}catch(x){e.error(x)}}))};return t.subscribe(j(e,f,()=>{d=!0,h()})),()=>{a?.()}}function de(t,e,n=1/0){return A(e)?de((r,i)=>U((o,s)=>e(r,o,i,s))(le(t(r,i))),n):(typeof e=="number"&&(n=e),H((r,i)=>gg(r,i,t,n)))}function Al(t=1/0){return de(je,t)}function mg(){return Al(1)}function Dr(...t){return mg()(ce(t,Zt(t)))}function Ls(t){return new $(e=>{le(t()).subscribe(e)})}function Ml(...t){let e=Es(t),{args:n,keys:r}=Ps(t),i=new $(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;le(n[u]).subscribe(j(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?ks(r,a):a),o.complete())}))}});return e?i.pipe(Os(e)):i}function st(t,e){return H((n,r)=>{let i=0;n.subscribe(j(r,o=>t.call(e,o,i++)&&r.next(o)))})}function en(t){return H((e,n)=>{let r=null,i=!1,o;r=e.subscribe(j(n,void 0,void 0,s=>{o=le(t(s,en(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function vg(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(j(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function br(t,e){return A(e)?de(t,e,1):de(t,1)}function tn(t){return H((e,n)=>{let r=!1;e.subscribe(j(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function jt(t){return t<=0?()=>Ue:H((e,n)=>{let r=0;e.subscribe(j(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Nl(t){return U(()=>t)}function Vs(t=gC){return H((e,n)=>{let r=!1;e.subscribe(j(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function gC(){return new Vt}function Ai(t){return H((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function vt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?st((i,o)=>t(i,o,r)):je,jt(1),n?tn(e):Vs(()=>new Vt))}function Tr(t){return t<=0?()=>Ue:H((e,n)=>{let r=[];e.subscribe(j(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Rl(t,e){let n=arguments.length>=2;return r=>r.pipe(t?st((i,o)=>t(i,o,r)):je,Tr(1),n?tn(e):Vs(()=>new Vt))}function xl(t,e){return H(vg(t,e,arguments.length>=2,!0))}function Ol(...t){let e=Zt(t);return H((n,r)=>{(e?Dr(t,n,e):Dr(t,n)).subscribe(r)})}function at(t,e){return H((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(j(r,c=>{i?.unsubscribe();let l=0,u=o++;le(t(c,u)).subscribe(i=j(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Pl(t){return H((e,n)=>{le(t).subscribe(j(n,()=>n.complete(),Ti)),!n.closed&&e.subscribe(n)})}function he(t,e,n){let r=A(t)||e||n?{next:t,error:e,complete:n}:t;return r?H((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(j(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):je}var Xg="https://g.co/ng/security#xss",C=class extends Error{constructor(e,n){super(xu(e,n)),this.code=e}};function xu(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function $i(t){return{toString:t}.toString()}var js="__parameters__";function mC(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function vC(t,e,n){return $i(()=>{let r=mC(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(js)?c[js]:Object.defineProperty(c,js,{value:[]})[js];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Mi=globalThis;function ee(t){for(let e in t)if(t[e]===ee)return e;throw Error("Could not find renamed property on target object.")}function yC(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Se(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Se).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function yg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var _C=ee({__forward_ref__:ee});function jn(t){return t.__forward_ref__=jn,t.toString=function(){return Se(this())},t}function be(t){return em(t)?t():t}function em(t){return typeof t=="function"&&t.hasOwnProperty(_C)&&t.__forward_ref__===jn}function I(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Un(t){return{providers:t.providers||[],imports:t.imports||[]}}function ha(t){return _g(t,nm)||_g(t,rm)}function tm(t){return ha(t)!==null}function _g(t,e){return t.hasOwnProperty(e)?t[e]:null}function IC(t){let e=t&&(t[nm]||t[rm]);return e||null}function Ig(t){return t&&(t.hasOwnProperty(wg)||t.hasOwnProperty(wC))?t[wg]:null}var nm=ee({\u0275prov:ee}),wg=ee({\u0275inj:ee}),rm=ee({ngInjectableDef:ee}),wC=ee({ngInjectorDef:ee}),b=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function im(t){return t&&!!t.\u0275providers}var EC=ee({\u0275cmp:ee}),CC=ee({\u0275dir:ee}),DC=ee({\u0275pipe:ee}),bC=ee({\u0275mod:ee}),qs=ee({\u0275fac:ee}),Ni=ee({__NG_ELEMENT_ID__:ee}),Eg=ee({__NG_ENV_ID__:ee});function fa(t){return typeof t=="string"?t:t==null?"":String(t)}function TC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():fa(t)}function SC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new C(-200,t)}function Ou(t,e){throw new C(-201,!1)}var P=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(P||{}),Ql;function om(){return Ql}function ze(t){let e=Ql;return Ql=t,e}function sm(t,e,n){let r=ha(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&P.Optional)return null;if(e!==void 0)return e;Ou(t,"Injector")}var AC={},Ri=AC,Zl="__NG_DI_FLAG__",Ys="ngTempTokenPath",MC="ngTokenPath",NC=/\n/gm,RC="\u0275",Cg="__source",Nr;function xC(){return Nr}function nn(t){let e=Nr;return Nr=t,e}function OC(t,e=P.Default){if(Nr===void 0)throw new C(-203,!1);return Nr===null?sm(t,void 0,e):Nr.get(t,e&P.Optional?null:void 0,e)}function O(t,e=P.Default){return(om()||OC)(be(t),e)}function _(t,e=P.Default){return O(t,pa(e))}function pa(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Jl(t){let e=[];for(let n=0;n<t.length;n++){let r=be(t[n]);if(Array.isArray(r)){if(r.length===0)throw new C(900,!1);let i,o=P.Default;for(let s=0;s<r.length;s++){let a=r[s],c=kC(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function PC(t,e){return t[Zl]=e,t.prototype[Zl]=e,t}function kC(t){return t[Zl]}function FC(t,e,n,r){let i=t[Ys];throw e[Cg]&&i.unshift(e[Cg]),t.message=LC(`
`+t.message,i,n,r),t[MC]=i,t[Ys]=null,t}function LC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==RC?t.slice(2):t;let i=Se(e);if(Array.isArray(e))i=e.map(Se).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Se(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(NC,`
  `)}`}var Ct=PC(vC("Optional"),8);function xr(t,e){let n=t.hasOwnProperty(qs);return n?t[qs]:null}function Pu(t,e){t.forEach(n=>Array.isArray(n)?Pu(n,e):e(n))}function am(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ks(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function VC(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function jC(t,e,n){let r=Hi(t,e);return r>=0?t[r|1]=n:(r=~r,VC(t,r,e,n)),r}function kl(t,e){let n=Hi(t,e);if(n>=0)return t[n|1]}function Hi(t,e){return UC(t,e,1)}function UC(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Or={},Ge=[],Pr=new b(""),cm=new b("",-1),lm=new b(""),Qs=class{get(e,n=Ri){if(n===Ri){let r=new Error(`NullInjectorError: No provider for ${Se(e)}!`);throw r.name="NullInjectorError",r}return n}},um=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(um||{}),It=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(It||{}),Ye=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ye||{});function BC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Xl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];HC(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function $C(t){return t===3||t===4||t===6}function HC(t){return t.charCodeAt(0)===64}function xi(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Dg(t,n,i,null,e[++r]):Dg(t,n,i,null,null))}}return t}function Dg(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var dm="ng-template";function WC(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&BC(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ku(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function ku(t){return t.type===4&&t.value!==dm}function zC(t,e,n){let r=t.type===4&&!n?dm:t.value;return e===r}function GC(t,e,n){let r=4,i=t.attrs,o=i!==null?KC(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!ct(r)&&!ct(c))return!1;if(s&&ct(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!zC(t,c,n)||c===""&&e.length===1){if(ct(r))return!1;s=!0}}else if(r&8){if(i===null||!WC(t,i,c,n)){if(ct(r))return!1;s=!0}}else{let l=e[++a],u=qC(c,i,ku(t),n);if(u===-1){if(ct(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(ct(r))return!1;s=!0}}}}return ct(r)||s}function ct(t){return(t&1)===0}function qC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return QC(e,t)}function YC(t,e,n=!1){for(let r=0;r<e.length;r++)if(GC(t,e[r],n))return!0;return!1}function KC(t){for(let e=0;e<t.length;e++){let n=t[e];if($C(n))return e}return t.length}function QC(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function bg(t,e){return t?":not("+e.trim()+")":e}function ZC(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ct(s)&&(e+=bg(o,i),i=""),r=s,o=o||!ct(r);n++}return i!==""&&(e+=bg(o,i)),e}function JC(t){return t.map(ZC).join(",")}function XC(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!ct(i))break;i=o}r++}return{attrs:e,classes:n}}function Oe(t){return $i(()=>{let e=mm(t),n=X(y({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===um.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||It.Emulated,styles:t.styles||Ge,_:null,schemas:t.schemas||null,tView:null,id:""});vm(n);let r=t.dependencies;return n.directiveDefs=Sg(r,!1),n.pipeDefs=Sg(r,!0),n.id=nD(n),n})}function eD(t){return Rn(t)||hm(t)}function tD(t){return t!==null}function Bn(t){return $i(()=>({type:t.type,bootstrap:t.bootstrap||Ge,declarations:t.declarations||Ge,imports:t.imports||Ge,exports:t.exports||Ge,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Tg(t,e){if(t==null)return Or;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Ye.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Ye.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Pe(t){return $i(()=>{let e=mm(t);return vm(e),e})}function Rn(t){return t[EC]||null}function hm(t){return t[CC]||null}function fm(t){return t[DC]||null}function pm(t){let e=Rn(t)||hm(t)||fm(t);return e!==null?e.standalone:!1}function gm(t,e){let n=t[bC]||null;if(!n&&e===!0)throw new Error(`Type ${Se(t)} does not have '\u0275mod' property.`);return n}function mm(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Or,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ge,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Tg(t.inputs,e),outputs:Tg(t.outputs),debugInfo:null}}function vm(t){t.features?.forEach(e=>e(t))}function Sg(t,e){if(!t)return null;let n=e?fm:eD;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(tD)}function nD(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function an(t){return{\u0275providers:t}}function rD(...t){return{\u0275providers:ym(!0,t),\u0275fromNgModule:!0}}function ym(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Pu(e,s=>{let a=s;eu(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&_m(i,o),n}function _m(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Fu(i,o=>{e(o,r)})}}function eu(t,e,n,r){if(t=be(t),!t)return!1;let i=null,o=Ig(t),s=!o&&Rn(t);if(!o&&!s){let c=t.ngModule;if(o=Ig(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)eu(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Pu(o.imports,u=>{eu(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&_m(l,e)}if(!a){let l=xr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ge},i),e({provide:lm,useValue:i,multi:!0},i),e({provide:Pr,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Fu(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Fu(t,e){for(let n of t)im(n)&&(n=n.\u0275providers),Array.isArray(n)?Fu(n,e):e(n)}var iD=ee({provide:String,useValue:ee});function Im(t){return t!==null&&typeof t=="object"&&iD in t}function oD(t){return!!(t&&t.useExisting)}function sD(t){return!!(t&&t.useFactory)}function kr(t){return typeof t=="function"}function aD(t){return!!t.useClass}var ga=new b(""),$s={},cD={},Fl;function Lu(){return Fl===void 0&&(Fl=new Qs),Fl}var Ke=class{},Oi=class extends Ke{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nu(e,s=>this.processProvider(s)),this.records.set(cm,Sr(void 0,this)),i.has("environment")&&this.records.set(Ke,Sr(void 0,this));let o=this.records.get(ga);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lm,Ge,P.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=nn(this),r=ze(void 0),i;try{return e()}finally{nn(n),ze(r)}}get(e,n=Ri,r=P.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Eg))return e[Eg](this);r=pa(r);let i,o=nn(this),s=ze(void 0);try{if(!(r&P.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=fD(e)&&ha(e);l&&this.injectableDefInScope(l)?c=Sr(tu(e),$s):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&P.Self?Lu():this.parent;return n=r&P.Optional&&n===Ri?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ys]=a[Ys]||[]).unshift(Se(e)),o)throw a;return FC(a,e,"R3InjectorError",this.source)}else throw a}finally{ze(s),nn(o)}}resolveInjectorInitializers(){let e=G(null),n=nn(this),r=ze(void 0),i;try{let o=this.get(Pr,Ge,P.Self);for(let s of o)s()}finally{nn(n),ze(r),G(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Se(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new C(205,!1)}processProvider(e){e=be(e);let n=kr(e)?e:be(e&&e.provide),r=uD(e);if(!kr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Sr(void 0,$s,!0),i.factory=()=>Jl(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=G(null);try{return n.value===$s&&(n.value=cD,n.value=n.factory()),typeof n.value=="object"&&n.value&&hD(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{G(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=be(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function tu(t){let e=ha(t),n=e!==null?e.factory:xr(t);if(n!==null)return n;if(t instanceof b)throw new C(204,!1);if(t instanceof Function)return lD(t);throw new C(204,!1)}function lD(t){if(t.length>0)throw new C(204,!1);let n=IC(t);return n!==null?()=>n.factory(t):()=>new t}function uD(t){if(Im(t))return Sr(void 0,t.useValue);{let e=wm(t);return Sr(e,$s)}}function wm(t,e,n){let r;if(kr(t)){let i=be(t);return xr(i)||tu(i)}else if(Im(t))r=()=>be(t.useValue);else if(sD(t))r=()=>t.useFactory(...Jl(t.deps||[]));else if(oD(t))r=()=>O(be(t.useExisting));else{let i=be(t&&(t.useClass||t.provide));if(dD(t))r=()=>new i(...Jl(t.deps));else return xr(i)||tu(i)}return r}function Sr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function dD(t){return!!t.deps}function hD(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function fD(t){return typeof t=="function"||typeof t=="object"&&t instanceof b}function nu(t,e){for(let n of t)Array.isArray(n)?nu(n,e):n&&im(n)?nu(n.\u0275providers,e):e(n)}function $n(t,e){t instanceof Oi&&t.assertNotDestroyed();let n,r=nn(t),i=ze(void 0);try{return e()}finally{nn(r),ze(i)}}function pD(){return om()!==void 0||xC()!=null}function gD(t){return typeof t=="function"}var Wt=0,B=1,D=2,Ee=3,lt=4,ht=5,Zs=6,Pi=7,ut=8,Fr=9,dt=10,ge=11,ki=12,Ag=13,Ur=14,wt=15,ma=16,Ar=17,Lr=18,va=19,Em=20,rn=21,Ll=22,xn=23,Ut=25,Cm=1;var On=7,Js=8,Xs=9,qe=10,Vu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Vu||{});function Mn(t){return Array.isArray(t)&&typeof t[Cm]=="object"}function zt(t){return Array.isArray(t)&&t[Cm]===!0}function Dm(t){return(t.flags&4)!==0}function ya(t){return t.componentOffset>-1}function ju(t){return(t.flags&1)===1}function on(t){return!!t.template}function mD(t){return(t[D]&512)!==0}var ru=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function bm(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Br(){return Tm}function Tm(t){return t.type.prototype.ngOnChanges&&(t.setInput=yD),vD}Br.ngInherit=!0;function vD(){let t=Am(this),e=t?.current;if(e){let n=t.previous;if(n===Or)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function yD(t,e,n,r,i){let o=this.declaredInputs[r],s=Am(t)||_D(t,{previous:Or,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new ru(l&&l.currentValue,n,c===Or),bm(t,e,i,n)}var Sm="__ngSimpleChanges__";function Am(t){return t[Sm]||null}function _D(t,e){return t[Sm]=e}var Mg=null;var yt=function(t,e,n){Mg?.(t,e,n)},ID="svg",wD="math",ED=!1;function CD(){return ED}function Et(t){for(;Array.isArray(t);)t=t[Wt];return t}function Mm(t,e){return Et(e[t])}function Qe(t,e){return Et(e[t.index])}function Nm(t,e){return t.data[e]}function DD(t,e){return t[e]}function cn(t,e){let n=e[t];return Mn(n)?n:n[Wt]}function Uu(t){return(t[D]&128)===128}function bD(t){return zt(t[Ee])}function ea(t,e){return e==null?null:t[e]}function Rm(t){t[Ar]=0}function TD(t){t[D]&1024||(t[D]|=1024,Uu(t)&&Fi(t))}function SD(t,e){for(;t>0;)e=e[Ur],t--;return e}function Bu(t){return!!(t[D]&9216||t[xn]?.dirty)}function iu(t){t[dt].changeDetectionScheduler?.notify(1),Bu(t)?Fi(t):t[D]&64&&(CD()?(t[D]|=1024,Fi(t)):t[dt].changeDetectionScheduler?.notify())}function Fi(t){t[dt].changeDetectionScheduler?.notify();let e=Li(t);for(;e!==null&&!(e[D]&8192||(e[D]|=8192,!Uu(e)));)e=Li(e)}function xm(t,e){if((t[D]&256)===256)throw new C(911,!1);t[rn]===null&&(t[rn]=[]),t[rn].push(e)}function AD(t,e){if(t[rn]===null)return;let n=t[rn].indexOf(e);n!==-1&&t[rn].splice(n,1)}function Li(t){let e=t[Ee];return zt(e)?e[Ee]:e}var L={lFrame:jm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function MD(){return L.lFrame.elementDepthCount}function ND(){L.lFrame.elementDepthCount++}function RD(){L.lFrame.elementDepthCount--}function Om(){return L.bindingsEnabled}function xD(){return L.skipHydrationRootTNode!==null}function OD(t){return L.skipHydrationRootTNode===t}function PD(){L.skipHydrationRootTNode=null}function ie(){return L.lFrame.lView}function Ze(){return L.lFrame.tView}function $u(t){return L.lFrame.contextLView=t,t[ut]}function Hu(t){return L.lFrame.contextLView=null,t}function Je(){let t=Pm();for(;t!==null&&t.type===64;)t=t.parent;return t}function Pm(){return L.lFrame.currentTNode}function kD(){let t=L.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Wi(t,e){let n=L.lFrame;n.currentTNode=t,n.isParent=e}function km(){return L.lFrame.isParent}function FD(){L.lFrame.isParent=!1}function LD(){return L.lFrame.contextLView}function VD(t){return L.lFrame.bindingIndex=t}function Wu(){return L.lFrame.bindingIndex++}function jD(t){let e=L.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function UD(){return L.lFrame.inI18n}function BD(t,e){let n=L.lFrame;n.bindingIndex=n.bindingRootIndex=t,ou(e)}function $D(){return L.lFrame.currentDirectiveIndex}function ou(t){L.lFrame.currentDirectiveIndex=t}function HD(t){let e=L.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Fm(t){L.lFrame.currentQueryIndex=t}function WD(t){let e=t[B];return e.type===2?e.declTNode:e.type===1?t[ht]:null}function Lm(t,e,n){if(n&P.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&P.Host);)if(i=WD(o),i===null||(o=o[Ur],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=L.lFrame=Vm();return r.currentTNode=e,r.lView=t,!0}function zu(t){let e=Vm(),n=t[B];L.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Vm(){let t=L.lFrame,e=t===null?null:t.child;return e===null?jm(t):e}function jm(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Um(){let t=L.lFrame;return L.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Bm=Um;function Gu(){let t=Um();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function zD(t){return(L.lFrame.contextLView=SD(t,L.lFrame.contextLView))[ut]}function $r(){return L.lFrame.selectedIndex}function Pn(t){L.lFrame.selectedIndex=t}function qu(){let t=L.lFrame;return Nm(t.tView,t.selectedIndex)}function GD(){return L.lFrame.currentNamespace}var $m=!0;function Yu(){return $m}function Ku(t){$m=t}function qD(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Tm(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Qu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Hs(t,e,n){Hm(t,e,3,n)}function Ws(t,e,n,r){(t[D]&3)===n&&Hm(t,e,n,r)}function Vl(t,e){let n=t[D];(n&3)===e&&(n&=16383,n+=1,t[D]=n)}function Hm(t,e,n,r){let i=r!==void 0?t[Ar]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ar]+=65536),(a<o||o==-1)&&(YD(t,n,e,c),t[Ar]=(t[Ar]&4294901760)+c+2),c++}function Ng(t,e){yt(4,t,e);let n=G(null);try{e.call(t)}finally{G(n),yt(5,t,e)}}function YD(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[D]>>14<t[Ar]>>16&&(t[D]&3)===e&&(t[D]+=16384,Ng(a,o)):Ng(a,o)}var Rr=-1,kn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function KD(t){return t instanceof kn}function QD(t){return(t.flags&8)!==0}function ZD(t){return(t.flags&16)!==0}function Wm(t){return t!==Rr}function ta(t){return t&32767}function JD(t){return t>>16}function na(t,e){let n=JD(t),r=e;for(;n>0;)r=r[Ur],n--;return r}var su=!0;function Rg(t){let e=su;return su=t,e}var XD=256,zm=XD-1,Gm=5,eb=0,_t={};function tb(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ni)&&(r=n[Ni]),r==null&&(r=n[Ni]=eb++);let i=r&zm,o=1<<i;e.data[t+(i>>Gm)]|=o}function ra(t,e){let n=qm(t,e);if(n!==-1)return n;let r=e[B];r.firstCreatePass&&(t.injectorIndex=e.length,jl(r.data,t),jl(e,null),jl(r.blueprint,null));let i=Zu(t,e),o=t.injectorIndex;if(Wm(i)){let s=ta(i),a=na(i,e),c=a[B].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function jl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qm(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Zu(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Jm(i),r===null)return Rr;if(n++,i=i[Ur],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Rr}function au(t,e,n){tb(t,e,n)}function Ym(t,e,n){if(n&P.Optional||t!==void 0)return t;Ou(e,"NodeInjector")}function Km(t,e,n,r){if(n&P.Optional&&r===void 0&&(r=null),!(n&(P.Self|P.Host))){let i=t[Fr],o=ze(void 0);try{return i?i.get(e,r,n&P.Optional):sm(e,r,n&P.Optional)}finally{ze(o)}}return Ym(r,e,n)}function Qm(t,e,n,r=P.Default,i){if(t!==null){if(e[D]&2048&&!(r&P.Self)){let s=sb(t,e,n,r,_t);if(s!==_t)return s}let o=Zm(t,e,n,r,_t);if(o!==_t)return o}return Km(e,n,r,i)}function Zm(t,e,n,r,i){let o=ib(n);if(typeof o=="function"){if(!Lm(e,t,r))return r&P.Host?Ym(i,n,r):Km(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&P.Optional))Ou(n);else return s}finally{Bm()}}else if(typeof o=="number"){let s=null,a=qm(t,e),c=Rr,l=r&P.Host?e[wt][ht]:null;for((a===-1||r&P.SkipSelf)&&(c=a===-1?Zu(t,e):e[a+8],c===Rr||!Og(r,!1)?a=-1:(s=e[B],a=ta(c),e=na(c,e)));a!==-1;){let u=e[B];if(xg(o,a,u.data)){let d=nb(a,e,n,s,r,l);if(d!==_t)return d}c=e[a+8],c!==Rr&&Og(r,e[B].data[a+8]===l)&&xg(o,a,e)?(s=u,a=ta(c),e=na(c,e)):a=-1}}return i}function nb(t,e,n,r,i,o){let s=e[B],a=s.data[t+8],c=r==null?ya(a)&&su:r!=s&&(a.type&3)!==0,l=i&P.Host&&o===a,u=rb(a,s,n,c,l);return u!==null?Vr(e,s,u,a):_t}function rb(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let p=s[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=s[c];if(f&&on(f)&&f.type===n)return c}return null}function Vr(t,e,n,r){let i=t[n],o=e.data;if(KD(i)){let s=i;s.resolving&&SC(TC(o[n]));let a=Rg(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?ze(s.injectImpl):null,u=Lm(t,r,P.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&qD(n,o[n],e)}finally{l!==null&&ze(l),Rg(a),s.resolving=!1,Bm()}}return i}function ib(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ni)?t[Ni]:void 0;return typeof e=="number"?e>=0?e&zm:ob:e}function xg(t,e,n){let r=1<<t;return!!(n[e+(t>>Gm)]&r)}function Og(t,e){return!(t&P.Self)&&!(t&P.Host&&e)}var Nn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Qm(this._tNode,this._lView,e,pa(r),n)}};function ob(){return new Nn(Je(),ie())}function Hn(t){return $i(()=>{let e=t.prototype.constructor,n=e[qs]||cu(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[qs]||cu(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function cu(t){return em(t)?()=>{let e=cu(be(t));return e&&e()}:xr(t)}function sb(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[D]&2048&&!(s[D]&512);){let a=Zm(o,s,n,r|P.Self,_t);if(a!==_t)return a;let c=o.parent;if(!c){let l=s[Em];if(l){let u=l.get(n,_t,r);if(u!==_t)return u}c=Jm(s),s=s[Ur]}o=c}return i}function Jm(t){let e=t[B],n=e.type;return n===2?e.declTNode:n===1?t[ht]:null}function Pg(t,e=null,n=null,r){let i=Xm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Xm(t,e=null,n=null,r,i=new Set){let o=[n||Ge,rD(t)];return r=r||(typeof t=="object"?void 0:Se(t)),new Oi(o,e||Lu(),r||null,i)}var Dt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return Pg({name:""},i,r,"");{let o=r.name??"";return Pg({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Ri,e.NULL=new Qs,e.\u0275prov=I({token:e,providedIn:"any",factory:()=>O(cm)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var ab="ngOriginalError";function Ul(t){return t[ab]}var Bt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ul(e);for(;n&&Ul(n);)n=Ul(n);return n||null}},ev=new b("",{providedIn:"root",factory:()=>_(Bt).handleError.bind(void 0)}),tv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cb,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),lu=class extends tv{constructor(e){super(),this._lView=e}onDestroy(e){return xm(this._lView,e),()=>AD(this._lView,e)}};function cb(){return new lu(ie())}function lb(){return _a(Je(),ie())}function _a(t,e){return new Gt(Qe(t,e))}var Gt=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=lb;let t=e;return t})();var uu=class extends Q{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,pD()&&(this.destroyRef=_(tv,{optional:!0})??void 0)}emit(e){let n=G(null);try{super.next(e)}finally{G(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Bl(o),i&&(i=Bl(i)),s&&(s=Bl(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ae&&e.add(a),a}};function Bl(t){return e=>{setTimeout(t,void 0,e)}}var Te=uu;function nv(t){return(t.flags&128)===128}var rv=new Map,ub=0;function db(){return ub++}function hb(t){rv.set(t[va],t)}function fb(t){rv.delete(t[va])}var kg="__ngContext__";function Fn(t,e){Mn(e)?(t[kg]=e[va],hb(e)):t[kg]=e}function iv(t){return sv(t[ki])}function ov(t){return sv(t[lt])}function sv(t){for(;t!==null&&!zt(t);)t=t[lt];return t}var du;function av(t){du=t}function pb(){if(du!==void 0)return du;if(typeof document<"u")return document;throw new C(210,!1)}var Ju=new b("",{providedIn:"root",factory:()=>gb}),gb="ng",Xu=new b(""),ln=new b("",{providedIn:"platform",factory:()=>"unknown"});var ed=new b("",{providedIn:"root",factory:()=>pb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mb="h",vb="b";var yb=()=>null;function td(t,e,n=!1){return yb(t,e,n)}var cv=!1,_b=new b("",{providedIn:"root",factory:()=>cv});var ia=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xg})`}};function Ia(t){return t instanceof ia?t.changingThisBreaksApplicationSecurity:t}function lv(t,e){let n=Ib(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Xg})`)}return n===e}function Ib(t){return t instanceof ia&&t.getTypeName()||null}var wb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function uv(t){return t=String(t),t.match(wb)?t:"unsafe:"+t}var nd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(nd||{});function qt(t){let e=Eb();return e?e.sanitize(nd.URL,t)||"":lv(t,"URL")?Ia(t):uv(fa(t))}function Eb(){let t=ie();return t&&t[dt].sanitizer}function dv(t){return t.ownerDocument.defaultView}function hv(t){return t instanceof Function?t():t}var $t=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}($t||{}),Cb;function rd(t,e){return Cb(t,e)}function Mr(t,e,n,r,i){if(r!=null){let o,s=!1;zt(r)?o=r:Mn(r)&&(s=!0,r=r[Wt]);let a=Et(r);t===0&&n!==null?i==null?vv(e,n,a):oa(e,n,a,i||null,!0):t===1&&n!==null?oa(e,n,a,i||null,!0):t===2?Ub(e,a,s):t===3&&e.destroyNode(a),o!=null&&$b(e,t,o,n,i)}}function Db(t,e){return t.createText(e)}function bb(t,e,n){t.setValue(e,n)}function fv(t,e,n){return t.createElement(e,n)}function Tb(t,e){pv(t,e),e[Wt]=null,e[ht]=null}function Sb(t,e,n,r,i,o){r[Wt]=i,r[ht]=e,wa(t,r,n,1,i,o)}function pv(t,e){e[dt].changeDetectionScheduler?.notify(1),wa(t,e,e[ge],2,null,null)}function Ab(t){let e=t[ki];if(!e)return $l(t[B],t);for(;e;){let n=null;if(Mn(e))n=e[ki];else{let r=e[qe];r&&(n=r)}if(!n){for(;e&&!e[lt]&&e!==t;)Mn(e)&&$l(e[B],e),e=e[Ee];e===null&&(e=t),Mn(e)&&$l(e[B],e),n=e&&e[lt]}e=n}}function Mb(t,e,n,r){let i=qe+r,o=n.length;r>0&&(n[i-1][lt]=e),r<o-qe?(e[lt]=n[i],am(n,qe+r,e)):(n.push(e),e[lt]=null),e[Ee]=n;let s=e[ma];s!==null&&n!==s&&Nb(s,e);let a=e[Lr];a!==null&&a.insertView(t),iu(e),e[D]|=128}function Nb(t,e){let n=t[Xs],i=e[Ee][Ee][wt];e[wt]!==i&&(t[D]|=Vu.HasTransplantedViews),n===null?t[Xs]=[e]:n.push(e)}function gv(t,e){let n=t[Xs],r=n.indexOf(e);n.splice(r,1)}function hu(t,e){if(t.length<=qe)return;let n=qe+e,r=t[n];if(r){let i=r[ma];i!==null&&i!==t&&gv(i,r),e>0&&(t[n-1][lt]=r[lt]);let o=Ks(t,qe+e);Tb(r[B],r);let s=o[Lr];s!==null&&s.detachView(o[B]),r[Ee]=null,r[lt]=null,r[D]&=-129}return r}function mv(t,e){if(!(e[D]&256)){let n=e[ge];n.destroyNode&&wa(t,e,n,3,null,null),Ab(e)}}function $l(t,e){if(e[D]&256)return;let n=G(null);try{e[D]&=-129,e[D]|=256,e[xn]&&Gp(e[xn]),xb(t,e),Rb(t,e),e[B].type===1&&e[ge].destroy();let r=e[ma];if(r!==null&&zt(e[Ee])){r!==e[Ee]&&gv(r,e);let i=e[Lr];i!==null&&i.detachView(t)}fb(e)}finally{G(n)}}function Rb(t,e){let n=t.cleanup,r=e[Pi];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Pi]=null);let i=e[rn];if(i!==null){e[rn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function xb(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof kn)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];yt(4,a,c);try{c.call(a)}finally{yt(5,a,c)}}else{yt(4,i,o);try{o.call(i)}finally{yt(5,i,o)}}}}}function Ob(t,e,n){return Pb(t,e.parent,n)}function Pb(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Wt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===It.None||o===It.Emulated)return null}return Qe(r,n)}}function oa(t,e,n,r,i){t.insertBefore(e,n,r,i)}function vv(t,e,n){t.appendChild(e,n)}function Fg(t,e,n,r,i){r!==null?oa(t,e,n,r,i):vv(t,e,n)}function kb(t,e,n,r){t.removeChild(e,n,r)}function id(t,e){return t.parentNode(e)}function Fb(t,e){return t.nextSibling(e)}function Lb(t,e,n){return jb(t,e,n)}function Vb(t,e,n){return t.type&40?Qe(t,n):null}var jb=Vb,Lg;function od(t,e,n,r){let i=Ob(t,r,e),o=e[ge],s=r.parent||e[ht],a=Lb(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Fg(o,i,n[c],a,!1);else Fg(o,i,n,a,!1);Lg!==void 0&&Lg(o,r,e,n,i)}function zs(t,e){if(e!==null){let n=e.type;if(n&3)return Qe(e,t);if(n&4)return fu(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return zs(t,r);{let i=t[e.index];return zt(i)?fu(-1,i):Et(i)}}else{if(n&32)return rd(e,t)()||Et(t[e.index]);{let r=yv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Li(t[wt]);return zs(i,r)}else return zs(t,e.next)}}}return null}function yv(t,e){if(e!==null){let r=t[wt][ht],i=e.projection;return r.projection[i]}return null}function fu(t,e){let n=qe+t+1;if(n<e.length){let r=e[n],i=r[B].firstChild;if(i!==null)return zs(r,i)}return e[On]}function Ub(t,e,n){let r=id(t,e);r&&kb(t,r,e,n)}function sd(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Fn(Et(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)sd(t,e,n.child,r,i,o,!1),Mr(e,t,i,a,o);else if(c&32){let l=rd(n,r),u;for(;u=l();)Mr(e,t,i,u,o);Mr(e,t,i,a,o)}else c&16?Bb(t,e,r,n,i,o):Mr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function wa(t,e,n,r,i,o){sd(n,r,t.firstChild,e,i,o,!1)}function Bb(t,e,n,r,i,o){let s=n[wt],c=s[ht].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Mr(e,t,i,u,o)}else{let l=c,u=s[Ee];nv(r)&&(l.flags|=128),sd(t,e,l,u,i,o,!0)}}function $b(t,e,n,r,i){let o=n[On],s=Et(n);o!==s&&Mr(e,t,r,o,i);for(let a=qe;a<n.length;a++){let c=n[a];wa(c[B],c,t,e,r,o)}}function Hb(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:$t.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=$t.Important),t.setStyle(n,r,i,o))}}function Wb(t,e,n){t.setAttribute(e,"style",n)}function _v(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Iv(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Xl(t,e,r),i!==null&&_v(t,e,i),o!==null&&Wb(t,e,o)}var Wn={};function Y(t=1){wv(Ze(),ie(),$r()+t,!1)}function wv(t,e,n,r){if(!r)if((e[D]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Hs(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ws(e,o,0,n)}Pn(n)}function T(t,e=P.Default){let n=ie();if(n===null)return O(t,e);let r=Je();return Qm(r,n,be(t),e)}function Ev(t,e,n,r,i,o){let s=G(null);try{let a=null;i&Ye.SignalBased&&(a=e[r][$p]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Ye.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):bm(e,a,r,o)}finally{G(s)}}function zb(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Pn(~i);else{let o=i,s=n[++r],a=n[++r];BD(s,o);let c=e[o];a(2,c)}}}finally{Pn(-1)}}function Ea(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Wt]=i,d[D]=r|4|128|8|64,(l!==null||t&&t[D]&2048)&&(d[D]|=2048),Rm(d),d[Ee]=d[Ur]=t,d[ut]=n,d[dt]=s||t&&t[dt],d[ge]=a||t&&t[ge],d[Fr]=c||t&&t[Fr]||null,d[ht]=o,d[va]=db(),d[Zs]=u,d[Em]=l,d[wt]=e.type==2?t[wt]:d,d}function Ca(t,e,n,r,i){let o=t.data[e];if(o===null)o=Gb(t,e,n,r,i),UD()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=kD();o.injectorIndex=s===null?-1:s.injectorIndex}return Wi(o,!0),o}function Gb(t,e,n,r,i){let o=Pm(),s=km(),a=s?o:o&&o.parent,c=t.data[e]=Zb(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Cv(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Dv(t,e,n,r,i){let o=$r(),s=r&2;try{Pn(-1),s&&e.length>Ut&&wv(t,e,Ut,!1),yt(s?2:0,i),n(r,i)}finally{Pn(o),yt(s?3:1,i)}}function bv(t,e,n){if(Dm(e)){let r=G(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{G(r)}}}function Tv(t,e,n){Om()&&(r0(t,e,n,Qe(n,e)),(n.flags&64)===64&&xv(t,e,n))}function Sv(t,e,n=Qe){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Av(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=ad(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ad(t,e,n,r,i,o,s,a,c,l,u){let d=Ut+r,h=d+i,f=qb(d,h),p=typeof l=="function"?l():l;return f[B]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function qb(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Wn);return n}function Yb(t,e,n,r){let o=r.get(_b,cv)||n===It.ShadowDom,s=t.selectRootElement(e,o);return Kb(s),s}function Kb(t){Qb(t)}var Qb=()=>null;function Zb(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return xD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Vg(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Ye.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?jg(r,n,l,a,c):jg(r,n,l,a)}return r}function jg(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function Jb(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=Vg(0,d.inputs,u,c,f),l=Vg(1,d.outputs,u,l,p);let v=c!==null&&s!==null&&!ku(e)?p0(c,u,s):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Xb(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Mv(t,e,n,r,i,o,s,a){let c=Qe(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(cd(t,n,u,r,i),ya(e)&&e0(n,e.index)):e.type&3?(r=Xb(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function e0(t,e){let n=cn(e,t);n[D]&16||(n[D]|=64)}function Nv(t,e,n,r){if(Om()){let i=r===null?null:{"":-1},o=o0(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Rv(t,e,n,s,i,a),i&&s0(n,r,i)}n.mergedAttrs=xi(n.mergedAttrs,n.attrs)}function Rv(t,e,n,r,i,o){for(let l=0;l<r.length;l++)au(ra(n,e),t,r[l].type);c0(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Cv(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=xi(n.mergedAttrs,u.hostAttrs),l0(t,n,e,c,u),a0(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}Jb(t,n,o)}function t0(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;n0(s)!=a&&s.push(a),s.push(n,r,o)}}function n0(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function r0(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;ya(n)&&u0(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ra(n,e),Fn(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=Vr(e,t,a,n);if(Fn(l,e),s!==null&&f0(e,a-i,l,c,n,s),on(c)){let u=cn(n.index,e);u[ut]=Vr(e,t,a,n)}}}function xv(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=$D();try{Pn(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];ou(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&i0(c,l)}}finally{Pn(-1),ou(s)}}function i0(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function o0(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(YC(e,s.selectors,!1))if(r||(r=[]),on(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;pu(t,e,c)}else r.unshift(s),pu(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function pu(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function s0(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new C(-301,!1);r.push(e[i],o)}}}function a0(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;on(e)&&(n[""]=t)}}function c0(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function l0(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=xr(i.type,!0)),s=new kn(o,on(i),T);t.blueprint[r]=s,n[r]=s,t0(t,e,r,Cv(t,n,i.hostVars,Wn),i)}function u0(t,e,n){let r=Qe(e,t),i=Av(n),o=t[dt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Da(t,Ea(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function d0(t,e,n,r,i,o){let s=Qe(t,e);h0(e[ge],s,o,t.value,n,r,i)}function h0(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?fa(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function f0(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];Ev(r,n,c,l,u,d)}}function p0(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function Ov(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Pv(t,e){let n=t.contentQueries;if(n!==null){let r=G(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Fm(o),a.contentQueries(2,e[s],s)}}}finally{G(r)}}}function Da(t,e){return t[ki]?t[Ag][lt]=e:t[ki]=e,t[Ag]=e,e}function gu(t,e,n){Fm(0);let r=G(null);try{e(t,n)}finally{G(r)}}function g0(t){return t[Pi]||(t[Pi]=[])}function m0(t){return t.cleanup||(t.cleanup=[])}function kv(t,e){let n=t[Fr],r=n?n.get(Bt,null):null;r&&r.handleError(e)}function cd(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];Ev(u,l,r,a,c,i)}}function v0(t,e,n){let r=Mm(e,t);bb(t[ge],r,n)}function y0(t,e){let n=cn(e,t),r=n[B];_0(r,n);let i=n[Wt];i!==null&&n[Zs]===null&&(n[Zs]=td(i,n[Fr])),ld(r,n,n[ut])}function _0(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ld(t,e,n){zu(e);try{let r=t.viewQuery;r!==null&&gu(1,r,n);let i=t.template;i!==null&&Dv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Lr]?.finishViewCreation(t),t.staticContentQueries&&Pv(t,e),t.staticViewQueries&&gu(2,t.viewQuery,n);let o=t.components;o!==null&&I0(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[D]&=-5,Gu()}}function I0(t,e){for(let n=0;n<e.length;n++)y0(t,e[n])}function w0(t,e,n,r){let i=G(null);try{let o=e.tView,a=t[D]&4096?4096:16,c=Ea(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[ma]=l;let u=t[Lr];return u!==null&&(c[Lr]=u.createEmbeddedView(o)),ld(o,c,n),c}finally{G(i)}}function Ug(t,e){return!e||e.firstChild===null||nv(t)}function E0(t,e,n,r=!0){let i=e[B];if(Mb(i,e,t,n),r){let s=fu(n,t),a=e[ge],c=id(a,t[On]);c!==null&&Sb(i,t[ht],a,e,c,s)}let o=e[Zs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function sa(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(Et(o)),zt(o)&&C0(o,r);let s=n.type;if(s&8)sa(t,e,n.child,r);else if(s&32){let a=rd(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=yv(e,n);if(Array.isArray(a))r.push(...a);else{let c=Li(e[wt]);sa(c[B],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function C0(t,e){for(let n=qe;n<t.length;n++){let r=t[n],i=r[B].firstChild;i!==null&&sa(r[B],r,i,e)}t[On]!==t[Wt]&&e.push(t[On])}var Fv=[];function D0(t){return t[xn]??b0(t)}function b0(t){let e=Fv.pop()??Object.create(S0);return e.lView=t,e}function T0(t){t.lView[xn]!==t&&(t.lView=null,Fv.push(t))}var S0=X(y({},Hp),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Fi(t.lView)},consumerOnSignalRead(){this.lView[xn]=this}}),Lv=100;function Vv(t,e=!0,n=0){let r=t[dt],i=r.rendererFactory,o=!1;o||i.begin?.();try{A0(t,n)}catch(s){throw e&&kv(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function A0(t,e){mu(t,e);let n=0;for(;Bu(t);){if(n===Lv)throw new C(103,!1);n++,mu(t,1)}}function M0(t,e,n,r){let i=e[D];if((i&256)===256)return;let o=!1;!o&&e[dt].inlineEffectRunner?.flush(),zu(e);let s=null,a=null;!o&&N0(t)&&(a=D0(e),s=Wp(a));try{Rm(e),VD(t.bindingStartIndex),n!==null&&Dv(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&Hs(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Ws(e,d,0,null),Vl(e,0)}if(R0(e),jv(e,0),t.contentQueries!==null&&Pv(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&Hs(e,d)}else{let d=t.contentHooks;d!==null&&Ws(e,d,1),Vl(e,1)}zb(t,e);let l=t.components;l!==null&&Bv(e,l,0);let u=t.viewQuery;if(u!==null&&gu(2,u,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&Hs(e,d)}else{let d=t.viewHooks;d!==null&&Ws(e,d,2),Vl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ll]){for(let d of e[Ll])d();e[Ll]=null}o||(e[D]&=-73)}catch(c){throw Fi(e),c}finally{a!==null&&(zp(a,s),T0(a)),Gu()}}function N0(t){return t.type!==2}function jv(t,e){for(let n=iv(t);n!==null;n=ov(n))for(let r=qe;r<n.length;r++){let i=n[r];Uv(i,e)}}function R0(t){for(let e=iv(t);e!==null;e=ov(e)){if(!(e[D]&Vu.HasTransplantedViews))continue;let n=e[Xs];for(let r=0;r<n.length;r++){let i=n[r],o=i[Ee];TD(i)}}}function x0(t,e,n){let r=cn(e,t);Uv(r,n)}function Uv(t,e){Uu(t)&&mu(t,e)}function mu(t,e){let r=t[B],i=t[D],o=t[xn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&dl(o)),o&&(o.dirty=!1),t[D]&=-9217,s)M0(r,t,r.template,t[ut]);else if(i&8192){jv(t,1);let a=r.components;a!==null&&Bv(t,a,1)}}function Bv(t,e,n){for(let r=0;r<e.length;r++)x0(t,e[r],n)}function ud(t){for(t[dt].changeDetectionScheduler?.notify();t;){t[D]|=64;let e=Li(t);if(mD(t)&&!e)return t;t=e}return null}var Ln=class{get rootNodes(){let e=this._lView,n=e[B];return sa(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ut]}set context(e){this._lView[ut]=e}get destroyed(){return(this._lView[D]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ee];if(zt(e)){let n=e[Js],r=n?n.indexOf(this):-1;r>-1&&(hu(e,r),Ks(n,r))}this._attachedToViewContainer=!1}mv(this._lView[B],this._lView)}onDestroy(e){xm(this._lView,e)}markForCheck(){ud(this._cdRefInjectingView||this._lView)}detach(){this._lView[D]&=-129}reattach(){iu(this._lView),this._lView[D]|=128}detectChanges(){this._lView[D]|=1024,Vv(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new C(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,pv(this._lView[B],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new C(902,!1);this._appRef=e,iu(this._lView)}},dd=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=k0;let t=e;return t})(),O0=dd,P0=class extends O0{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=w0(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ln(i)}};function k0(){return $v(Je(),ie())}function $v(t,e){return t.type&4?new P0(e,t,_a(t,e)):null}var pB=new RegExp(`^(\\d+)*(${vb}|${mb})*(.*)`);var F0=()=>null;function Bg(t,e){return F0(t,e)}var vu=class{},yu=class{},aa=class{};function L0(t){let e=Error(`No component factory found for ${Se(t)}.`);return e[V0]=t,e}var V0="ngComponent";var _u=class{resolveComponentFactory(e){throw L0(e)}},ba=(()=>{let e=class e{};e.NULL=new _u;let t=e;return t})(),Vi=class{},un=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>j0();let t=e;return t})();function j0(){let t=ie(),e=Je(),n=cn(e.index,t);return(Mn(n)?n:t)[ge]}var U0=(()=>{let e=class e{};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Hl={};var $g=new Set;function Hv(t){$g.has(t)||($g.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Hg(...t){}function B0(){let t=typeof Mi.requestAnimationFrame=="function",e=Mi[t?"requestAnimationFrame":"setTimeout"],n=Mi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var te=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Te(!1),this.onMicrotaskEmpty=new Te(!1),this.onStable=new Te(!1),this.onError=new Te(!1),typeof Zone>"u")throw new C(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=B0().nativeRequestAnimationFrame,W0(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new C(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new C(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,$0,Hg,Hg);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},$0={};function hd(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function H0(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Iu(t),t.isCheckStableRunning=!0,hd(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Iu(t))}function W0(t){let e=()=>{H0(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(z0(a))return n.invokeTask(i,o,s,a);try{return Wg(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),zg(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return Wg(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),zg(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Iu(t),hd(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Iu(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Wg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function zg(t){t._nesting--,hd(t)}function z0(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Wv=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function wu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=yg(i,a);else if(o==2){let c=a,l=e[++s];r=yg(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ca=class extends ba{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Rn(e);return new ji(n,this.ngModule)}};function Gg(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function G0(t){let e=t.toLowerCase();return e==="svg"?ID:e==="math"?wD:null}var Eu=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=pa(r);let i=this.injector.get(e,Hl,r);return i!==Hl||n===Hl?i:this.parentInjector.get(e,n,r)}},ji=class extends aa{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Gg(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Gg(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=JC(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=G(null);try{i=i||this.ngModule;let s=i instanceof Ke?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Eu(e,s):e,c=a.get(Vi,null);if(c===null)throw new C(407,!1);let l=a.get(U0,null),u=a.get(Wv,null),d=a.get(vu,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",v=r?Yb(f,r,this.componentDef.encapsulation,a):fv(f,p,G0(p)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let x=null;v!==null&&(x=td(v,a,!0));let _e=ad(0,null,null,1,0,null,null,null,null,null,null),oe=Ea(null,_e,null,S,null,null,h,f,a,null,x);zu(oe);let Re,Ft;try{let De=this.componentDef,Lt,Di=null;De.findHostDirectiveDefs?(Lt=[],Di=new Map,De.findHostDirectiveDefs(De,Lt,Di),Lt.push(De)):Lt=[De];let bi=q0(oe,v),ll=Y0(bi,v,De,Lt,oe,h,f);Ft=Nm(_e,Ut),v&&Z0(f,De,v,r),n!==void 0&&J0(Ft,this.ngContentSelectors,n),Re=Q0(ll,De,Lt,Di,oe,[X0]),ld(_e,oe,null)}finally{Gu()}return new Cu(this.componentType,Re,_a(Ft,oe),oe,Ft)}finally{G(o)}}},Cu=class extends yu{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ln(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;cd(o[B],o,i,e,n),this.previousInputValues.set(e,n);let s=cn(this._tNode.index,o);ud(s)}}get injector(){return new Nn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function q0(t,e){let n=t[B],r=Ut;return t[r]=e,Ca(n,r,2,"#host",null)}function Y0(t,e,n,r,i,o,s){let a=i[B];K0(r,t,e,s);let c=null;e!==null&&(c=td(e,i[Fr]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ea(i,Av(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&pu(a,t,r.length-1),Da(i,d),i[t.index]=d}function K0(t,e,n,r){for(let i of t)e.mergedAttrs=xi(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(wu(e,e.mergedAttrs,!0),n!==null&&Iv(r,n,e))}function Q0(t,e,n,r,i,o){let s=Je(),a=i[B],c=Qe(s,i);Rv(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=Vr(i,a,d,s);Fn(h,i)}xv(a,i,s),c&&Fn(c,i);let l=Vr(i,a,s.directiveStart+s.componentOffset,s);if(t[ut]=i[ut]=l,o!==null)for(let u of o)u(l,e);return bv(a,s,i),l}function Z0(t,e,n,r){if(r)Xl(t,n,["ng-version","17.3.9"]);else{let{attrs:i,classes:o}=XC(e.selectors[0]);i&&Xl(t,n,i),o&&o.length>0&&_v(t,n,o.join(" "))}}function J0(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function X0(){let t=Je();Qu(ie()[B],t)}var zi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=eT;let t=e;return t})();function eT(){let t=Je();return nT(t,ie())}var tT=zi,zv=class extends tT{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return _a(this._hostTNode,this._hostLView)}get injector(){return new Nn(this._hostTNode,this._hostLView)}get parentInjector(){let e=Zu(this._hostTNode,this._hostLView);if(Wm(e)){let n=na(e,this._hostLView),r=ta(e),i=n[B].data[r+8];return new Nn(i,n)}else return new Nn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=qg(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-qe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Bg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Ug(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!gD(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?e:new ji(Rn(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let v=(s?l:this.parentInjector).get(Ke,null);v&&(o=v)}let u=Rn(c.componentType??{}),d=Bg(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,o);return this.insertImpl(f.hostView,a,Ug(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(bD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ee],l=new zv(c,c[ht],c[Ee]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return E0(s,i,o,r),e.attachToViewContainerRef(),am(Wl(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=qg(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=hu(this._lContainer,n);r&&(Ks(Wl(this._lContainer),n),mv(r[B],r))}detach(e){let n=this._adjustIndex(e,-1),r=hu(this._lContainer,n);return r&&Ks(Wl(this._lContainer),n)!=null?new Ln(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function qg(t){return t[Js]}function Wl(t){return t[Js]||(t[Js]=[])}function nT(t,e){let n,r=e[t.index];return zt(r)?n=r:(n=Ov(r,e,null,t),e[t.index]=n,Da(e,n)),iT(n,e,t,r),new zv(n,t,e)}function rT(t,e){let n=t[ge],r=n.createComment(""),i=Qe(e,t),o=id(n,i);return oa(n,o,r,Fb(n,i),!1),r}var iT=aT,oT=()=>!1;function sT(t,e,n){return oT(t,e,n)}function aT(t,e,n,r){if(t[On])return;let i;n.type&8?i=Et(r):i=rT(e,n),t[On]=i}function cT(t){return Object.getPrototypeOf(t.prototype).constructor}function dn(t){let e=cT(t.type),n=!0,r=[t];for(;e;){let i;if(on(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new C(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Us(t.inputs),s.inputTransforms=Us(t.inputTransforms),s.declaredInputs=Us(t.declaredInputs),s.outputs=Us(t.outputs);let a=i.hostBindings;a&&fT(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&dT(t,c),l&&hT(t,l),lT(t,i),yC(t.outputs,i.outputs),on(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===dn&&(n=!1)}}e=Object.getPrototypeOf(e)}uT(r)}function lT(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function uT(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xi(i.hostAttrs,n=xi(n,i.hostAttrs))}}function Us(t){return t===Or?{}:t===Ge?[]:t}function dT(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function hT(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function fT(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var sn=class{},Ui=class{};var Du=class extends sn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ca(this);let i=gm(e);this._bootstrapComponents=hv(i.bootstrap),this._r3Injector=Xm(e,n,[{provide:sn,useValue:this},{provide:ba,useValue:this.componentFactoryResolver},...r],Se(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bu=class extends Ui{constructor(e){super(),this.moduleType=e}create(e){return new Du(this.moduleType,e,[])}};var la=class extends sn{constructor(e){super(),this.componentFactoryResolver=new ca(this),this.instance=null;let n=new Oi([...e.providers,{provide:sn,useValue:this},{provide:ba,useValue:this.componentFactoryResolver}],e.parent||Lu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function fd(t,e,n=null){return new la({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ta=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ie(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Sa(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function pT(t){return(t.flags&32)===32}function gT(t,e,n,r,i,o,s,a,c){let l=e.consts,u=Ca(e,t,4,s||null,ea(l,a));Nv(e,n,u,ea(l,c)),Qu(e,u);let d=u.tView=ad(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Aa(t,e,n,r,i,o,s,a){let c=ie(),l=Ze(),u=t+Ut,d=l.firstCreatePass?gT(u,l,c,e,n,r,i,o,s):l.data[u];Wi(d,!1);let h=mT(l,c,d,t);Yu()&&od(l,c,h,d),Fn(h,c);let f=Ov(h,c,h,d);return c[u]=f,Da(c,f),sT(f,d,c),ju(d)&&Tv(l,c,d),s!=null&&Sv(c,d,a),Aa}var mT=vT;function vT(t,e,n,r){return Ku(!0),e[ge].createComment("")}function Gi(t,e,n,r){let i=ie(),o=Wu();if(Sa(i,o,e)){let s=Ze(),a=qu();d0(a,i,t,e,n,r)}return Gi}function Gv(t,e,n,r){return Sa(t,Wu(),n)?e+fa(n)+r:Wn}function Bs(t,e){return t<<17|e<<2}function Vn(t){return t>>17&32767}function yT(t){return(t&2)==2}function _T(t,e){return t&131071|e<<17}function Tu(t){return t|2}function jr(t){return(t&131068)>>2}function zl(t,e){return t&-131069|e<<2}function IT(t){return(t&1)===1}function Su(t){return t|1}function wT(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Vn(s),c=jr(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Hi(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=Vn(t[a+1]);t[r+1]=Bs(h,a),h!==0&&(t[h+1]=zl(t[h+1],r)),t[a+1]=_T(t[a+1],r)}else t[r+1]=Bs(a,0),a!==0&&(t[a+1]=zl(t[a+1],r)),a=r;else t[r+1]=Bs(c,0),a===0?a=r:t[c+1]=zl(t[c+1],r),c=r;l&&(t[r+1]=Tu(t[r+1])),Yg(t,u,r,!0),Yg(t,u,r,!1),ET(e,u,t,r,o),s=Bs(a,c),o?e.classBindings=s:e.styleBindings=s}function ET(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Hi(o,e)>=0&&(n[r+1]=Su(n[r+1]))}function Yg(t,e,n,r){let i=t[n+1],o=e===null,s=r?Vn(i):jr(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];CT(c,e)&&(a=!0,t[s+1]=r?Su(l):Tu(l)),s=r?Vn(l):jr(l)}a&&(t[n+1]=r?Tu(i):Su(i))}function CT(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Hi(t,e)>=0:!1}function Hr(t,e,n){let r=ie(),i=Wu();if(Sa(r,i,e)){let o=Ze(),s=qu();Mv(o,s,r,t,e,r[ge],n,!1)}return Hr}function Kg(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";cd(t,n,o[s],s,r)}function pd(t,e){return DT(t,e,null,!0),pd}function DT(t,e,n,r){let i=ie(),o=Ze(),s=jD(2);if(o.firstUpdatePass&&TT(o,t,s,r),e!==Wn&&Sa(i,s,e)){let a=o.data[$r()];RT(o,a,i,i[ge],t,i[s+1]=xT(e,n),r,s)}}function bT(t,e){return e>=t.expandoStartIndex}function TT(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[$r()],s=bT(t,n);OT(o,r)&&e===null&&!s&&(e=!1),e=ST(i,o,e,r),wT(i,o,e,n,s,r)}}function ST(t,e,n,r){let i=HD(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Gl(null,t,e,n,r),n=Bi(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Gl(i,t,e,n,r),o===null){let c=AT(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Gl(null,t,e,c[1],r),c=Bi(c,e.attrs,r),MT(t,e,r,c))}else o=NT(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function AT(t,e,n){let r=n?e.classBindings:e.styleBindings;if(jr(r)!==0)return t[Vn(r)]}function MT(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Vn(i)]=r}function NT(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Bi(r,s,n)}return Bi(r,e.attrs,n)}function Gl(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Bi(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Bi(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),jC(t,s,n?!0:e[++o]))}return t===void 0?null:t}function RT(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=IT(l)?Qg(c,e,n,i,jr(l),s):void 0;if(!ua(u)){ua(o)||yT(l)&&(o=Qg(c,null,n,i,a,s));let d=Mm($r(),n);Hb(r,s,d,i,o)}}function Qg(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===Wn&&(h=d?Ge:void 0);let f=d?kl(h,r):u===r?h:void 0;if(l&&!ua(f)&&(f=kl(c,r)),ua(f)&&(a=f,s))return a;let p=t[i+1];i=s?Vn(p):jr(p)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=kl(c,r))}return a}function ua(t){return t!==void 0}function xT(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Se(Ia(t)))),t}function OT(t,e){return(t.flags&(e?8:16))!==0}function PT(t,e,n,r,i,o){let s=e.consts,a=ea(s,i),c=Ca(e,t,2,r,a);return Nv(e,n,c,ea(s,o)),c.attrs!==null&&wu(c,c.attrs,!1),c.mergedAttrs!==null&&wu(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function w(t,e,n,r){let i=ie(),o=Ze(),s=Ut+t,a=i[ge],c=o.firstCreatePass?PT(s,o,i,e,n,r):o.data[s],l=kT(o,i,c,a,e,t);i[s]=l;let u=ju(c);return Wi(c,!0),Iv(a,l,c),!pT(c)&&Yu()&&od(o,i,l,c),MD()===0&&Fn(l,i),ND(),u&&(Tv(o,i,c),bv(o,c,i)),r!==null&&Sv(i,c),w}function E(){let t=Je();km()?FD():(t=t.parent,Wi(t,!1));let e=t;OD(e)&&PD(),RD();let n=Ze();return n.firstCreatePass&&(Qu(n,t),Dm(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&QD(e)&&Kg(n,e,ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ZD(e)&&Kg(n,e,ie(),e.stylesWithoutHost,!1),E}function re(t,e,n,r){return w(t,e,n,r),E(),re}var kT=(t,e,n,r,i,o)=>(Ku(!0),fv(r,i,GD()));function gd(){return ie()}var da="en-US";var FT=da;function LT(t){typeof t=="string"&&(FT=t.toLowerCase().replace(/_/g,"-"))}function Ae(t,e,n,r){let i=ie(),o=Ze(),s=Je();return jT(o,i,i[ge],s,t,e,r),Ae}function VT(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Pi],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function jT(t,e,n,r,i,o,s){let a=ju(r),l=t.firstCreatePass&&m0(t),u=e[ut],d=g0(e),h=!0;if(r.type&3||s){let v=Qe(r,e),S=s?s(v):v,x=d.length,_e=s?Re=>s(Et(Re[r.index])):r.index,oe=null;if(!s&&a&&(oe=VT(t,e,i,r.index)),oe!==null){let Re=oe.__ngLastListenerFn__||oe;Re.__ngNextListenerFn__=o,oe.__ngLastListenerFn__=o,h=!1}else{o=Jg(r,e,u,o,!1);let Re=n.listen(S,i,o);d.push(o,Re),l&&l.push(i,_e,x,x+1)}}else o=Jg(r,e,u,o,!1);let f=r.outputs,p;if(h&&f!==null&&(p=f[i])){let v=p.length;if(v)for(let S=0;S<v;S+=2){let x=p[S],_e=p[S+1],Ft=e[x][_e].subscribe(o),De=d.length;d.push(o,Ft),l&&l.push(i,r.index,De,-(De+1))}}}function Zg(t,e,n,r){let i=G(null);try{return yt(6,e,n),n(r)!==!1}catch(o){return kv(t,o),!1}finally{yt(7,e,n),G(i)}}function Jg(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?cn(t.index,e):e;ud(a);let c=Zg(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=Zg(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function qi(t=1){return zD(t)}function bt(t,e,n){return qv(t,"",e,"",n),bt}function qv(t,e,n,r,i){let o=ie(),s=Gv(o,e,n,r);if(s!==Wn){let a=Ze(),c=qu();Mv(a,c,o,t,s,o[ge],i,!1)}return qv}function Yi(t){let e=LD();return DD(e,Ut+t)}function W(t,e=""){let n=ie(),r=Ze(),i=t+Ut,o=r.firstCreatePass?Ca(r,i,1,e,null):r.data[i],s=UT(r,n,o,e,t);n[i]=s,Yu()&&od(r,n,s,o),Wi(o,!1)}var UT=(t,e,n,r,i)=>(Ku(!0),Db(e[ge],r));function fe(t){return Ma("",t,""),fe}function Ma(t,e,n){let r=ie(),i=Gv(r,t,e,n);return i!==Wn&&v0(r,$r(),i),Ma}function BT(t,e,n){let r=Ze();if(r.firstCreatePass){let i=on(t);Au(n,r.data,r.blueprint,i,!0),Au(e,r.data,r.blueprint,i,!1)}}function Au(t,e,n,r,i){if(t=be(t),Array.isArray(t))for(let o=0;o<t.length;o++)Au(t[o],e,n,r,i);else{let o=Ze(),s=ie(),a=Je(),c=kr(t)?t:be(t.provide),l=wm(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(kr(t)||!t.multi){let f=new kn(l,i,T),p=Yl(c,e,i?u:u+h,d);p===-1?(au(ra(a,s),o,c),ql(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{let f=Yl(c,e,u+h,d),p=Yl(c,e,u,u+h),v=f>=0&&n[f],S=p>=0&&n[p];if(i&&!S||!i&&!v){au(ra(a,s),o,c);let x=WT(i?HT:$T,n.length,i,r,l);!i&&S&&(n[p].providerFactory=x),ql(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),s.push(x)}else{let x=Yv(n[i?p:f],l,!i&&r);ql(o,t,f>-1?f:p,x)}!i&&r&&S&&n[p].componentProviders++}}}function ql(t,e,n,r){let i=kr(e),o=aD(e);if(i||o){let c=(o?be(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Yv(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Yl(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function $T(t,e,n,r){return Mu(this.multi,[])}function HT(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Vr(n,n[B],this.providerFactory.index,r);o=a.slice(0,s),Mu(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Mu(i,o);return o}function Mu(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function WT(t,e,n,r,i){let o=new kn(t,n,T);return o.multi=[],o.index=e,o.componentProviders=0,Yv(o,i,r&&!n),o}function Ki(t,e=[]){return n=>{n.providersResolver=(r,i)=>BT(r,i?i(t):t,e)}}var zT=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=ym(!1,r.type),o=i.length>0?fd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=I({token:e,providedIn:"environment",factory:()=>new e(O(Ke))});let t=e;return t})();function ke(t){Hv("NgStandalone"),t.getStandaloneInjector=e=>e.get(zT).getOrCreateStandaloneInjector(t)}function Qi(t,e){return $v(t,e)}var Ht=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Kv=new Ht("17.3.9"),Na=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Qv=new b("");function zn(t){return!!t&&typeof t.then=="function"}function Zv(t){return!!t&&typeof t.subscribe=="function"}var Jv=new b(""),Xv=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=_(Jv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(zn(s))r.push(s);else if(Zv(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),md=new b("");function GT(){qp(()=>{throw new C(600,!1)})}function qT(t){return t.isBoundToModule}function YT(t,e,n){try{let r=n();return zn(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Zi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_(ev),this.afterRenderEffectManager=_(Wv),this.externalTestViews=new Set,this.beforeRender=new Q,this.afterTick=new Q,this.componentTypes=[],this.components=[],this.isStable=_(Ta).hasPendingTasks.pipe(U(r=>!r)),this._injector=_(Ke)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof aa;if(!this._injector.get(Xv).done){let f=!o&&pm(r),p=!1;throw new C(405,p)}let a;o?a=r:a=this._injector.get(ba).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=qT(a)?void 0:this._injector.get(sn),l=i||a.selector,u=a.create(Dt.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(Qv,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Kl(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new C(101,!1);let i=G(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,G(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===Lv)throw new C(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)KT(a,s,c)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Nu(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Nu(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Kl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(md,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Kl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new C(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Kl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function KT(t,e,n){!e&&!Nu(t)||QT(t,n,e)}function Nu(t){return Bu(t)}function QT(t,e,n){let r;n?(r=0,t[D]|=1024):t[D]&64?r=0:r=1,Vv(t,e,r)}var Ru=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},vd=(()=>{let e=class e{compileModuleSync(r){return new bu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=gm(r),s=hv(o.declarations).reduce((a,c)=>{let l=Rn(c);return l&&a.push(new ji(l)),a},[]);return new Ru(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ZT=(()=>{let e=class e{constructor(){this.zone=_(te),this.applicationRef=_(Zi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function JT(t){return[{provide:te,useFactory:t},{provide:Pr,multi:!0,useFactory:()=>{let e=_(ZT,{optional:!0});return()=>e.initialize()}},{provide:Pr,multi:!0,useFactory:()=>{let e=_(nS);return()=>{e.initialize()}}},{provide:ev,useFactory:XT}]}function XT(){let t=_(te),e=_(Bt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function eS(t){let e=JT(()=>new te(tS(t)));return an([[],e])}function tS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var nS=(()=>{let e=class e{constructor(){this.subscription=new ae,this.initialized=!1,this.zone=_(te),this.pendingTasks=_(Ta)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{te.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{te.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rS(){return typeof $localize<"u"&&$localize.locale||da}var yd=new b("",{providedIn:"root",factory:()=>_(yd,P.Optional|P.SkipSelf)||rS()});var ey=new b("");var Gs=null;function iS(t=[],e){return Dt.create({name:e,providers:[{provide:ga,useValue:"platform"},{provide:ey,useValue:new Set([()=>Gs=null])},...t]})}function oS(t=[]){if(Gs)return Gs;let e=iS(t);return Gs=e,GT(),sS(e),e}function sS(t){t.get(Xu,null)?.forEach(n=>n())}var Wr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=aS;let t=e;return t})();function aS(t){return cS(Je(),ie(),(t&16)===16)}function cS(t,e,n){if(ya(t)&&!n){let r=cn(t.index,e);return new Ln(r,r)}else if(t.type&47){let r=e[wt];return new Ln(r,e)}return null}function ty(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=oS(r),o=[eS(),...n||[]],a=new la({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(te);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(Bt,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=i.get(ey);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),YT(l,c,()=>{let f=a.get(Xv);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(yd,da);LT(p||da);let v=a.get(Zi);return e!==void 0&&v.bootstrap(e),v})})})}catch(e){return Promise.reject(e)}}var sy=null;function Yt(){return sy}function ay(t){sy??=t}var Ra=class{};var Xe=new b(""),cy=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(dS),providedIn:"platform"});let t=e;return t})();var dS=(()=>{let e=class e extends cy{constructor(){super(),this._doc=_(Xe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yt().getBaseHref(this._doc)}onPopState(r){let i=Yt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Yt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function ly(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function ny(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Gn(t){return t&&t[0]!=="?"?"?"+t:t}var Oa=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(uy),providedIn:"root"});let t=e;return t})(),hS=new b(""),uy=(()=>{let e=class e extends Oa{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??_(Xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return ly(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Gn(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Gn(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Gn(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(O(cy),O(hS,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ji=(()=>{let e=class e{constructor(r){this._subject=new Te,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=gS(ny(ry(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Gn(i))}normalize(r){return e.stripTrailingSlash(pS(this._basePath,ry(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Gn(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Gn(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Gn,e.joinWithSlash=ly,e.stripTrailingSlash=ny,e.\u0275fac=function(i){return new(i||e)(O(Oa))},e.\u0275prov=I({token:e,factory:()=>fS(),providedIn:"root"});let t=e;return t})();function fS(){return new Ji(O(Oa))}function pS(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ry(t){return t.replace(/\/index.html$/,"")}function gS(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function dy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var hy=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new _d,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){iy("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){iy("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(T(zi),T(dd))},e.\u0275dir=Pe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),_d=class{constructor(){this.$implicit=null,this.ngIf=null}};function iy(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Se(e)}'.`)}var Xi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Bn({type:e}),e.\u0275inj=Un({});let t=e;return t})(),fy="browser",mS="server";function Id(t){return t===mS}var xa=class{};var Cd=class extends Ra{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dd=class t extends Cd{static makeCurrent(){ay(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=yS();return n==null?null:_S(n)}resetBaseElement(){eo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dy(document.cookie,e)}},eo=null;function yS(){return eo=eo||document.querySelector("base"),eo?eo.getAttribute("href"):null}function _S(t){return new URL(t,document.baseURI).pathname}var IS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),bd=new b(""),vy=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new C(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(O(bd),O(te))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Pa=class{constructor(e){this._doc=e}},wd="ng-app-id",yy=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Id(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${wd}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(wd),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(wd,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(O(Xe),O(Ju),O(ed,8),O(ln))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Ed={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Sd=/%COMP%/g,_y="%COMP%",wS=`_nghost-${_y}`,ES=`_ngcontent-${_y}`,CS=!0,DS=new b("",{providedIn:"root",factory:()=>CS});function bS(t){return ES.replace(Sd,t)}function TS(t){return wS.replace(Sd,t)}function Iy(t,e){return e.map(n=>n.replace(Sd,t))}var py=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Id(c),this.defaultRenderer=new to(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===It.ShadowDom&&(i=X(y({},i),{encapsulation:It.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof ka?o.applyToHost(r):o instanceof no&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case It.Emulated:s=new ka(l,u,i,this.appId,d,a,c,h);break;case It.ShadowDom:return new Td(l,u,r,i,a,c,this.nonce,h);default:s=new no(l,u,i,d,a,c,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(O(vy),O(yy),O(Ju),O(DS),O(Xe),O(ln),O(te),O(ed))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),to=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ed[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(gy(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(gy(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new C(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Ed[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Ed[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&($t.DashCase|$t.Important)?e.style.setProperty(n,r,i&$t.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&$t.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Yt().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function gy(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Td=class extends to{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Iy(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},no=class extends to{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Iy(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ka=class extends no{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=bS(l),this.hostAttr=TS(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},SS=(()=>{let e=class e extends Pa{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(O(Xe))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),my=["alt","control","meta","shift"],AS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},MS={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},NS=(()=>{let e=class e extends Pa{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yt().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),my.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=AS[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),my.forEach(a=>{if(a!==o){let c=MS[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(O(Xe))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function wy(t,e){return ty(y({rootComponent:t},RS(e)))}function RS(t){return{appProviders:[...FS,...t?.providers??[]],platformProviders:kS}}function xS(){Dd.makeCurrent()}function OS(){return new Bt}function PS(){return av(document),document}var kS=[{provide:ln,useValue:fy},{provide:Xu,useValue:xS,multi:!0},{provide:Xe,useFactory:PS,deps:[]}];var FS=[{provide:ga,useValue:"root"},{provide:Bt,useFactory:OS,deps:[]},{provide:bd,useClass:SS,multi:!0,deps:[Xe,te,ln]},{provide:bd,useClass:NS,multi:!0,deps:[Xe]},py,yy,vy,{provide:Vi,useExisting:py},{provide:xa,useClass:IS,deps:[]},[]];var Ey=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(O(Xe))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var R="primary",yo=Symbol("RouteTitle"),xd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Kr(t){return new xd(t)}function VS(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function jS(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Tt(t[n],e[n]))return!1;return!0}function Tt(t,e){let n=t?Od(t):void 0,r=e?Od(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ay(t[i],e[i]))return!1;return!0}function Od(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Ay(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function My(t){return t.length>0?t[t.length-1]:null}function pn(t){return Sl(t)?t:zn(t)?ce(Promise.resolve(t)):M(t)}var US={exact:Ry,subset:xy},Ny={exact:BS,subset:$S,ignored:()=>!0};function Cy(t,e,n){return US[n.paths](t.root,e.root,n.matrixParams)&&Ny[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function BS(t,e){return Tt(t,e)}function Ry(t,e,n){if(!Yn(t.segments,e.segments)||!Va(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Ry(t.children[r],e.children[r],n))return!1;return!0}function $S(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ay(t[n],e[n]))}function xy(t,e,n){return Oy(t,e,e.segments,n)}function Oy(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Yn(i,n)||e.hasChildren()||!Va(i,n,r))}else if(t.segments.length===n.length){if(!Yn(t.segments,n)||!Va(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!xy(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Yn(t.segments,i)||!Va(t.segments,i,r)||!t.children[R]?!1:Oy(t.children[R],e,o,r)}}function Va(t,e,n){return e.every((r,i)=>Ny[n](t[i].parameters,r.parameters))}var hn=class{constructor(e=new K([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Kr(this.queryParams),this._queryParamMap}toString(){return zS.serialize(this)}},K=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ja(this)}},qn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Kr(this.parameters),this._parameterMap}toString(){return ky(this)}};function HS(t,e){return Yn(t,e)&&t.every((n,r)=>Tt(n.parameters,e[r].parameters))}function Yn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function WS(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===R&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==R&&(n=n.concat(e(i,r)))}),n}var oh=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new Ba,providedIn:"root"});let t=e;return t})(),Ba=class{parse(e){let n=new kd(e);return new hn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ro(e.root,!0)}`,r=YS(e.queryParams),i=typeof e.fragment=="string"?`#${GS(e.fragment)}`:"";return`${n}${r}${i}`}},zS=new Ba;function ja(t){return t.segments.map(e=>ky(e)).join("/")}function ro(t,e){if(!t.hasChildren())return ja(t);if(e){let n=t.children[R]?ro(t.children[R],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==R&&r.push(`${i}:${ro(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=WS(t,(r,i)=>i===R?[ro(t.children[R],!1)]:[`${i}:${ro(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[R]!=null?`${ja(t)}/${n[0]}`:`${ja(t)}/(${n.join("//")})`}}function Py(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fa(t){return Py(t).replace(/%3B/gi,";")}function GS(t){return encodeURI(t)}function Pd(t){return Py(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ua(t){return decodeURIComponent(t)}function Dy(t){return Ua(t.replace(/\+/g,"%20"))}function ky(t){return`${Pd(t.path)}${qS(t.parameters)}`}function qS(t){return Object.entries(t).map(([e,n])=>`;${Pd(e)}=${Pd(n)}`).join("")}function YS(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Fa(n)}=${Fa(i)}`).join("&"):`${Fa(n)}=${Fa(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var KS=/^[^\/()?;#]+/;function Ad(t){let e=t.match(KS);return e?e[0]:""}var QS=/^[^\/()?;=#]+/;function ZS(t){let e=t.match(QS);return e?e[0]:""}var JS=/^[^=?&#]+/;function XS(t){let e=t.match(JS);return e?e[0]:""}var eA=/^[^&#]+/;function tA(t){let e=t.match(eA);return e?e[0]:""}var kd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new K([],{}):new K([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[R]=new K(e,n)),r}parseSegment(){let e=Ad(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new C(4009,!1);return this.capture(e),new qn(Ua(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=ZS(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Ad(this.remaining);i&&(r=i,this.capture(r))}e[Ua(n)]=Ua(r)}parseQueryParam(e){let n=XS(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=tA(this.remaining);s&&(r=s,this.capture(r))}let i=Dy(n),o=Dy(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ad(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new C(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=R);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[R]:new K([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new C(4011,!1)}};function Fy(t){return t.segments.length>0?new K([],{[R]:t}):t}function Ly(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Ly(i);if(r===R&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new K(t.segments,e);return nA(n)}function nA(t){if(t.numberOfChildren===1&&t.children[R]){let e=t.children[R];return new K(t.segments.concat(e.segments),e.children)}return t}function Qr(t){return t instanceof hn}function rA(t,e,n=null,r=null){let i=Vy(t);return jy(i,e,n,r)}function Vy(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new K(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=Fy(r);return e??i}function jy(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Md(i,i,i,n,r);let o=iA(e);if(o.toRoot())return Md(i,i,new K([],{}),n,r);let s=oA(o,i,t),a=s.processChildren?so(s.segmentGroup,s.index,o.commands):By(s.segmentGroup,s.index,o.commands);return Md(i,s.segmentGroup,a,n,r)}function $a(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function lo(t){return typeof t=="object"&&t!=null&&t.outlets}function Md(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=Uy(t,e,n);let a=Fy(Ly(s));return new hn(a,o,i)}function Uy(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Uy(o,e,n)}),new K(t.segments,r)}var Ha=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&$a(r[0]))throw new C(4003,!1);let i=r.find(lo);if(i&&i!==My(r))throw new C(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iA(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ha(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ha(n,e,r)}var qr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function oA(t,e,n){if(t.isAbsolute)return new qr(e,!0,0);if(!n)return new qr(e,!1,NaN);if(n.parent===null)return new qr(n,!0,0);let r=$a(t.commands[0])?0:1,i=n.segments.length-1+r;return sA(n,i,t.numberOfDoubleDots)}function sA(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new C(4005,!1);i=r.segments.length}return new qr(r,!1,i-o)}function aA(t){return lo(t[0])?t[0].outlets:{[R]:t}}function By(t,e,n){if(t??=new K([],{}),t.segments.length===0&&t.hasChildren())return so(t,e,n);let r=cA(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new K(t.segments.slice(0,r.pathIndex),{});return o.children[R]=new K(t.segments.slice(r.pathIndex),t.children),so(o,0,i)}else return r.match&&i.length===0?new K(t.segments,{}):r.match&&!t.hasChildren()?Fd(t,e,n):r.match?so(t,0,i):Fd(t,e,n)}function so(t,e,n){if(n.length===0)return new K(t.segments,{});{let r=aA(n),i={};if(Object.keys(r).some(o=>o!==R)&&t.children[R]&&t.numberOfChildren===1&&t.children[R].segments.length===0){let o=so(t.children[R],e,n);return new K(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=By(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new K(t.segments,i)}}function cA(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(lo(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Ty(c,l,s))return o;r+=2}else{if(!Ty(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Fd(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(lo(o)){let c=lA(o.outlets);return new K(r,c)}if(i===0&&$a(n[0])){let c=t.segments[e];r.push(new qn(c.path,by(n[0]))),i++;continue}let s=lo(o)?o.outlets[R]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&$a(a)?(r.push(new qn(s,by(a))),i+=2):(r.push(new qn(s,{})),i++)}return new K(r,{})}function lA(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Fd(new K([],{}),0,r))}),e}function by(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Ty(t,e,n){return t==n.path&&Tt(e,n.parameters)}var ao="imperative",we=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(we||{}),et=class{constructor(e,n){this.id=e,this.url=n}},uo=class extends et{constructor(e,n,r="imperative",i=null){super(e,n),this.type=we.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kn=class extends et{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=we.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$e=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}($e||{}),Ld=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ld||{}),fn=class extends et{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=we.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qn=class extends et{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=we.NavigationSkipped}},ho=class extends et{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=we.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wa=class extends et{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vd=class extends et{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jd=class extends et{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=we.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ud=class extends et{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bd=class extends et{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$d=class{constructor(e){this.route=e,this.type=we.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hd=class{constructor(e){this.route=e,this.type=we.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Wd=class{constructor(e){this.snapshot=e,this.type=we.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zd=class{constructor(e){this.snapshot=e,this.type=we.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gd=class{constructor(e){this.snapshot=e,this.type=we.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qd=class{constructor(e){this.snapshot=e,this.type=we.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var fo=class{},po=class{constructor(e){this.url=e}};var Yd=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Qa,this.attachRef=null}},Qa=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Yd,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),za=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Kd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Kd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Qd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Qd(e,this._root).map(n=>n.value)}};function Kd(t,e){if(t===e.value)return e;for(let n of e.children){let r=Kd(t,n);if(r)return r}return null}function Qd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Qd(t,n);if(r.length)return r.unshift(e),r}return[]}var Be=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Gr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ga=class extends za{constructor(e,n){super(e),this.snapshot=n,ah(this,e)}toString(){return this.snapshot.toString()}};function $y(t){let e=uA(t),n=new Ie([new qn("",{})]),r=new Ie({}),i=new Ie({}),o=new Ie({}),s=new Ie(""),a=new Zr(n,r,o,s,i,R,t,e.root);return a.snapshot=e.root,new Ga(new Be(a,[]),e)}function uA(t){let e={},n={},r={},i="",o=new go([],e,r,i,n,R,t,null,{});return new qa("",new Be(o,[]))}var Zr=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(U(l=>l[yo]))??M(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(U(e=>Kr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(U(e=>Kr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function sh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:y(y({},e.params),t.params),data:y(y({},e.data),t.data),resolve:y(y(y(y({},t.data),e.data),i?.data),t._resolvedData)}:r={params:y({},t.params),data:y({},t.data),resolve:y(y({},t.data),t._resolvedData??{})},i&&Wy(i)&&(r.resolve[yo]=i.title),r}var go=class{get title(){return this.data?.[yo]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Kr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Kr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},qa=class extends za{constructor(e,n){super(n),this.url=e,ah(this,n)}toString(){return Hy(this._root)}};function ah(t,e){e.value._routerState=t,e.children.forEach(n=>ah(t,n))}function Hy(t){let e=t.children.length>0?` { ${t.children.map(Hy).join(", ")} } `:"";return`${t.value}${e}`}function Nd(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Tt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Tt(e.params,n.params)||t.paramsSubject.next(n.params),jS(e.url,n.url)||t.urlSubject.next(n.url),Tt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Zd(t,e){let n=Tt(t.params,e.params)&&HS(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Zd(t.parent,e.parent))}function Wy(t){return typeof t.title=="string"||t.title===null}var ch=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=R,this.activateEvents=new Te,this.deactivateEvents=new Te,this.attachEvents=new Te,this.detachEvents=new Te,this.parentContexts=_(Qa),this.location=_(zi),this.changeDetector=_(Wr),this.environmentInjector=_(Ke),this.inputBinder=_(lh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new C(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Jd(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Pe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Br]});let t=e;return t})(),Jd=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Zr?this.route:e===Qa?this.childContexts:this.parent.get(e,n)}},lh=new b("");function dA(t,e,n){let r=mo(t,e._root,n?n._root:void 0);return new Ga(r,e)}function mo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=hA(t,e,n);return new Be(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>mo(t,a)),s}}let r=fA(e.value),i=e.children.map(o=>mo(t,o));return new Be(r,i)}}function hA(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return mo(t,r,i);return mo(t,r)})}function fA(t){return new Zr(new Ie(t.url),new Ie(t.params),new Ie(t.queryParams),new Ie(t.fragment),new Ie(t.data),t.outlet,t.component,t)}var zy="ngNavigationCancelingError";function Gy(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Qr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=qy(!1,$e.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function qy(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[zy]=!0,n.cancellationCode=e,n}function pA(t){return Yy(t)&&Qr(t.url)}function Yy(t){return!!t&&t[zy]}var gA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Oe({type:e,selectors:[["ng-component"]],standalone:!0,features:[ke],decls:1,vars:0,template:function(i,o){i&1&&re(0,"router-outlet")},dependencies:[ch],encapsulation:2});let t=e;return t})();function mA(t,e){return t.providers&&!t._injector&&(t._injector=fd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function uh(t){let e=t.children&&t.children.map(uh),n=e?X(y({},t),{children:e}):y({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==R&&(n.component=gA),n}function St(t){return t.outlet||R}function vA(t,e){let n=t.filter(r=>St(r)===e);return n.push(...t.filter(r=>St(r)!==e)),n}function _o(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var yA=(t,e,n,r)=>U(i=>(new Xd(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Xd=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Nd(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Gr(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Gr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Gr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Gr(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new zd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Nd(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Nd(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=_o(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Ya=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Yr=class{constructor(e,n){this.component=e,this.route=n}};function _A(t,e,n){let r=t._root,i=e?e._root:null;return io(r,i,n,[r.value])}function IA(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Xr(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!tm(t)?t:e.get(t):r}function io(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Gr(e);return t.children.forEach(s=>{wA(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>co(a,n.getContext(s),i)),i}function wA(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=EA(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ya(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?io(t,e,a?a.children:null,r,i):io(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Yr(a.outlet.component,s))}else s&&co(e,a,i),i.canActivateChecks.push(new Ya(r)),o.component?io(t,null,a?a.children:null,r,i):io(t,null,n,r,i);return i}function EA(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Yn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Yn(t.url,e.url)||!Tt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zd(t,e)||!Tt(t.queryParams,e.queryParams);case"paramsChange":default:return!Zd(t,e)}}function co(t,e,n){let r=Gr(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?co(s,e.children.getContext(o),n):co(s,null,n):co(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Yr(e.outlet.component,i)):n.canDeactivateChecks.push(new Yr(null,i)):n.canDeactivateChecks.push(new Yr(null,i))}function Io(t){return typeof t=="function"}function CA(t){return typeof t=="boolean"}function DA(t){return t&&Io(t.canLoad)}function bA(t){return t&&Io(t.canActivate)}function TA(t){return t&&Io(t.canActivateChild)}function SA(t){return t&&Io(t.canDeactivate)}function AA(t){return t&&Io(t.canMatch)}function Ky(t){return t instanceof Vt||t?.name==="EmptyError"}var La=Symbol("INITIAL_VALUE");function Jr(){return at(t=>Fs(t.map(e=>e.pipe(jt(1),Ol(La)))).pipe(U(e=>{for(let n of e)if(n!==!0){if(n===La)return La;if(n===!1||n instanceof hn)return n}return!0}),st(e=>e!==La),jt(1)))}function MA(t,e){return de(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?M(X(y({},n),{guardsResult:!0})):NA(s,r,i,t).pipe(de(a=>a&&CA(a)?RA(r,o,t,e):M(a)),U(a=>X(y({},n),{guardsResult:a})))})}function NA(t,e,n,r){return ce(t).pipe(de(i=>FA(i.component,i.route,n,e,r)),vt(i=>i!==!0,!0))}function RA(t,e,n,r){return ce(e).pipe(br(i=>Dr(OA(i.route.parent,r),xA(i.route,r),kA(t,i.path,n),PA(t,i.route,n))),vt(i=>i!==!0,!0))}function xA(t,e){return t!==null&&e&&e(new Gd(t)),M(!0)}function OA(t,e){return t!==null&&e&&e(new Wd(t)),M(!0)}function PA(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return M(!0);let i=r.map(o=>Ls(()=>{let s=_o(e)??n,a=Xr(o,s),c=bA(a)?a.canActivate(e,t):$n(s,()=>a(e,t));return pn(c).pipe(vt())}));return M(i).pipe(Jr())}function kA(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>IA(s)).filter(s=>s!==null).map(s=>Ls(()=>{let a=s.guards.map(c=>{let l=_o(s.node)??n,u=Xr(c,l),d=TA(u)?u.canActivateChild(r,t):$n(l,()=>u(r,t));return pn(d).pipe(vt())});return M(a).pipe(Jr())}));return M(o).pipe(Jr())}function FA(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return M(!0);let s=o.map(a=>{let c=_o(e)??i,l=Xr(a,c),u=SA(l)?l.canDeactivate(t,e,n,r):$n(c,()=>l(t,e,n,r));return pn(u).pipe(vt())});return M(s).pipe(Jr())}function LA(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return M(!0);let o=i.map(s=>{let a=Xr(s,t),c=DA(a)?a.canLoad(e,n):$n(t,()=>a(e,n));return pn(c)});return M(o).pipe(Jr(),Qy(r))}function Qy(t){return _l(he(e=>{if(Qr(e))throw Gy(t,e)}),U(e=>e===!0))}function VA(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return M(!0);let o=i.map(s=>{let a=Xr(s,t),c=AA(a)?a.canMatch(e,n):$n(t,()=>a(e,n));return pn(c)});return M(o).pipe(Jr(),Qy(r))}var vo=class{constructor(e){this.segmentGroup=e||null}},Ka=class extends Error{constructor(e){super(),this.urlTree=e}};function zr(t){return Cr(new vo(t))}function jA(t){return Cr(new C(4e3,!1))}function UA(t){return Cr(qy(!1,$e.GuardRejected))}var eh=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return M(r);if(i.numberOfChildren>1||!i.children[R])return jA(e.redirectTo);i=i.children[R]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Ka(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new hn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new K(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new C(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},th={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BA(t,e,n,r,i){let o=dh(t,e,n);return o.matched?(r=mA(e,r),VA(r,e,n,i).pipe(U(s=>s===!0?o:y({},th)))):M(o)}function dh(t,e,n){if(e.path==="**")return $A(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?y({},th):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||VS)(n,t,e);if(!i)return y({},th);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?y(y({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function $A(t){return{matched:!0,parameters:t.length>0?My(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Sy(t,e,n,r){return n.length>0&&zA(t,n,r)?{segmentGroup:new K(e,WA(r,new K(n,t.children))),slicedSegments:[]}:n.length===0&&GA(t,n,r)?{segmentGroup:new K(t.segments,HA(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new K(t.segments,t.children),slicedSegments:n}}function HA(t,e,n,r){let i={};for(let o of n)if(Za(t,e,o)&&!r[St(o)]){let s=new K([],{});i[St(o)]=s}return y(y({},r),i)}function WA(t,e){let n={};n[R]=e;for(let r of t)if(r.path===""&&St(r)!==R){let i=new K([],{});n[St(r)]=i}return n}function zA(t,e,n){return n.some(r=>Za(t,e,r)&&St(r)!==R)}function GA(t,e,n){return n.some(r=>Za(t,e,r))}function Za(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function qA(t,e,n,r){return St(t)!==r&&(r===R||!Za(e,n,t))?!1:dh(e,t,n).matched}function YA(t,e,n){return e.length===0&&!t.children[n]}var nh=class{};function KA(t,e,n,r,i,o,s="emptyOnly"){return new rh(t,e,n,r,i,s,o).recognize()}var QA=31,rh=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new eh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new C(4002,`'${e.segmentGroup}'`)}recognize(){let e=Sy(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(U(n=>{let r=new go([],Object.freeze({}),Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,{},R,this.rootComponentType,null,{}),i=new Be(r,n),o=new qa("",i),s=rA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,R).pipe(en(r=>{if(r instanceof Ka)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof vo?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=sh(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(U(o=>o instanceof Be?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ce(i).pipe(br(o=>{let s=r.children[o],a=vA(n,o);return this.processSegmentGroup(e,a,s,o)}),xl((o,s)=>(o.push(...s),o)),tn(null),Rl(),de(o=>{if(o===null)return zr(r);let s=Zy(o);return ZA(s),M(s)}))}processSegment(e,n,r,i,o,s){return ce(n).pipe(br(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(en(c=>{if(c instanceof vo)return M(null);throw c}))),vt(a=>!!a),en(a=>{if(Ky(a))return YA(r,i,o)?M(new nh):zr(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return qA(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):zr(i):zr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=dh(n,i,o);if(!a)return zr(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>QA&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(de(h=>this.processSegment(e,r,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=BA(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(at(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(at(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new go(u,h,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,XA(r),St(r),r.component??r._loadedComponent??null,r,eM(r)),{segmentGroup:p,slicedSegments:v}=Sy(n,u,d,c);if(v.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(U(x=>x===null?null:new Be(f,x)));if(c.length===0&&v.length===0)return M(new Be(f,[]));let S=St(r)===o;return this.processSegment(l,c,p,v,S?R:o,!0).pipe(U(x=>new Be(f,x instanceof Be?[x]:[])))}))):zr(n)))}getChildConfig(e,n,r){return n.children?M({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?M({routes:n._loadedRoutes,injector:n._loadedInjector}):LA(e,n,r,this.urlSerializer).pipe(de(i=>i?this.configLoader.loadChildren(e,n).pipe(he(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):UA(n))):M({routes:[],injector:e})}};function ZA(t){t.sort((e,n)=>e.value.outlet===R?-1:n.value.outlet===R?1:e.value.outlet.localeCompare(n.value.outlet))}function JA(t){let e=t.value.routeConfig;return e&&e.path===""}function Zy(t){let e=[],n=new Set;for(let r of t){if(!JA(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Zy(r.children);e.push(new Be(r.value,i))}return e.filter(r=>!n.has(r))}function XA(t){return t.data||{}}function eM(t){return t.resolve||{}}function tM(t,e,n,r,i,o){return de(s=>KA(t,e,n,r,s.extractedUrl,i,o).pipe(U(({state:a,tree:c})=>X(y({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function nM(t,e){return de(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return M(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of Jy(c))s.add(l);let a=0;return ce(s).pipe(br(c=>o.has(c)?rM(c,r,t,e):(c.data=sh(c,c.parent,t).resolve,M(void 0))),he(()=>a++),Tr(1),de(c=>a===s.size?M(n):Ue))})}function Jy(t){let e=t.children.map(n=>Jy(n)).flat();return[t,...e]}function rM(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Wy(i)&&(o[yo]=i.title),iM(o,t,e,r).pipe(U(s=>(t._resolvedData=s,t.data=sh(t,t.parent,n).resolve,null)))}function iM(t,e,n,r){let i=Od(t);if(i.length===0)return M({});let o={};return ce(i).pipe(de(s=>oM(t[s],e,n,r).pipe(vt(),he(a=>{o[s]=a}))),Tr(1),Nl(o),en(s=>Ky(s)?Ue:Cr(s)))}function oM(t,e,n,r){let i=_o(e)??r,o=Xr(t,i),s=o.resolve?o.resolve(e,n):$n(i,()=>o(e,n));return pn(s)}function Rd(t){return at(e=>{let n=t(e);return n?ce(n).pipe(U(()=>e)):M(e)})}var Xy=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===R);return i}getResolvedTitleForRoute(r){return r.data[yo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(sM),providedIn:"root"});let t=e;return t})(),sM=(()=>{let e=class e extends Xy{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(O(Ey))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hh=new b("",{providedIn:"root",factory:()=>({})}),fh=new b(""),aM=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_(vd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return M(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=pn(r.loadComponent()).pipe(U(e_),he(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ai(()=>{this.componentLoaders.delete(r)})),o=new _r(i,()=>new Q).pipe(yr());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return M({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=cM(i,this.compiler,r,this.onLoadEndListener).pipe(Ai(()=>{this.childrenLoaders.delete(i)})),a=new _r(s,()=>new Q).pipe(yr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cM(t,e,n,r){return pn(t.loadChildren()).pipe(U(e_),de(i=>i instanceof Ui||Array.isArray(i)?M(i):ce(e.compileModuleAsync(i))),U(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(fh,[],{optional:!0,self:!0}).flat()),{routes:s.map(uh),injector:o}}))}function lM(t){return t&&typeof t=="object"&&"default"in t}function e_(t){return lM(t)?t.default:t}var ph=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(uM),providedIn:"root"});let t=e;return t})(),uM=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dM=new b("");var hM=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Q,this.transitionAbortSubject=new Q,this.configLoader=_(aM),this.environmentInjector=_(Ke),this.urlSerializer=_(oh),this.rootContexts=_(Qa),this.location=_(Ji),this.inputBindingEnabled=_(lh,{optional:!0})!==null,this.titleStrategy=_(Xy),this.options=_(hh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=_(ph),this.createViewTransition=_(dM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>M(void 0),this.rootComponentType=null;let r=o=>this.events.next(new $d(o)),i=o=>this.events.next(new Hd(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(X(y(y({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Ie({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ao,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(st(s=>s.id!==0),U(s=>X(y({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),at(s=>{let a=!1,c=!1;return M(s).pipe(at(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",$e.SupersededByNewNavigation),Ue;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?X(y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Qn(l.id,this.urlSerializer.serialize(l.rawUrl),h,Ld.IgnoredSameUrlNavigation)),l.resolve(null),Ue}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return M(l).pipe(at(h=>{let f=this.transitions?.getValue();return this.events.next(new uo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Ue:Promise.resolve(h)}),tM(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),he(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=X(y({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Wa(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:v,extras:S}=l,x=new uo(h,this.urlSerializer.serialize(f),p,v);this.events.next(x);let _e=$y(this.rootComponentType).snapshot;return this.currentTransition=s=X(y({},l),{targetSnapshot:_e,urlAfterRedirects:f,extras:X(y({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,M(s)}else{let h="";return this.events.next(new Qn(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Ld.IgnoredByUrlHandlingStrategy)),l.resolve(null),Ue}}),he(l=>{let u=new Vd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),U(l=>(this.currentTransition=s=X(y({},l),{guards:_A(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),MA(this.environmentInjector,l=>this.events.next(l)),he(l=>{if(s.guardsResult=l.guardsResult,Qr(l.guardsResult))throw Gy(this.urlSerializer,l.guardsResult);let u=new jd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),st(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",$e.GuardRejected),!1)),Rd(l=>{if(l.guards.canActivateChecks.length)return M(l).pipe(he(u=>{let d=new Ud(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),at(u=>{let d=!1;return M(u).pipe(nM(this.paramsInheritanceStrategy,this.environmentInjector),he({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",$e.NoDataFromResolver)}}))}),he(u=>{let d=new Bd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Rd(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(he(f=>{d.component=f}),U(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Fs(u(l.targetSnapshot.root)).pipe(tn(null),jt(1))}),Rd(()=>this.afterPreactivation()),at(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?ce(d).pipe(U(()=>s)):M(s)}),U(l=>{let u=dA(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=X(y({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),he(()=>{this.events.next(new fo)}),yA(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),jt(1),he({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Kn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Pl(this.transitionAbortSubject.pipe(he(l=>{throw l}))),Ai(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",$e.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),en(l=>{if(c=!0,Yy(l))this.events.next(new fn(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),pA(l)?this.events.next(new po(l.url)):s.resolve(!1);else{this.events.next(new ho(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return Ue}))}))}cancelNavigationTransition(r,i,o){let s=new fn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function fM(t){return t!==ao}var pM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(gM),providedIn:"root"});let t=e;return t})(),ih=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},gM=(()=>{let e=class e extends ih{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Hn(e)))(o||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),t_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>_(mM),providedIn:"root"});let t=e;return t})(),mM=(()=>{let e=class e extends t_{constructor(){super(...arguments),this.location=_(Ji),this.urlSerializer=_(oh),this.options=_(hh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=_(ph),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=$y(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof uo)this.stateMemento=this.createStateMemento();else if(r instanceof Qn)this.rawUrlTree=i.initialUrl;else if(r instanceof Wa){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof fo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof fn&&(r.code===$e.GuardRejected||r.code===$e.NoDataFromResolver)?this.restoreHistory(i):r instanceof ho?this.restoreHistory(i,!0):r instanceof Kn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=y(y({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=y(y({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Hn(e)))(o||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),oo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(oo||{});function vM(t,e){t.events.pipe(st(n=>n instanceof Kn||n instanceof fn||n instanceof ho||n instanceof Qn),U(n=>n instanceof Kn||n instanceof Qn?oo.COMPLETE:(n instanceof fn?n.code===$e.Redirect||n.code===$e.SupersededByNewNavigation:!1)?oo.REDIRECTING:oo.FAILED),st(n=>n!==oo.REDIRECTING),jt(1)).subscribe(()=>{e()})}function yM(t){throw t}var _M={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},IM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ei=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=_(Na),this.stateManager=_(t_),this.options=_(hh,{optional:!0})||{},this.pendingTasks=_(Ta),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=_(hM),this.urlSerializer=_(oh),this.location=_(Ji),this.urlHandlingStrategy=_(ph),this._events=new Q,this.errorHandler=this.options.errorHandler||yM,this.navigated=!1,this.routeReuseStrategy=_(pM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=_(fh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!_(lh,{optional:!0}),this.eventsSubscription=new ae,this.isNgZoneEnabled=_(te)instanceof te&&te.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof fn&&i.code!==$e.Redirect&&i.code!==$e.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Kn)this.navigated=!0;else if(i instanceof po){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||fM(o.source)};this.scheduleNavigation(a,ao,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}EM(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ao,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=y({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(uh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=y(y({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=Vy(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return jy(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Qr(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ao,null,i)}navigate(r,i={skipLocationChange:!1}){return wM(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=y({},_M):i===!1?o=y({},IM):o=i,Qr(r))return Cy(this.currentUrlTree,r,o);let s=this.parseUrl(r);return Cy(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return vM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wM(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new C(4008,!1)}function EM(t){return!(t instanceof fo)&&!(t instanceof po)}var CM=new b("");function n_(t,...e){return an([{provide:fh,multi:!0,useValue:t},[],{provide:Zr,useFactory:DM,deps:[ei]},{provide:md,multi:!0,useFactory:bM},e.map(n=>n.\u0275providers)])}function DM(t){return t.routerState.root}function bM(){let t=_(Dt);return e=>{let n=t.get(Zi);if(e!==n.components[0])return;let r=t.get(ei),i=t.get(TM);t.get(SM)===1&&r.initialNavigation(),t.get(AM,null,P.Optional)?.setUpPreloading(),t.get(CM,null,P.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var TM=new b("",{factory:()=>new Q}),SM=new b("",{providedIn:"root",factory:()=>1});var AM=new b("");var mh={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var g=function(t,e){if(!t)throw Zn(e)},Zn=function(t){return new Error("Firebase Database ("+mh.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var o_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},MM=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Xa={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,s||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new vh;let h=o<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},vh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_h=function(t){let e=o_(t);return Xa.encodeByteArray(e,!0)},wo=function(t){return _h(t).replace(/\./g,"")},Eo=function(t){try{return Xa.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function s_(t){return a_(void 0,t)}function a_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!NM(n)||(t[n]=a_(t[n],e[n]));return t}function NM(t){return t!=="__proto__"}function RM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var xM=()=>RM().__FIREBASE_DEFAULTS__,OM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Eo(t[1]);return e&&JSON.parse(e)},Ih=()=>{try{return xM()||OM()||PM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},c_=t=>{var e,n;return(n=(e=Ih())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},l_=t=>{let e=c_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wh=()=>{var t;return(t=Ih())===null||t===void 0?void 0:t.config},u_=t=>{var e;return(e=Ih())===null||e===void 0?void 0:e[`_${t}`]};var gn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function d_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wo(JSON.stringify(n)),wo(JSON.stringify(s)),""].join(".")}function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Co(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function h_(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ec(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mt(){return mh.NODE_CLIENT===!0||mh.NODE_ADMIN===!0}function f_(){try{return typeof indexedDB=="object"}catch{return!1}}function p_(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var kM="FirebaseError",At=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kM,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}},Kt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?FM(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new At(i,a,r)}};function FM(t,e){return t.replace(LM,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var LM=/\{\$([^}]+)}/g;function ti(t){return JSON.parse(t)}function ue(t){return JSON.stringify(t)}var g_=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=ti(Eo(o[0])||""),n=ti(Eo(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var m_=function(t){let e=g_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},v_=function(t){let e=g_(t).claims;return typeof e=="object"&&e.admin===!0};function Nt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function tc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Do(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function bo(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(i_(o)&&i_(s)){if(!bo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function i_(t){return t!==null&&typeof t=="object"}function To(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Ja=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function y_(t,e){let n=new yh(t,e);return n.subscribe.bind(n)}var yh=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gh),i.error===void 0&&(i.error=gh),i.complete===void 0&&(i.complete=gh);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function VM(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gh(){}function nc(t,e){return`${t} failed: ${e} argument `}var __=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,g(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},So=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var B$=4*60*60*1e3;function He(t){return t&&t._delegate?t._delegate:t}var tt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Xn="[DEFAULT]";var rc=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new gn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UM(e))try{this.getOrInitializeService({instanceIdentifier:Xn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Xn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Xn){return this.instances.has(e)}getOptions(e=Xn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xn){return this.component?this.component.multipleInstances?e:Xn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function jM(t){return t===Xn?void 0:t}function UM(t){return t.instantiationMode==="EAGER"}var Ao=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new rc(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var BM=[],Z=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Z||{}),$M={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},HM=Z.INFO,WM={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},zM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=WM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},mn=class{constructor(e){this.name=e,this._logLevel=HM,this._logHandler=zM,this._userLogHandler=null,BM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$M[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var GM=(t,e)=>e.some(n=>t instanceof n),I_,w_;function qM(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YM(){return w_||(w_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var E_=new WeakMap,Ch=new WeakMap,C_=new WeakMap,Eh=new WeakMap,bh=new WeakMap;function KM(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Rt(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&E_.set(n,t)}).catch(()=>{}),bh.set(e,t),e}function QM(t){if(Ch.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Ch.set(t,e)}var Dh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ch.get(t);if(e==="objectStoreNames")return t.objectStoreNames||C_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function D_(t){Dh=t(Dh)}function ZM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ic(this),e,...n);return C_.set(r,e.sort?e.sort():[e]),Rt(r)}:YM().includes(t)?function(...e){return t.apply(ic(this),e),Rt(E_.get(this))}:function(...e){return Rt(t.apply(ic(this),e))}}function JM(t){return typeof t=="function"?ZM(t):(t instanceof IDBTransaction&&QM(t),GM(t,qM())?new Proxy(t,Dh):t)}function Rt(t){if(t instanceof IDBRequest)return KM(t);if(Eh.has(t))return Eh.get(t);let e=JM(t);return e!==t&&(Eh.set(t,e),bh.set(e,t)),e}var ic=t=>bh.get(t);function T_(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Rt(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Rt(s.result),c.oldVersion,c.newVersion,Rt(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var XM=["get","getKey","getAll","getAllKeys","count"],eN=["put","add","delete","clear"],Th=new Map;function b_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Th.get(e))return Th.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=eN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||XM.includes(n)))return;let o=function(s,...a){return m(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Th.set(e,o),o}D_(t=>X(y({},t),{get:(e,n,r)=>b_(e,n)||t.get(e,n,r),has:(e,n)=>!!b_(e,n)||t.has(e,n)}));var Ah=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tN(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function tN(t){let e=t.getComponent();return e?.type==="VERSION"}var Mh="@firebase/app",S_="0.10.3";var er=new mn("@firebase/app"),nN="@firebase/app-compat",rN="@firebase/analytics-compat",iN="@firebase/analytics",oN="@firebase/app-check-compat",sN="@firebase/app-check",aN="@firebase/auth",cN="@firebase/auth-compat",lN="@firebase/database",uN="@firebase/database-compat",dN="@firebase/functions",hN="@firebase/functions-compat",fN="@firebase/installations",pN="@firebase/installations-compat",gN="@firebase/messaging",mN="@firebase/messaging-compat",vN="@firebase/performance",yN="@firebase/performance-compat",_N="@firebase/remote-config",IN="@firebase/remote-config-compat",wN="@firebase/storage",EN="@firebase/storage-compat",CN="@firebase/firestore",DN="@firebase/vertexai-preview",bN="@firebase/firestore-compat",TN="firebase",SN="10.12.0";var Nh="[DEFAULT]",AN={[Mh]:"fire-core",[nN]:"fire-core-compat",[iN]:"fire-analytics",[rN]:"fire-analytics-compat",[sN]:"fire-app-check",[oN]:"fire-app-check-compat",[aN]:"fire-auth",[cN]:"fire-auth-compat",[lN]:"fire-rtdb",[uN]:"fire-rtdb-compat",[dN]:"fire-fn",[hN]:"fire-fn-compat",[fN]:"fire-iid",[pN]:"fire-iid-compat",[gN]:"fire-fcm",[mN]:"fire-fcm-compat",[vN]:"fire-perf",[yN]:"fire-perf-compat",[_N]:"fire-rc",[IN]:"fire-rc-compat",[wN]:"fire-gcs",[EN]:"fire-gcs-compat",[CN]:"fire-fst",[bN]:"fire-fst-compat",[DN]:"fire-vertex","fire-js":"fire-js",[TN]:"fire-js-all"};var Mo=new Map,MN=new Map,Rh=new Map;function A_(t,e){try{t.container.addComponent(e)}catch(n){er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yn(t){let e=t.name;if(Rh.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;Rh.set(e,t);for(let n of Mo.values())A_(n,t);for(let n of MN.values())A_(n,t);return!0}function kh(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ni(t){return t.settings!==void 0}var NN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vn=new Kt("app","Firebase",NN);var xh=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}};var ri=SN;function Fh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Nh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw vn.create("bad-app-name",{appName:String(i)});if(n||(n=wh()),!n)throw vn.create("no-options");let o=Mo.get(i);if(o){if(bo(n,o.options)&&bo(r,o.config))return o;throw vn.create("duplicate-app",{appName:i})}let s=new Ao(i);for(let c of Rh.values())s.addComponent(c);let a=new xh(n,r,s);return Mo.set(i,a),a}function Ro(t=Nh){let e=Mo.get(t);if(!e&&t===Nh&&wh())return Fh();if(!e)throw vn.create("no-app",{appName:t});return e}function oc(){return Array.from(Mo.values())}function me(t,e,n){var r;let i=(r=AN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(a.join(" "));return}yn(new tt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var RN="firebase-heartbeat-database",xN=1,No="firebase-heartbeat-store",Sh=null;function x_(){return Sh||(Sh=T_(RN,xN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(No)}catch(n){console.warn(n)}}}}).catch(t=>{throw vn.create("idb-open",{originalErrorMessage:t.message})})),Sh}function ON(t){return m(this,null,function*(){try{let n=(yield x_()).transaction(No),r=yield n.objectStore(No).get(O_(t));return yield n.done,r}catch(e){if(e instanceof At)er.warn(e.message);else{let n=vn.create("idb-get",{originalErrorMessage:e?.message});er.warn(n.message)}}})}function M_(t,e){return m(this,null,function*(){try{let r=(yield x_()).transaction(No,"readwrite");yield r.objectStore(No).put(e,O_(t)),yield r.done}catch(n){if(n instanceof At)er.warn(n.message);else{let r=vn.create("idb-set",{originalErrorMessage:n?.message});er.warn(r.message)}}})}function O_(t){return`${t.name}!${t.options.appId}`}var PN=1024,kN=30*24*60*60*1e3,Oh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Ph(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=N_();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=kN}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return m(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=N_(),{heartbeatsToSend:r,unsentEntries:i}=FN(this._heartbeatsCache.heartbeats),o=wo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o})}};function N_(){return new Date().toISOString().substring(0,10)}function FN(t,e=PN){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),R_(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),R_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Ph=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return f_()?p_().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield ON(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return M_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return M_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function R_(t){return wo(JSON.stringify({version:2,heartbeats:t})).length}function LN(t){yn(new tt("platform-logger",e=>new Ah(e),"PRIVATE")),yn(new tt("heartbeat",e=>new Oh(e),"PRIVATE")),me(Mh,S_,t),me(Mh,S_,"esm2017"),me("fire-js","")}LN("");var VN="firebase",jN="10.12.0";me(VN,jN,"app");var oi=new Ht("ANGULARFIRE2_VERSION");function Vh(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Oo=(t,e)=>{let n=e?[e]:oc(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},xo=class{constructor(){return Oo(UN)}},UN="app-check";function ii(){}var sc=class{zone;delegate;constructor(e,n=bl){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Lh=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ii,{},ii,ii)),n.pipe(he({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Po=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new sc(Zone.current)),this.insideAngular=n.run(()=>new sc(Zone.current,Dl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(O(te))};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ac(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function BN(t){return ac().ngZone.runOutsideAngular(()=>t())}function tr(t){return ac().ngZone.run(()=>t())}function $N(t){return HN(ac())(t)}function HN(t){return function(n){return n=n.lift(new Lh(t.ngZone)),n.pipe(Xt(t.outsideAngular),Jt(t.insideAngular))}}var WN=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),tr(()=>t.apply(void 0,r))},nt=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=tr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ii,{},ii,ii))),r[o]=WN(r[o],n));let i=BN(()=>t.apply(this,r));if(!e)if(i instanceof $){let o=ac();return i.pipe(Xt(o.outsideAngular),Jt(o.insideAngular))}else return tr(()=>i);return i instanceof $?i.pipe($N):i instanceof Promise?tr(()=>new Promise((o,s)=>i.then(a=>tr(()=>o(a)),a=>tr(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:tr(()=>i)};var nr=class{constructor(e){return e}},ko=class{constructor(){return oc()}};function zN(t){return t&&t.length===1?t[0]:new nr(Ro())}var jh=new b("angularfire2._apps"),GN={provide:nr,useFactory:zN,deps:[[new Ct,jh]]},qN={provide:ko,deps:[[new Ct,jh]]};function YN(t){return(e,n)=>{let r=n.get(ln);me("angularfire",oi.full,"core"),me("angularfire",oi.full,"app"),me("angular",Kv.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new nr(i)}}function P_(t,...e){return an([GN,qN,{provide:jh,useFactory:YN(t),multi:!0,deps:[te,Dt,Po,...e]}])}var k_=nt(Fh,!0);function H_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var W_=H_,z_=new Kt("auth","Firebase",H_());var dc=new mn("@firebase/auth");function KN(t,...e){dc.logLevel<=Z.WARN&&dc.warn(`Auth (${ri}): ${t}`,...e)}function lc(t,...e){dc.logLevel<=Z.ERROR&&dc.error(`Auth (${ri}): ${t}`,...e)}function F_(t,...e){throw Zh(t,...e)}function Qh(t,...e){return Zh(t,...e)}function G_(t,e,n){let r=Object.assign(Object.assign({},W_()),{[e]:n});return new Kt("auth","Firebase",r).create(e,{appName:t.name})}function uc(t){return G_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zh(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return z_.create(t,...e)}function q(t,e,...n){if(!t)throw Zh(e,...n)}function Fo(t){let e="INTERNAL ASSERTION FAILED: "+t;throw lc(e),new Error(e)}function hc(t,e){t||Fo(e)}function QN(){return L_()==="http:"||L_()==="https:"}function L_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function ZN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QN()||h_()||"connection"in navigator)?navigator.onLine:!0}function JN(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ir=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,hc(n>e,"Short delay should be less than long delay!"),this.isMobile=Co()||ec()}get(){return ZN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function XN(t,e){hc(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var fc=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var eR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var tR=new ir(3e4,6e4);function q_(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function vc(o,s,a,c){return m(this,arguments,function*(t,e,n,r,i={}){return Y_(t,i,()=>m(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=To(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),fc.fetch()(K_(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function Y_(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},eR),e);try{let i=new $h(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw cc(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw cc(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw cc(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw cc(t,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw G_(t,u,l);F_(t,u)}}catch(i){if(i instanceof At)throw i;F_(t,"network-request-failed",{message:String(i)})}})}function K_(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?XN(t.config,i):`${t.config.apiScheme}://${i}`}var $h=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qh(this.auth,"network-request-failed")),tR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function cc(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Qh(t,e,r);return i.customData._tokenResponse=n,i}function nR(t,e){return m(this,null,function*(){return vc(t,"POST","/v1/accounts:delete",e)})}function Q_(t,e){return m(this,null,function*(){return vc(t,"POST","/v1/accounts:lookup",e)})}function Lo(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Jh(t,e=!1){return m(this,null,function*(){let n=He(t),r=yield n.getIdToken(e),i=Z_(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Lo(Uh(i.auth_time)),issuedAtTime:Lo(Uh(i.iat)),expirationTime:Lo(Uh(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Uh(t){return Number(t)*1e3}function Z_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lc("JWT malformed, contained fewer than 3 sections"),null;try{let i=Eo(n);return i?JSON.parse(i):(lc("Failed to decode base64 JWT payload"),null)}catch(i){return lc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function V_(t){let e=Z_(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Hh(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof At&&rR(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function rR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Wh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var jo=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lo(this.lastLoginAt),this.creationTime=Lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pc(t){return m(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Hh(t,Q_(n,{idToken:r}));q(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?J_(o.providerUserInfo):[],a=iR(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new jo(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function Xh(t){return m(this,null,function*(){let e=He(t);yield pc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function iR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function J_(t){return t.map(e=>{var{providerId:n}=e,r=Tl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function oR(t,e){return m(this,null,function*(){let n=yield Y_(t,{},()=>m(this,null,function*(){let r=To({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=K_(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fc.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function sR(t,e){return m(this,null,function*(){return vc(t,"POST","/v2/accounts:revokeToken",q_(t,e))})}var Vo=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");let n=V_(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return m(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield oR(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Fo("not implemented")}};function _n(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Uo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Tl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jo(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield Hh(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Jh(this,e)}reload(){return Xh(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield pc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(ni(this.auth.app))return Promise.reject(uc(this.auth));let e=yield this.getIdToken();return yield Hh(this,nR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,_e=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:oe,emailVerified:Re,isAnonymous:Ft,providerData:De,stsTokenManager:Lt}=n;q(oe&&Lt,e,"internal-error");let Di=Vo.fromJSON(this.name,Lt);q(typeof oe=="string",e,"internal-error"),_n(d,e.name),_n(h,e.name),q(typeof Re=="boolean",e,"internal-error"),q(typeof Ft=="boolean",e,"internal-error"),_n(f,e.name),_n(p,e.name),_n(v,e.name),_n(S,e.name),_n(x,e.name),_n(_e,e.name);let bi=new t({uid:oe,auth:e,email:h,emailVerified:Re,displayName:d,isAnonymous:Ft,photoURL:p,phoneNumber:f,tenantId:v,stsTokenManager:Di,createdAt:x,lastLoginAt:_e});return De&&Array.isArray(De)&&(bi.providerData=De.map(ll=>Object.assign({},ll))),S&&(bi._redirectEventId=S),bi}static _fromIdTokenResponse(e,n,r=!1){return m(this,null,function*(){let i=new Vo;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield pc(o),o})}static _fromGetAccountInfoResponse(e,n,r){return m(this,null,function*(){let i=n.users[0];q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?J_(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Vo;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new jo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var j_=new Map;function rr(t){hc(t instanceof Function,"Expected a class definition");let e=j_.get(t);return e?(hc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,j_.set(t,e),e)}var aR=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,r){return m(this,null,function*(){this.storage[n]=r})}_get(n){return m(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),zh=aR;function Bh(t,e,n){return`firebase:${t}:${e}:${n}`}var gc=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Bh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Bh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Uo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(this,null,function*(){if(!n.length)return new t(rr(zh),e,r);let i=(yield Promise.all(n.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||rr(zh),s=Bh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d=Uo._fromJSON(e,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>m(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function U_(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fR(e))return"Blackberry";if(pR(e))return"Webos";if(lR(e))return"Safari";if((e.includes("chrome/")||uR(e))&&!e.includes("edge/"))return"Chrome";if(hR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function cR(t=ft()){return/firefox\//i.test(t)}function lR(t=ft()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uR(t=ft()){return/crios\//i.test(t)}function dR(t=ft()){return/iemobile/i.test(t)}function hR(t=ft()){return/android/i.test(t)}function fR(t=ft()){return/blackberry/i.test(t)}function pR(t=ft()){return/webos/i.test(t)}function X_(t,e=[]){let n;switch(t){case"Browser":n=U_(ft());break;case"Worker":n=`${U_(ft())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ri}/${r}`}var Gh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function gR(n){return m(this,arguments,function*(t,e={}){return vc(t,"GET","/v2/passwordPolicy",q_(t,e))})}var mR=6,qh=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:mR,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Yh=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mc(this),this.idTokenSubscription=new mc(this),this.beforeStateQueue=new Gh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rr(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield gc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let n=yield Q_(this,{idToken:e}),r=yield Uo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var n;if(ni(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield pc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=JN()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(ni(this.app))return Promise.reject(uc(this));let n=e?He(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return ni(this.app)?Promise.reject(uc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ni(this.app)?Promise.reject(uc(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(rr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield gR(this),n=new qh(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Kt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield sR(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&rr(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=yield gc.create(this,[rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return m(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&KN(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function vR(t){return He(t)}var mc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=y_(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var yR={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _R(t){yR=t}function IR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function wR(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(rr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var LH=IR("rcb"),VH=new ir(3e4,6e4);var jH=new ir(2e3,1e4);var UH=10*60*1e3;var BH=new ir(3e4,6e4);var $H=new ir(5e3,15e3);var HH=encodeURIComponent("fac");var B_="@firebase/auth",$_="1.7.3";var Kh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ER(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CR(t){yn(new tt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X_(t)},l=new Yh(r,i,o,c);return wR(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yn(new tt("auth-internal",e=>{let n=vR(e.getProvider("auth").getImmediate());return(r=>new Kh(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),me(B_,$_,ER(t)),me(B_,$_,"esm2017")}var DR=5*60,WH=u_("authIdTokenMaxAge")||DR;function bR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_R({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Qh("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",bR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CR("Browser");var Dx="auth";var yc=class{constructor(){return Oo(Dx)}};var eI="@firebase/database",tI="1.0.5";var tp="";function bx(t){tp=t}var cf=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ue(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ti(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var lf=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Nt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var PI=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new cf(e)}}catch{}return new lf},sr=PI("localStorage"),uf=PI("sessionStorage");var ci=new mn("@firebase/database"),Tx=function(){let t=1;return function(){return t++}}(),kI=function(t){let e=__(t),n=new Ja;n.update(e);let r=n.digest();return Xa.encodeByteArray(r)},is=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=is.apply(null,r):typeof r=="object"?e+=ue(r):e+=r,e+=" "}return e},cr=null,nI=!0,Sx=function(t,e){g(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ci.logLevel=Z.VERBOSE,cr=ci.log.bind(ci),e&&uf.set("logging_enabled",!0)):typeof t=="function"?cr=t:(cr=null,uf.remove("logging_enabled"))},Ce=function(...t){if(nI===!0&&(nI=!1,cr===null&&uf.get("logging_enabled")===!0&&Sx(!0)),cr){let e=is.apply(null,t);cr(e)}},os=function(t){return function(...e){Ce(t,...e)}},df=function(...t){let e="FIREBASE INTERNAL ERROR: "+is(...t);ci.error(e)},Qt=function(...t){let e=`FIREBASE FATAL ERROR: ${is(...t)}`;throw ci.error(e),new Error(e)},Fe=function(...t){let e="FIREBASE WARNING: "+is(...t);ci.warn(e)},Ax=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Fe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},FI=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Mx=function(t){if(Mt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ui="[MIN_NAME]",lr="[MAX_NAME]",vi=function(t,e){if(t===e)return 0;if(t===ui||e===lr)return-1;if(e===ui||t===lr)return 1;{let n=rI(t),r=rI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Nx=function(t,e){return t===e?0:t<e?-1:1},Bo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ue(e))},np=function(t){if(typeof t!="object"||t===null)return ue(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ue(e[r]),n+=":",n+=np(t[e[r]]);return n+="}",n},LI=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Le(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var VI=function(t){g(!FI(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Rx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ox(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var Px=new RegExp("^-?(0*)\\d{1,10}$"),kx=-2147483648,Fx=2147483647,rI=function(t){if(Px.test(t)){let e=Number(t);if(e>=kx&&e<=Fx)return e}return null},yi=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Fe("Exception was thrown by user callback.",n),e},Math.floor(0))}},Lx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Go=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var hf=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Fe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var ff=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ce("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fe(e)}},qo=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Ic="5",jI="v",UI="s",BI="r",$I="f",HI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WI="ls",zI="p",pf="ac",GI="websocket",qI="long_polling";var wc=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function Vx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function YI(t,e,n){g(typeof e=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(e===GI)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===qI)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Vx(t)&&(n.ns=t.namespace);let i=[];return Le(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var gf=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Nt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return s_(this.counters_)}};var ef={},tf={};function rp(t){let e=t.toString();return ef[e]||(ef[e]=new gf),ef[e]}function jx(t,e){let n=t.toString();return tf[n]||(tf[n]=e()),tf[n]}var mf=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&yi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var iI="start",Ux="close",Bx="pLPCommand",$x="pRTLPCB",KI="id",QI="pw",ZI="ser",Hx="cb",Wx="seg",zx="ts",Gx="d",qx="dframe",JI=1870,XI=30,Yx=JI-XI,Kx=25e3,Qx=3e4,vf=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=os(e),this.stats_=rp(n),this.urlFn=c=>(this.appCheckToken&&(c[pf]=this.appCheckToken),YI(n,qI,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new mf(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Qx)),Mx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yf((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===iI)this.id=a,this.password=c;else if(s===Ux)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[iI]="t",r[ZI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Hx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[jI]=Ic,this.transportSessionId&&(r[UI]=this.transportSessionId),this.lastSessionId&&(r[WI]=this.lastSessionId),this.applicationId&&(r[zI]=this.applicationId),this.appCheckToken&&(r[pf]=this.appCheckToken),typeof location<"u"&&location.hostname&&HI.test(location.hostname)&&(r[BI]=$I);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Mt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Rx()&&!xx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=ue(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=_h(n),i=LI(r,Yx);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Mt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[qx]="t",r[KI]=e,r[QI]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=ue(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},yf=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Mt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Tx(),window[Bx+this.uniqueCallbackIdentifier]=e,window[$x+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ce("frame writing exception"),a.stack&&Ce(a.stack),Ce(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ce("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[KI]=this.myID,e[QI]=this.myPW,e[ZI]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+XI+r.length<=JI;){let s=this.pendingSegs.shift();r=r+"&"+Wx+i+"="+s.seg+"&"+zx+i+"="+s.ts+"&"+Gx+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Kx)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){Mt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ce("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Zx=16384,Jx=45e3,Ec=null;typeof MozWebSocket<"u"?Ec=MozWebSocket:typeof WebSocket<"u"&&(Ec=WebSocket);var $o=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=os(this.connId),this.stats_=rp(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[jI]=Ic,!Mt()&&typeof location<"u"&&location.hostname&&HI.test(location.hostname)&&(a[BI]=$I),r&&(a[UI]=r),i&&(a[WI]=i),o&&(a[pf]=o),s&&(a[zI]=s),YI(n,GI,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sr.set("previous_websocket_failure",!0);try{let i;if(Mt()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Ic}/${tp}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Ec(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Ec!==null&&!t.forceDisallow_}static previouslyFailed(){return sr.isInMemoryStorage||sr.get("previous_websocket_failure")===!0}markConnectionHealthy(){sr.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ti(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=ue(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=LI(r,Zx);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Jx))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),Xx=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[vf,$o]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=$o&&$o.isAvailable(),i=r&&!$o.previouslyFailed();if(n.webSocketOnly&&(r||Fe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$o];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),eO=6e4,tO=5e3,nO=10*1024,rO=100*1024,nf="t",oI="d",iO="s",sI="r",oO="e",aI="o",cI="a",lI="n",uI="p",sO="h",_f=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=os("c:"+this.id+":"),this.transportManager_=new Xx(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Go(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(nf in e){let n=e[nf];n===cI?this.upgradeIfSecondaryHealthy_():n===sI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===aI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Bo("t",e),r=Bo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:uI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:lI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Bo("t",e),r=Bo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Bo(nf,e);if(oI in e){let r=e[oI];if(n===sO){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===lI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===iO?this.onConnectionShutdown_(r):n===sI?this.onReset_(r):n===oO?df("Server Error: "+r):n===aI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):df("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ic!==r&&Fe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Go(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(eO))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Go(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:uI,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Cc=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Dc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},g(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){g(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var bc=class t extends Dc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Co()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return g(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var dI=32,hI=768,J=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function z(){return new J("")}function k(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function En(t){return t.pieces_.length-t.pieceNum_}function ne(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new J(t.pieces_,e)}function ew(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function aO(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function tw(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function nw(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new J(e,0)}function pe(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof J)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new J(n,0)}function V(t){return t.pieceNum_>=t.pieces_.length}function Ne(t,e){let n=k(t),r=k(e);if(n===null)return e;if(n===r)return Ne(ne(t),ne(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ip(t,e){if(En(t)!==En(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function gt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(En(t)>En(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var If=class{constructor(e,n){this.errorPrefix_=n,this.parts_=tw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=So(this.parts_[r]);rw(this)}};function cO(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=So(e),rw(t)}function lO(t){let e=t.parts_.pop();t.byteLength_-=So(e),t.parts_.length>0&&(t.byteLength_-=1)}function rw(t){if(t.byteLength_>hI)throw new Error(t.errorPrefix_+"has a key path longer than "+hI+" bytes ("+t.byteLength_+").");if(t.parts_.length>dI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+dI+") or object contains a cycle "+or(t))}function or(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var wf=class t extends Dc{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return g(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ho=1e3,uO=60*5*1e3,fI=30*1e3,dO=1.3,hO=3e4,fO="server_kill",pI=3,op=(()=>{class t extends Cc{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=os("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ho,this.maxReconnectDelay_=uO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Mt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wf.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&bc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(ue(s)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new gn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Nt(n,"w")){let i=Jn(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Fe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||v_(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fI)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=m_(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+ue(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):df("Unrecognized action received from server: "+ue(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ho,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ho,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hO&&(this.reconnectDelay_=Ho),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*dO)}this.onConnectStatus_(!1)}establishConnection_(){return m(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){g(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ce("getToken() completed but was canceled"):(Ce("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new _f(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{Fe(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(fO)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Fe(h),l())}}})}interrupt(n){Ce("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ce("Resuming connection for reason: "+n),delete this.interruptReasons_[n],tc(this.interruptReasons_)&&(this.reconnectDelay_=Ho,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>np(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new J(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Ce("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pI&&(this.reconnectDelay_=fI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ce("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Mt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+tp.replace(/\./g,"-")]=1,Co()?n["framework.cordova"]=1:ec()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=bc.getInstance().currentlyOnline();return tc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),F=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var di=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new F(ui,e),i=new F(ui,n);return this.compare(r,i)!==0}minPost(){return F.MIN}};var _c,Tc=class extends di{static get __EMPTY_NODE(){return _c}static set __EMPTY_NODE(e){_c=e}compare(e,n){return vi(e.name,n.name)}isDefinedOn(e){throw Zn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return F.MIN}maxPost(){return new F(lr,_c)}makePost(e,n){return g(typeof e=="string","KeyIndex indexValue must always be a string."),new F(e,_c)}toString(){return".key"}},li=new Tc;var ai=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},pt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??rt.EMPTY_NODE,this.right=s??rt.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return rt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return rt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Ef=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new pt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},rt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,pt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,pt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ai(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ai(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ai(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ai(this.root_,null,this.comparator_,!0,e)}};rt.EMPTY_NODE=new Ef;function pO(t,e){return vi(t.name,e.name)}function sp(t,e){return vi(t,e)}var Cf;function gO(t){Cf=t}var iw=function(t){return typeof t=="number"?"number:"+VI(t):"string:"+t},ow=function(t){if(t.isLeafNode()){let e=t.val();g(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Nt(e,".sv"),"Priority must be a string or number.")}else g(t===Cf||t.isEmpty(),"priority of unexpected type.");g(t===Cf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var gI,hi=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ow(this.priorityNode_)}static set __childrenNodeConstructor(n){gI=n}static get __childrenNodeConstructor(){return gI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return V(n)?this:k(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=k(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||En(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ne(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+iw(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=VI(this.value_):n+=this.value_,this.lazyHash_=kI(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return g(o>=0,"Unknown leaf type: "+r),g(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),sw,aw;function mO(t){sw=t}function vO(t){aw=t}var Df=class extends di{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?vi(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return F.MIN}maxPost(){return new F(lr,new hi("[PRIORITY-POST]",aw))}makePost(e,n){let r=sw(e);return new F(n,new hi("[PRIORITY-POST]",r))}toString(){return".priority"}},se=new Df;var yO=Math.log(2),bf=class{constructor(e){let n=o=>parseInt(Math.log(o)/yO,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Sc=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new pt(h,d.node,pt.BLACK,null,null);{let f=parseInt(u/2,10)+c,p=i(c,f),v=i(f+1,l);return d=t[f],h=n?n(d):d,new pt(h,d.node,pt.BLACK,p,v)}},o=function(c){let l=null,u=null,d=t.length,h=function(p,v){let S=d-p,x=d;d-=p;let _e=i(S+1,x),oe=t[S],Re=n?n(oe):oe;f(new pt(Re,oe.node,v,null,_e))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let v=c.nextBitIsOne(),S=Math.pow(2,c.count-(p+1));v?h(S,pt.BLACK):(h(S,pt.BLACK),h(S,pt.RED))}return u},s=new bf(t.length),a=o(s);return new rt(r||e,a)};var rf,si={},fi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return g(si&&se,"ChildrenNode.ts has not been loaded"),rf=rf||new t({".priority":si},{".priority":se}),rf}get(e){let n=Jn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof rt?n:null}hasIndex(e){return Nt(this.indexSet_,e.toString())}addIndex(e,n){g(e!==li,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(F.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Sc(r,e.getCompare()):a=si;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Do(this.indexes_,(i,o)=>{let s=Jn(this.indexSet_,o);if(g(s,"Missing index implementation for "+o),i===si)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(F.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Sc(a,s.getCompare())}else return si;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new F(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Do(this.indexes_,i=>{if(i===si)return i;{let o=n.get(e.name);return o?i.remove(new F(e.name,o)):i}});return new t(r,this.indexSet_)}};var Wo,N=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&ow(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Wo||(Wo=new t(new rt(sp),null,fi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wo}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Wo:r}}getChild(n){let r=k(n);return r===null?this:this.getImmediateChild(r).getChild(ne(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new F(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Wo:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=k(n);if(i===null)return r;{g(k(n)!==".priority"||En(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ne(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(se,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+iw(this.getPriority().val())+":"),this.forEachChild(se,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":kI(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new F(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new F(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new F(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,F.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,F.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ss?-1:0}withIndex(n){if(n===li||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===li||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(se),o=r.getIterator(se),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===li?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Tf=class extends N{constructor(){super(new rt(sp),N.EMPTY_NODE,fi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return N.EMPTY_NODE}isEmpty(){return!1}},ss=new Tf;Object.defineProperties(F,{MIN:{value:new F(ui,N.EMPTY_NODE)},MAX:{value:new F(lr,ss)}});Tc.__EMPTY_NODE=N.EMPTY_NODE;hi.__childrenNodeConstructor=N;gO(ss);vO(ss);var _O=!0;function ve(t,e=null){if(t===null)return N.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),g(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new hi(n,ve(e))}if(!(t instanceof Array)&&_O){let n=[],r=!1;if(Le(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=ve(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new F(s,c)))}}),n.length===0)return N.EMPTY_NODE;let o=Sc(n,pO,s=>s.name,sp);if(r){let s=Sc(n,se.getCompare());return new N(o,ve(e),new fi({".priority":s},{".priority":se}))}else return new N(o,ve(e),fi.Default)}else{let n=N.EMPTY_NODE;return Le(t,(r,i)=>{if(Nt(t,r)&&r.substring(0,1)!=="."){let o=ve(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(ve(e))}}mO(ve);var Sf=class extends di{constructor(e){super(),this.indexPath_=e,g(!V(e)&&k(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?vi(e.name,n.name):o}makePost(e,n){let r=ve(e),i=N.EMPTY_NODE.updateChild(this.indexPath_,r);return new F(n,i)}maxPost(){let e=N.EMPTY_NODE.updateChild(this.indexPath_,ss);return new F(lr,e)}toString(){return tw(this.indexPath_,0).join("/")}};var Af=class extends di{compare(e,n){let r=e.node.compareTo(n.node);return r===0?vi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return F.MIN}maxPost(){return F.MAX}makePost(e,n){let r=ve(e);return new F(n,r)}toString(){return".value"}},IO=new Af;function cw(t){return{type:"value",snapshotNode:t}}function pi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Zo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Jo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function wO(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Xo=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){g(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Zo(n,a)):g(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(pi(n,r)):s.trackChildChange(Jo(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(se,(i,o)=>{n.hasChild(i)||r.trackChildChange(Zo(i,o))}),n.isLeafNode()||n.forEachChild(se,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Jo(i,o,s))}else r.trackChildChange(pi(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?N.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Ac=class t{constructor(e){this.indexedFilter_=new Xo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new F(n,r))||(r=N.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=N.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(N.EMPTY_NODE);let o=this;return n.forEachChild(se,(s,a)=>{o.matches(new F(s,a))||(i=i.updateImmediateChild(s,N.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Mf=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ac(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new F(n,r))||(r=N.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=N.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=N.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(N.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,N.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(h,f)=>d(f,h)}else s=this.index_.getCompare();let a=e;g(a.numChildren()===this.limit_,"");let c=new F(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:s(h,c);if(u&&!r.isEmpty()&&f>=0)return o?.trackChildChange(Jo(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Zo(n,d));let v=a.updateImmediateChild(n,N.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o?.trackChildChange(pi(h.name,h.node)),v.updateImmediateChild(h.name,h.node)):v}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Zo(l.name,l.node)),o.trackChildChange(pi(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,N.EMPTY_NODE)):e}};var Nf=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=se}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ui}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===se}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function EO(t){return t.loadsAllData()?new Xo(t.getIndex()):t.hasLimit()?new Mf(t):new Ac(t)}function mI(t){let e={};if(t.isDefault())return e;let n;if(t.index_===se?n="$priority":t.index_===IO?n="$value":t.index_===li?n="$key":(g(t.index_ instanceof Sf,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ue(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=ue(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ue(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ue(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ue(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function vI(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==se&&(e.i=t.index_.toString()),e}var Rf=class t extends Cc{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=os("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(g(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=mI(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Jn(this.listens_,s)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=mI(e._queryParams),r=e._path.toString(),i=new gn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+To(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ti(a.responseText)}catch{Fe("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Fe("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var xf=class{constructor(){this.rootNode_=N.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Mc(){return{value:null,children:new Map}}function lw(t,e,n){if(V(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=k(e);t.children.has(r)||t.children.set(r,Mc());let i=t.children.get(r);e=ne(e),lw(i,e,n)}}function Of(t,e,n){t.value!==null?n(e,t.value):CO(t,(r,i)=>{let o=new J(e.toString()+"/"+r);Of(i,o,n)})}function CO(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Pf=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Le(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var yI=10*1e3,DO=30*1e3,bO=5*60*1e3,kf=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Pf(e);let r=yI+(DO-yI)*Math.random();Go(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Le(e,(i,o)=>{o>0&&Nt(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Go(this.reportStats_.bind(this),Math.floor(Math.random()*2*bO))}};var xt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(xt||{});function uw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ap(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ff=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=xt.ACK_USER_WRITE,this.source=uw()}operationForChild(e){if(V(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new J(e));return new t(z(),n,this.revert)}}else return g(k(this.path)===e,"operationForChild called for unrelated child."),new t(ne(this.path),this.affectedTree,this.revert)}};var Nc=class t{constructor(e,n){this.source=e,this.path=n,this.type=xt.LISTEN_COMPLETE}operationForChild(e){return V(this.path)?new t(this.source,z()):new t(this.source,ne(this.path))}};var gi=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=xt.OVERWRITE}operationForChild(e){return V(this.path)?new t(this.source,z(),this.snap.getImmediateChild(e)):new t(this.source,ne(this.path),this.snap)}};var Rc=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=xt.MERGE}operationForChild(e){if(V(this.path)){let n=this.children.subtree(new J(e));return n.isEmpty()?null:n.value?new gi(this.source,z(),n.value):new t(this.source,z(),n)}else return g(k(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ne(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ot=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(V(e))return this.isFullyInitialized()&&!this.filtered_;let n=k(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Lf=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function TO(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(wO(s.childName,s.snapshotNode))}),zo(t,i,"child_removed",e,r,n),zo(t,i,"child_added",e,r,n),zo(t,i,"child_moved",o,r,n),zo(t,i,"child_changed",e,r,n),zo(t,i,"value",e,r,n),i}function zo(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>AO(t,a,c)),s.forEach(a=>{let c=SO(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function SO(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function AO(t,e,n){if(e.childName==null||n.childName==null)throw Zn("Should only compare child_ events.");let r=new F(e.childName,e.snapshotNode),i=new F(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function zc(t,e){return{eventCache:t,serverCache:e}}function Yo(t,e,n,r){return zc(new Ot(e,n,r),t.serverCache)}function dw(t,e,n,r){return zc(t.eventCache,new Ot(e,n,r))}function xc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ur(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var of,MO=()=>(of||(of=new rt(Nx)),of),Ve=class t{constructor(e,n=MO()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Le(e,(r,i)=>{n=n.set(new J(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:z(),value:this.value};if(V(e))return null;{let r=k(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ne(e),n);return o!=null?{path:pe(new J(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(V(e))return this;{let n=k(e),r=this.children.get(n);return r!==null?r.subtree(ne(e)):new t(null)}}set(e,n){if(V(e))return new t(n,this.children);{let r=k(e),o=(this.children.get(r)||new t(null)).set(ne(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(V(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=k(e),r=this.children.get(n);if(r){let i=r.remove(ne(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(V(e))return this.value;{let n=k(e),r=this.children.get(n);return r?r.get(ne(e)):null}}setTree(e,n){if(V(e))return n;{let r=k(e),o=(this.children.get(r)||new t(null)).setTree(ne(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(z(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(pe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,z(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(V(e))return null;{let o=k(e),s=this.children.get(o);return s?s.findOnPath_(ne(e),pe(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,z(),n)}foreachOnPath_(e,n,r){if(V(e))return this;{this.value&&r(n,this.value);let i=k(e),o=this.children.get(i);return o?o.foreachOnPath_(ne(e),pe(n,i),r):new t(null)}}foreach(e){this.foreach_(z(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(pe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var mt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Ve(null))}};function Ko(t,e,n){if(V(e))return new mt(new Ve(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Ne(i,e);return o=o.updateChild(s,n),new mt(t.writeTree_.set(i,o))}else{let i=new Ve(n),o=t.writeTree_.setTree(e,i);return new mt(o)}}}function _I(t,e,n){let r=t;return Le(n,(i,o)=>{r=Ko(r,pe(e,i),o)}),r}function II(t,e){if(V(e))return mt.empty();{let n=t.writeTree_.setTree(e,new Ve(null));return new mt(n)}}function Vf(t,e){return dr(t,e)!=null}function dr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ne(n.path,e)):null}function wI(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(se,(r,i)=>{e.push(new F(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new F(r,i.value))}),e}function In(t,e){if(V(e))return t;{let n=dr(t,e);return n!=null?new mt(new Ve(n)):new mt(t.writeTree_.subtree(e))}}function jf(t){return t.writeTree_.isEmpty()}function mi(t,e){return hw(z(),t.writeTree_,e)}function hw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(g(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=hw(pe(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(pe(t,".priority"),r)),n}}function Gc(t,e){return mw(e,t)}function NO(t,e,n,r,i){g(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ko(t.visibleWrites,e,n)),t.lastWriteId=r}function RO(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function xO(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);g(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&OO(a,r.path)?i=!1:gt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return PO(t),!0;if(r.snap)t.visibleWrites=II(t.visibleWrites,r.path);else{let a=r.children;Le(a,c=>{t.visibleWrites=II(t.visibleWrites,pe(r.path,c))})}return!0}else return!1}function OO(t,e){if(t.snap)return gt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&gt(pe(t.path,n),e))return!0;return!1}function PO(t){t.visibleWrites=fw(t.allWrites,kO,z()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function kO(t){return t.visible}function fw(t,e,n){let r=mt.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)gt(n,s)?(a=Ne(n,s),r=Ko(r,a,o.snap)):gt(s,n)&&(a=Ne(s,n),r=Ko(r,z(),o.snap.getChild(a)));else if(o.children){if(gt(n,s))a=Ne(n,s),r=_I(r,a,o.children);else if(gt(s,n))if(a=Ne(s,n),V(a))r=_I(r,z(),o.children);else{let c=Jn(o.children,k(a));if(c){let l=c.getChild(ne(a));r=Ko(r,z(),l)}}}else throw Zn("WriteRecord should have .snap or .children")}}return r}function pw(t,e,n,r,i){if(!r&&!i){let o=dr(t.visibleWrites,e);if(o!=null)return o;{let s=In(t.visibleWrites,e);if(jf(s))return n;if(n==null&&!Vf(s,z()))return null;{let a=n||N.EMPTY_NODE;return mi(s,a)}}}else{let o=In(t.visibleWrites,e);if(!i&&jf(o))return n;if(!i&&n==null&&!Vf(o,z()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(gt(l.path,e)||gt(e,l.path))},a=fw(t.allWrites,s,e),c=n||N.EMPTY_NODE;return mi(a,c)}}}function FO(t,e,n){let r=N.EMPTY_NODE,i=dr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(se,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=In(t.visibleWrites,e);return n.forEachChild(se,(s,a)=>{let c=mi(In(o,new J(s)),a);r=r.updateImmediateChild(s,c)}),wI(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=In(t.visibleWrites,e);return wI(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function LO(t,e,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=pe(e,n);if(Vf(t.visibleWrites,o))return null;{let s=In(t.visibleWrites,o);return jf(s)?i.getChild(n):mi(s,i.getChild(n))}}function VO(t,e,n,r){let i=pe(e,n),o=dr(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=In(t.visibleWrites,i);return mi(s,r.getNode().getImmediateChild(n))}else return null}function jO(t,e){return dr(t.visibleWrites,e)}function UO(t,e,n,r,i,o,s){let a,c=In(t.visibleWrites,e),l=dr(c,z());if(l!=null)a=l;else if(n!=null)a=mi(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function BO(){return{visibleWrites:mt.empty(),allWrites:[],lastWriteId:-1}}function Oc(t,e,n,r){return pw(t.writeTree,t.treePath,e,n,r)}function lp(t,e){return FO(t.writeTree,t.treePath,e)}function EI(t,e,n,r){return LO(t.writeTree,t.treePath,e,n,r)}function Pc(t,e){return jO(t.writeTree,pe(t.treePath,e))}function $O(t,e,n,r,i,o){return UO(t.writeTree,t.treePath,e,n,r,i,o)}function up(t,e,n){return VO(t.writeTree,t.treePath,e,n)}function gw(t,e){return mw(pe(t.treePath,e),t.writeTree)}function mw(t,e){return{treePath:t,writeTree:e}}var Uf=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Jo(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Zo(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,pi(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Jo(r,e.snapshotNode,i.oldSnap));else throw Zn("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Bf=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},vw=new Bf,es=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Ot(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return up(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ur(this.viewCache_),o=$O(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function HO(t){return{filter:t}}function WO(t,e){g(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),g(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function zO(t,e,n,r,i){let o=new Uf,s,a;if(n.type===xt.OVERWRITE){let l=n;l.source.fromUser?s=$f(t,e,l.path,l.snap,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!V(l.path),s=kc(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===xt.MERGE){let l=n;l.source.fromUser?s=qO(t,e,l.path,l.children,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Hf(t,e,l.path,l.children,r,i,a,o))}else if(n.type===xt.ACK_USER_WRITE){let l=n;l.revert?s=QO(t,e,l.path,r,i,o):s=YO(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===xt.LISTEN_COMPLETE)s=KO(t,e,n.path,r,o);else throw Zn("Unknown operation type: "+n.type);let c=o.getChanges();return GO(e,s,c),{viewCache:s,changes:c}}function GO(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=xc(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(cw(xc(e)))}}function yw(t,e,n,r,i,o){let s=e.eventCache;if(Pc(r,n)!=null)return e;{let a,c;if(V(n))if(g(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=ur(e),u=l instanceof N?l:N.EMPTY_NODE,d=lp(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=Oc(r,ur(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=k(n);if(l===".priority"){g(En(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=EI(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=ne(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let h=EI(r,n,s.getNode(),c);h!=null?d=s.getNode().getImmediateChild(l).updateChild(u,h):d=s.getNode().getImmediateChild(l)}else d=up(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Yo(e,a,s.isFullyInitialized()||V(n),t.filter.filtersNodes())}}function kc(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(V(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{let f=k(n);if(!c.isCompleteForPath(n)&&En(n)>1)return e;let p=ne(n),S=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),S):l=u.updateChild(c.getNode(),f,S,p,vw,null)}let d=dw(e,l,c.isFullyInitialized()||V(n),u.filtersNodes()),h=new es(i,d,o);return yw(t,d,n,i,h,a)}function $f(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new es(i,e,o);if(V(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Yo(e,l,!0,t.filter.filtersNodes());else{let d=k(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Yo(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=ne(n),f=a.getNode().getImmediateChild(d),p;if(V(h))p=r;else{let v=u.getCompleteChild(d);v!=null?ew(h)===".priority"&&v.getChild(nw(h)).isEmpty()?p=v:p=v.updateChild(h,r):p=N.EMPTY_NODE}if(f.equals(p))c=e;else{let v=t.filter.updateChild(a.getNode(),d,p,h,u,s);c=Yo(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function CI(t,e){return t.eventCache.isCompleteForChild(e)}function qO(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=pe(n,c);CI(e,k(u))&&(a=$f(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=pe(n,c);CI(e,k(u))||(a=$f(t,a,u,l,i,o,s))}),a}function DI(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Hf(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;V(n)?l=r:l=new Ve(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),p=DI(t,f,h);c=kc(t,c,new J(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let p=e.serverCache.getNode().getImmediateChild(d),v=DI(t,p,h);c=kc(t,c,new J(d),v,i,o,s,a)}}),c}function YO(t,e,n,r,i,o,s){if(Pc(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(V(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return kc(t,e,n,c.getNode().getChild(n),i,o,a,s);if(V(n)){let l=new Ve(null);return c.getNode().forEachChild(li,(u,d)=>{l=l.set(new J(u),d)}),Hf(t,e,n,l,i,o,a,s)}else return e}else{let l=new Ve(null);return r.foreach((u,d)=>{let h=pe(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),Hf(t,e,n,l,i,o,a,s)}}function KO(t,e,n,r,i){let o=e.serverCache,s=dw(e,o.getNode(),o.isFullyInitialized()||V(n),o.isFiltered());return yw(t,s,n,r,vw,i)}function QO(t,e,n,r,i,o){let s;if(Pc(r,n)!=null)return e;{let a=new es(r,e,i),c=e.eventCache.getNode(),l;if(V(n)||k(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Oc(r,ur(e));else{let d=e.serverCache.getNode();g(d instanceof N,"serverChildren would be complete if leaf node"),u=lp(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=k(n),d=up(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,ne(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,N.EMPTY_NODE,ne(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Oc(r,ur(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||Pc(r,z())!=null,Yo(e,l,s,t.filter.filtersNodes())}}var Wf=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Xo(r.getIndex()),o=EO(r);this.processor_=HO(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(N.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(N.EMPTY_NODE,a.getNode(),null),u=new Ot(c,s.isFullyInitialized(),i.filtersNodes()),d=new Ot(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=zc(d,u),this.eventGenerator_=new Lf(this.query_)}get query(){return this.query_}};function ZO(t){return t.viewCache_.serverCache.getNode()}function JO(t){return xc(t.viewCache_)}function XO(t,e){let n=ur(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!V(e)&&!n.getImmediateChild(k(e)).isEmpty())?n.getChild(e):null}function bI(t){return t.eventRegistrations_.length===0}function eP(t,e){t.eventRegistrations_.push(e)}function TI(t,e,n){let r=[];if(n){g(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function SI(t,e,n,r){e.type===xt.MERGE&&e.source.queryId!==null&&(g(ur(t.viewCache_),"We should always have a full cache before handling merges"),g(xc(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=zO(t.processor_,i,e,n,r);return WO(t.processor_,o.viewCache),g(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,_w(t,o.changes,o.viewCache.eventCache.getNode(),null)}function tP(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(se,(o,s)=>{r.push(pi(o,s))}),n.isFullyInitialized()&&r.push(cw(n.getNode())),_w(t,r,n.getNode(),e)}function _w(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return TO(t.eventGenerator_,e,n,i)}var Fc,Lc=class{constructor(){this.views=new Map}};function nP(t){g(!Fc,"__referenceConstructor has already been defined"),Fc=t}function rP(){return g(Fc,"Reference.ts has not been loaded"),Fc}function iP(t){return t.views.size===0}function dp(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return g(o!=null,"SyncTree gave us an op for an invalid query."),SI(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(SI(s,e,n,r));return o}}function Iw(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=Oc(n,i?r:null),c=!1;a?c=!0:r instanceof N?(a=lp(n,r),c=!1):(a=N.EMPTY_NODE,c=!1);let l=zc(new Ot(a,c,!1),new Ot(r,i,!1));return new Wf(e,l)}return s}function oP(t,e,n,r,i,o){let s=Iw(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),eP(s,n),tP(s,n)}function sP(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=Cn(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(TI(l,n,r)),bI(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(TI(c,n,r)),bI(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Cn(t)&&o.push(new(rP())(e._repo,e._path)),{removed:o,events:s}}function ww(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function wn(t,e){let n=null;for(let r of t.views.values())n=n||XO(r,e);return n}function Ew(t,e){if(e._queryParams.loadsAllData())return qc(t);{let r=e._queryIdentifier;return t.views.get(r)}}function Cw(t,e){return Ew(t,e)!=null}function Cn(t){return qc(t)!=null}function qc(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Vc;function aP(t){g(!Vc,"__referenceConstructor has already been defined"),Vc=t}function cP(){return g(Vc,"Reference.ts has not been loaded"),Vc}var lP=1,jc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ve(null),this.pendingWriteTree_=BO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Dw(t,e,n,r,i){return NO(t.pendingWriteTree_,e,n,r,i),i?cs(t,new gi(uw(),e,n)):[]}function ar(t,e,n=!1){let r=RO(t.pendingWriteTree_,e);if(xO(t.pendingWriteTree_,e)){let o=new Ve(null);return r.snap!=null?o=o.set(z(),!0):Le(r.children,s=>{o=o.set(new J(s),!0)}),cs(t,new Ff(r.path,o,n))}else return[]}function as(t,e,n){return cs(t,new gi(ap(),e,n))}function uP(t,e,n){let r=Ve.fromObject(n);return cs(t,new Rc(ap(),e,r))}function dP(t,e){return cs(t,new Nc(ap(),e))}function hP(t,e,n){let r=fp(t,n);if(r){let i=pp(r),o=i.path,s=i.queryId,a=Ne(o,e),c=new Nc(cp(s),a);return gp(t,o,c)}else return[]}function Uc(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||Cw(s,e))){let c=sP(s,e,n,r);iP(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(h,f)=>Cn(f));if(u&&!d){let h=t.syncPointTree_.subtree(o);if(!h.isEmpty()){let f=gP(h);for(let p=0;p<f.length;++p){let v=f[p],S=v.query,x=Aw(t,v);t.listenProvider_.startListening(Qo(S),ts(t,S),x.hashFn,x.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Qo(e),null):l.forEach(h=>{let f=t.queryToTagMap.get(Yc(h));t.listenProvider_.stopListening(Qo(h),f)}))}mP(t,l)}return a}function bw(t,e,n,r){let i=fp(t,r);if(i!=null){let o=pp(i),s=o.path,a=o.queryId,c=Ne(s,e),l=new gi(cp(a),c,n);return gp(t,s,l)}else return[]}function fP(t,e,n,r){let i=fp(t,r);if(i){let o=pp(i),s=o.path,a=o.queryId,c=Ne(s,e),l=Ve.fromObject(n),u=new Rc(cp(a),c,l);return gp(t,s,u)}else return[]}function zf(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{let p=Ne(h,i);o=o||wn(f,p),s=s||Cn(f)});let a=t.syncPointTree_.get(i);a?(s=s||Cn(a),o=o||wn(a,z())):(a=new Lc,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=N.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,p)=>{let v=wn(p,z());v&&(o=o.updateImmediateChild(f,v))}));let l=Cw(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=Yc(e);g(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=vP();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}let u=Gc(t.pendingWriteTree_,i),d=oP(a,e,n,u,o,c);if(!l&&!s&&!r){let h=Ew(a,e);d=d.concat(yP(t,e,h))}return d}function hp(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=Ne(s,e),l=wn(a,c);if(l)return l});return pw(i,e,o,n,!0)}function pP(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Ne(l,n);r=r||wn(u,d)});let i=t.syncPointTree_.get(n);i?r=r||wn(i,z()):(i=new Lc,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new Ot(r,!0,!1):null,a=Gc(t.pendingWriteTree_,e._path),c=Iw(i,e,a,o?s.getNode():N.EMPTY_NODE,o);return JO(c)}function cs(t,e){return Tw(e,t.syncPointTree_,null,Gc(t.pendingWriteTree_,z()))}function Tw(t,e,n,r){if(V(t.path))return Sw(t,e,n,r);{let i=e.get(z());n==null&&i!=null&&(n=wn(i,z()));let o=[],s=k(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=gw(r,s);o=o.concat(Tw(a,c,l,u))}return i&&(o=o.concat(dp(i,t,r,n))),o}}function Sw(t,e,n,r){let i=e.get(z());n==null&&i!=null&&(n=wn(i,z()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=gw(r,s),u=t.operationForChild(s);u&&(o=o.concat(Sw(u,a,c,l)))}),i&&(o=o.concat(dp(i,t,r,n))),o}function Aw(t,e){let n=e.query,r=ts(t,n);return{hashFn:()=>(ZO(e)||N.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?hP(t,n._path,r):dP(t,n._path);{let o=Ox(i,n);return Uc(t,n,null,o)}}}}function ts(t,e){let n=Yc(e);return t.queryToTagMap.get(n)}function Yc(t){return t._path.toString()+"$"+t._queryIdentifier}function fp(t,e){return t.tagToQueryMap.get(e)}function pp(t){let e=t.indexOf("$");return g(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new J(t.substr(0,e))}}function gp(t,e,n){let r=t.syncPointTree_.get(e);g(r,"Missing sync point for query tag that we're tracking");let i=Gc(t.pendingWriteTree_,e);return dp(r,n,i,null)}function gP(t){return t.fold((e,n,r)=>{if(n&&Cn(n))return[qc(n)];{let i=[];return n&&(i=ww(n)),Le(r,(o,s)=>{i=i.concat(s)}),i}})}function Qo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(cP())(t._repo,t._path):t}function mP(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Yc(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function vP(){return lP++}function yP(t,e,n){let r=e._path,i=ts(t,e),o=Aw(t,n),s=t.listenProvider_.startListening(Qo(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)g(!Cn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!V(l)&&u&&Cn(u))return[qc(u).query];{let h=[];return u&&(h=h.concat(ww(u).map(f=>f.query))),Le(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(Qo(u),ts(t,u))}}return s}var Gf=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},qf=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=pe(this.path_,e);return new t(this.syncTree_,n)}node(){return hp(this.syncTree_,this.path_)}},_P=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},AI=function(t,e,n){if(!t||typeof t!="object")return t;if(g(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return IP(t[".sv"],e,n);if(typeof t[".sv"]=="object")return wP(t[".sv"],e);g(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},IP=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+t)}},wP=function(t,e,n){t.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=e.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},EP=function(t,e,n,r){return mp(e,new qf(n,t),r)},Mw=function(t,e,n){return mp(t,new Gf(e),n)};function mp(t,e,n){let r=t.getPriority().val(),i=AI(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=AI(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new hi(a,ve(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new hi(i))),s.forEachChild(se,(a,c)=>{let l=mp(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var ns=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function vp(t,e){let n=e instanceof J?e:new J(e),r=t,i=k(n);for(;i!==null;){let o=Jn(r.node.children,i)||{children:{},childCount:0};r=new ns(i,r,o),n=ne(n),i=k(n)}return r}function _i(t){return t.node.value}function Nw(t,e){t.node.value=e,Yf(t)}function Rw(t){return t.node.childCount>0}function CP(t){return _i(t)===void 0&&!Rw(t)}function Kc(t,e){Le(t.node.children,(n,r)=>{e(new ns(n,t,r))})}function xw(t,e,n,r){n&&!r&&e(t),Kc(t,i=>{xw(i,e,!0,r)}),n&&r&&e(t)}function DP(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ls(t){return new J(t.parent===null?t.name:ls(t.parent)+"/"+t.name)}function Yf(t){t.parent!==null&&bP(t.parent,t.name,t)}function bP(t,e,n){let r=CP(n),i=Nt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Yf(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Yf(t))}var TP=/[\[\].#$\/\u0000-\u001F\u007F]/,SP=/[\[\].#$\u0000-\u001F\u007F]/,sf=10*1024*1024,Ow=function(t){return typeof t=="string"&&t.length!==0&&!TP.test(t)},Pw=function(t){return typeof t=="string"&&t.length!==0&&!SP.test(t)},AP=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Pw(t)};var kw=function(t,e,n,r){r&&e===void 0||yp(nc(t,"value"),e,n)},yp=function(t,e,n){let r=n instanceof J?new If(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+or(r));if(typeof e=="function")throw new Error(t+"contains a function "+or(r)+" with contents = "+e.toString());if(FI(e))throw new Error(t+"contains "+e.toString()+" "+or(r));if(typeof e=="string"&&e.length>sf/3&&So(e)>sf)throw new Error(t+"contains a string greater than "+sf+" utf8 bytes "+or(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Le(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!Ow(s)))throw new Error(t+" contains an invalid key ("+s+") "+or(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cO(r,s),yp(t,a,r),lO(r)}),i&&o)throw new Error(t+' contains ".value" child '+or(r)+" in addition to actual children.")}};var Fw=function(t,e,n,r){if(!(r&&n===void 0)&&!Pw(n))throw new Error(nc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},MP=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Fw(t,e,n,r)},_p=function(t,e){if(k(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},NP=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ow(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!AP(n))throw new Error(nc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Kf=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Ip(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!ip(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Lw(t,e,n){Ip(t,n),Vw(t,r=>ip(r,e))}function Pt(t,e,n){Ip(t,n),Vw(t,r=>gt(r,e)||gt(e,r))}function Vw(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(RP(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function RP(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();cr&&Ce("event: "+n.toString()),yi(r)}}}var xP="repo_interrupt",OP=25,Qf=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Mc(),this.transactionQueueTree_=new ns,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function PP(t,e,n){if(t.stats_=rp(t.repoInfo_),t.forceRestClient_||Lx())t.server_=new Rf(t.repoInfo_,(r,i,o,s)=>{MI(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>NI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ue(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new op(t.repoInfo_,e,(r,i,o,s)=>{MI(t,r,i,o,s)},r=>{NI(t,r)},r=>{kP(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=jx(t.repoInfo_,()=>new kf(t.stats_,t.server_)),t.infoData_=new xf,t.infoSyncTree_=new jc({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=as(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Ep(t,"connected",!1),t.serverSyncTree_=new jc({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Pt(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function jw(t){let n=t.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function wp(t){return _P({timestamp:jw(t)})}function MI(t,e,n,r,i){t.dataUpdateCount++;let o=new J(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=Do(n,l=>ve(l));s=fP(t.serverSyncTree_,o,c,i)}else{let c=ve(n);s=bw(t.serverSyncTree_,o,c,i)}else if(r){let c=Do(n,l=>ve(l));s=uP(t.serverSyncTree_,o,c)}else{let c=ve(n);s=as(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Zc(t,o)),Pt(t.eventQueue_,a,s)}function NI(t,e){Ep(t,"connected",e),e===!1&&VP(t)}function kP(t,e){Le(e,(n,r)=>{Ep(t,n,r)})}function Ep(t,e,n){let r=new J("/.info/"+e),i=ve(n);t.infoData_.updateSnapshot(r,i);let o=as(t.infoSyncTree_,r,i);Pt(t.eventQueue_,r,o)}function Uw(t){return t.nextWriteId_++}function FP(t,e,n){let r=pP(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=ve(i).withIndex(e._queryParams.getIndex());zf(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=as(t.serverSyncTree_,e._path,o);else{let a=ts(t.serverSyncTree_,e);s=bw(t.serverSyncTree_,e._path,o,a)}return Pt(t.eventQueue_,e._path,s),Uc(t.serverSyncTree_,e,n,null,!0),o},i=>(Qc(t,"get for query "+ue(e)+" failed: "+i),Promise.reject(new Error(i))))}function LP(t,e,n,r,i){Qc(t,"set",{path:e.toString(),value:n,priority:r});let o=wp(t),s=ve(n,r),a=hp(t.serverSyncTree_,e),c=Mw(s,a,o),l=Uw(t),u=Dw(t.serverSyncTree_,e,c,l,!0);Ip(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(h,f)=>{let p=h==="ok";p||Fe("set at "+e+" failed: "+h);let v=ar(t.serverSyncTree_,l,!p);Pt(t.eventQueue_,e,v),BP(t,i,h,f)});let d=zw(t,e);Zc(t,d),Pt(t.eventQueue_,d,[])}function VP(t){Qc(t,"onDisconnectEvents");let e=wp(t),n=Mc();Of(t.onDisconnect_,z(),(i,o)=>{let s=EP(i,o,t.serverSyncTree_,e);lw(n,i,s)});let r=[];Of(n,z(),(i,o)=>{r=r.concat(as(t.serverSyncTree_,i,o));let s=zw(t,i);Zc(t,s)}),t.onDisconnect_=Mc(),Pt(t.eventQueue_,z(),r)}function jP(t,e,n){let r;k(e._path)===".info"?r=zf(t.infoSyncTree_,e,n):r=zf(t.serverSyncTree_,e,n),Lw(t.eventQueue_,e._path,r)}function RI(t,e,n){let r;k(e._path)===".info"?r=Uc(t.infoSyncTree_,e,n):r=Uc(t.serverSyncTree_,e,n),Lw(t.eventQueue_,e._path,r)}function UP(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xP)}function Qc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ce(n,...e)}function BP(t,e,n,r){e&&yi(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function Bw(t,e,n){return hp(t.serverSyncTree_,e,n)||N.EMPTY_NODE}function Cp(t,e=t.transactionQueueTree_){if(e||Jc(t,e),_i(e)){let n=Hw(t,e);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&$P(t,ls(e),n)}else Rw(e)&&Kc(e,n=>{Cp(t,n)})}function $P(t,e,n){let r=n.map(l=>l.currentWriteId),i=Bw(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ne(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Qc(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(ar(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Jc(t,vp(t.transactionQueueTree_,e)),Cp(t,t.transactionQueueTree_),Pt(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)yi(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Fe("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Zc(t,e)}},s)}function Zc(t,e){let n=$w(t,e),r=ls(n),i=Hw(t,n);return HP(t,i,r),r}function HP(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Ne(n,c.path),u=!1,d;if(g(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(ar(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=OP)u=!0,d="maxretry",i=i.concat(ar(t.serverSyncTree_,c.currentWriteId,!0));else{let h=Bw(t,c.path,s);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){yp("transaction failed: Data returned ",f,c.path);let p=ve(f);typeof f=="object"&&f!=null&&Nt(f,".priority")||(p=p.updatePriority(h.getPriority()));let S=c.currentWriteId,x=wp(t),_e=Mw(p,h,x);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=_e,c.currentWriteId=Uw(t),s.splice(s.indexOf(S),1),i=i.concat(Dw(t.serverSyncTree_,c.path,_e,c.currentWriteId,c.applyLocally)),i=i.concat(ar(t.serverSyncTree_,S,!0))}else u=!0,d="nodata",i=i.concat(ar(t.serverSyncTree_,c.currentWriteId,!0))}Pt(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Jc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)yi(r[a]);Cp(t,t.transactionQueueTree_)}function $w(t,e){let n,r=t.transactionQueueTree_;for(n=k(e);n!==null&&_i(r)===void 0;)r=vp(r,n),e=ne(e),n=k(e);return r}function Hw(t,e){let n=[];return Ww(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Ww(t,e,n){let r=_i(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Kc(e,i=>{Ww(t,i,n)})}function Jc(t,e){let n=_i(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Nw(e,n.length>0?n:void 0)}Kc(e,r=>{Jc(t,r)})}function zw(t,e){let n=ls($w(t,e)),r=vp(t.transactionQueueTree_,e);return DP(r,i=>{af(t,i)}),af(t,r),xw(r,i=>{af(t,i)}),n}function af(t,e){let n=_i(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(g(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(g(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(ar(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Nw(e,void 0):n.length=o+1,Pt(t.eventQueue_,ls(e),i);for(let s=0;s<r.length;s++)yi(r[s])}}function WP(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function zP(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Fe(`Invalid query segment '${n}' in query '${t}'`)}return e}var xI=function(t,e){let n=GP(t),r=n.namespace;n.domain==="firebase.com"&&Qt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Qt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Ax();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new wc(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new J(n.pathString)}},GP=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=WP(t.substring(u,d)));let h=zP(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in h&&(o=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var OI="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qP=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=OI.charAt(n%64),n=Math.floor(n/64);g(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=OI.charAt(e[i]);return g(s.length===20,"nextPushId: Length should be 20."),s}}();var Bc=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ue(this.snapshot.exportVal())}},$c=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Hc=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Zf=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return V(this._path)?null:ew(this._path)}get ref(){return new kt(this._repo,this._path)}get _queryIdentifier(){let e=vI(this._queryParams),n=np(e);return n==="{}"?"default":n}get _queryObject(){return vI(this._queryParams)}isEqual(e){if(e=He(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=ip(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+aO(this._path)}};var kt=class t extends Zf{constructor(e,n){super(e,n,new Nf,!1)}get parent(){let e=nw(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},rs=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new J(e),r=Dn(this.ref,e);return new t(this._node.getChild(n),r,se)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Dn(this.ref,r),se)))}hasChild(e){let n=new J(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Gw(t,e){return t=He(t),t._checkNotDeleted("ref"),e!==void 0?Dn(t._root,e):t._root}function Dn(t,e){return t=He(t),k(t._path)===null?MP("child","path",e,!1):Fw("child","path",e,!1),new kt(t._repo,pe(t._path,e))}function qw(t,e){t=He(t),_p("push",t._path),kw("push",e,t._path,!0);let n=jw(t._repo),r=qP(n),i=Dn(t,r),o=Dn(t,r),s;return e!=null?s=Xc(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function Yw(t){return _p("remove",t._path),Xc(t,null)}function Xc(t,e){t=He(t),_p("set",t._path),kw("set",e,t._path,!1);let n=new gn;return LP(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Kw(t){t=He(t);let e=new Hc(()=>{}),n=new Wc(e);return FP(t._repo,t,n).then(r=>new rs(r,new kt(t._repo,t._path),t._queryParams.getIndex()))}var Wc=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Bc("value",this,new rs(e.snapshotNode,new kt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new $c(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Jf=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new $c(this,e,n):null}createEvent(e,n){g(e.childName!=null,"Child events should have a childName.");let r=Dn(new kt(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Bc(e.type,this,new rs(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function YP(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{RI(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Hc(n,o||void 0),a=e==="value"?new Wc(s):new Jf(e,s);return jP(t._repo,t,a),()=>RI(t._repo,t,a)}function Qw(t,e,n,r){return YP(t,"value",e,n,r)}nP(kt);aP(kt);var KP="FIREBASE_DATABASE_EMULATOR_HOST",Xf={},QP=!1;function ZP(t,e,n,r){t.repoInfo_=new wc(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function JP(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||Qt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ce("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=xI(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[KP]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=xI(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new qo(qo.OWNER):new ff(t.name,t.options,e);NP("Invalid Firebase Database URL",s),V(s.path)||Qt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=ek(a,t,u,new hf(t.name,n));return new ep(d,t)}function XP(t,e){let n=Xf[e];(!n||n[t.key]!==t)&&Qt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),UP(t),delete n[t.key]}function ek(t,e,n,r){let i=Xf[e.name];i||(i={},Xf[e.name]=i);let o=i[t.toURLString()];return o&&Qt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Qf(t,QP,n,r),i[t.toURLString()]=o,o}var ep=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(PP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new kt(this._repo,z())),this._rootInternal}_delete(){return this._rootInternal!==null&&(XP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qt("Cannot call "+e+" on a deleted database.")}};function Zw(t=Ro(),e){let n=kh(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=l_("database");r&&Jw(n,...r)}return n}function Jw(t,e,n,r={}){t=He(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Qt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Qt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new qo(qo.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:d_(r.mockUserToken,t.app.options.projectId);o=new qo(s)}ZP(i,e,n,o)}function tk(t){bx(ri),yn(new tt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return JP(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),me(eI,tI,t),me(eI,tI,"esm2017")}op.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};op.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};tk();var hr=class{constructor(e){return e}},Xw="database",Dp=class{constructor(){return Oo(Xw)}};var bp=new b("angularfire2.database-instances");function nk(t,e){let n=Vh(Xw,t,e);return n&&new hr(n)}function rk(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new hr(r)}}var ik={provide:Dp,deps:[[new Ct,bp]]},ok={provide:hr,useFactory:nk,deps:[[new Ct,bp],nr]};function eE(t,...e){return me("angularfire",oi.full,"rtdb"),an([ok,ik,{provide:bp,useFactory:rk(t),multi:!0,deps:[te,Dt,Po,ko,[new Ct,yc],[new Ct,xo],...e]}])}var tE=nt(Dn,!0);var nE=nt(Kw,!0),rE=nt(Zw,!0);var Tp=nt(Qw,!0);var Sp=nt(qw,!0);var Ii=nt(Gw,!0);var iE=nt(Yw,!0);var Ap=nt(Xc,!0);var ye;(function(t){let e;(function(s){s[s.TeamA=0]="TeamA",s[s.TeamB=1]="TeamB"})(e=t.TeamType||(t.TeamType={}));class n{constructor(a,c,l,u,d){this.x=0,this.y=0,this.key="",this.name=a,this.userId=c,this.team=l,this.x=u,this.y=d}}t.Player=n;class r{constructor(a,c,l,u){this.ANoPlayers=0,this.BNoPlayers=0,this.AName=a,this.BName=c,this.ALogo=l,this.BLogo=u}}t.TeamManager=r;class i{constructor(a,c){this.force=a,this.team=c}}t.Forces=i;class o{constructor(a,c,l,u,d,h){this.players=[],this.forces=[],this.update_no=0,this.name=a,this.active=!1,this.teams=c,this.startTime=l,this.endTime=u,this.minPlayers=d,this.adUrl=h,this.updates_subj=new Q,this.updates$=this.updates_subj.asObservable()}addPlayers(a){this.teams.ANoPlayers=0,this.teams.BNoPlayers=0;let c=[];Object.values(a).forEach(l=>{let u=l.name,d=l.userId,h=l.x,f=l.y,p=l.team==0?e.TeamA:e.TeamB;p==e.TeamA?this.teams.ANoPlayers++:this.teams.BNoPlayers++;let v=new n(u,d,p,h,f);c.push(v)}),this.players=c,this.checkActive(),this.updates_subj.next(this.update_no),this.update_no++}addForces(a){let c=[];Object.values(a).forEach(l=>{let u=l.force,d=l.team,h=new i(u,d);c.push(h)}),this.forces=c,this.updates_subj.next(this.update_no),this.update_no++}checkActive(){if(this.teams.ANoPlayers>=this.minPlayers&&this.teams.BNoPlayers>=this.minPlayers){let a=new Date().getTime();console.log("Todo, fix start time."),a>this.startTime&&a<this.endTime&&(this.active=!0)}}}t.Competition=o})(ye||(ye={}));var We=(()=>{let e=class e{};e.WIDTH=480,e.HEIGHT=180,e.PLAYER_FORCE=50;let t=e;return t})();var it=(()=>{let e=class e{constructor(r){this.db=r,this.competition=null,this.playerListRef=null,this.newPlayerPostRef=null,this.forceListRef=null,this.competition_subj=new Q,this.competition$=this.competition_subj.asObservable(),this.userJoin=new Q,this.userJoin$=this.userJoin.asObservable(),this.currentUser=new ye.Player("","",ye.TeamType.TeamA,0,0)}init(){this.playerListRef=Ii(this.db,"players"),this.forceListRef=Ii(this.db,"forces"),this.newPlayerPostRef=Sp(this.playerListRef)}deleteLocalUser(){localStorage.removeItem("user"),this.userJoin.next(!1)}createLocalPlayer(r){console.log(r),this.currentUser.name=r.name,this.currentUser.userId=r.userId,this.currentUser.key=this.newPlayerPostRef?.key||"",this.currentUser.team=r.team===0?ye.TeamType.TeamA:ye.TeamType.TeamB;let i=Math.floor(Math.random()*10);this.setPlayerPosition(i),this.userJoin.next(!0),this.createNetworkPlayer()}setPlayerPosition(r){let i=12,o=r*i+120,s=this.currentUser.team==ye.TeamType.TeamA?-1:1,a=We.WIDTH,c=We.HEIGHT,l=a/2+s*o,u=Math.floor(Math.random()*3)-1,d=c/2+u*i;this.currentUser.x=l,this.currentUser.y=d}createNetworkPlayer(){this.newPlayerPostRef!=null&&(console.log(this.currentUser),Ap(this.newPlayerPostRef,this.currentUser))}createForces(r){if(this.forceListRef==null)return;let i={force:r,team:this.currentUser.team},o=Sp(this.forceListRef);Ap(o,i),console.log("new forces.")}deleteNetworkPlayer(){this.newPlayerPostRef!=null&&iE(this.newPlayerPostRef)}getPlayers(){let r=Ii(this.db,"players");Tp(r,i=>{let o=i.val();this.parsePlayers(o)})}getCompetition(){let r=Ii(this.db);nE(tE(r,"competition")).then(i=>{i.exists()?this.parseCompetition(i.val()):console.log("No data available")}).catch(i=>{console.error(i)})}getForces(){let r=Ii(this.db,"forces");Tp(r,i=>{let o=i.val();console.log(o),this.parseForces(o)})}parseForces(r){r!=null&&this.competition?.addForces(r)}parsePlayers(r){r!=null&&this.competition?.addPlayers(r)}parseCompetition(r){let i=r.name,o=r.teams.A,s=r.teams.B,a=r.time.start,c=r.time.end,l=r.min_players,u=r.logo_a_url,d=r.logo_b_url,h=r.ad_url||"assets/ad.jpg",f=new ye.TeamManager(o,s,u,d);this.competition=new ye.Competition(i,f,a,c,l,h),this.competition_subj.next(this.competition)}};e.\u0275fac=function(i){return new(i||e)(O(hr))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oE=(()=>{let e=class e{constructor(){this.startTime=0,this.formattedTime=new Q,this.formattedTime$=this.formattedTime.asObservable()}start(r){this.startTime=r,this.handleTimer()}formatTime(r){let i=r%60,o=String(i).padStart(2,"0"),s=Math.floor(r/60)%60,a=String(s).padStart(2,"0");return`${Math.floor(r/3600)}:${a}:${o}`}handleTimer(){let r=new Date().getTime(),i=Math.floor((this.startTime-r)/1e3);if(i>0){let o=this.formatTime(i);this.formattedTime.next(o),setTimeout(()=>{this.handleTimer()},1e3)}else this.formattedTime.next("Over")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var sE=(()=>{let e=class e{constructor(r,i){this.db=r,this.cd=i,this.cdTime=""}ngOnInit(){this.db.competition!=null&&this.getCountDown(this.db.competition.startTime)}getCountDown(r){this.cd.start(r),this.cd.formattedTime$.subscribe(i=>{this.cdTime=i})}};e.\u0275fac=function(i){return new(i||e)(T(it),T(oE))},e.\u0275cmp=Oe({type:e,selectors:[["app-count-down"]],standalone:!0,features:[ke],decls:3,vars:1,consts:[[1,"button","count-down","column"],[1,"count-down-text"]],template:function(i,o){i&1&&(w(0,"div",0)(1,"div",1),W(2),E()()),i&2&&(Y(2),fe(o.cdTime))},styles:[".count-down[_ngcontent-%COMP%]{width:128px;height:128px;border-radius:50%;border-width:2px;color:#fff}.count-down-text[_ngcontent-%COMP%]{align-self:center}"]});let t=e;return t})();var pE=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(T(un),T(Gt))},e.\u0275dir=Pe({type:e});let t=e;return t})(),Op=(()=>{let e=class e extends pE{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Hn(e)))(o||e)}})(),e.\u0275dir=Pe({type:e,features:[dn]});let t=e;return t})(),rl=new b("");var ck={provide:rl,useExisting:jn(()=>il),multi:!0};function lk(){let t=Yt()?Yt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var uk=new b(""),il=(()=>{let e=class e extends pE{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!lk())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(T(un),T(Gt),T(uk,8))},e.\u0275dir=Pe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Ae("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Ki([ck]),dn]});let t=e;return t})();var dk=new b(""),hk=new b("");function gE(t){return t!=null}function mE(t){return zn(t)?ce(t):t}function vE(t){let e={};return t.forEach(n=>{e=n!=null?y(y({},e),n):e}),Object.keys(e).length===0?null:e}function yE(t,e){return e.map(n=>n(t))}function fk(t){return!t.validate}function _E(t){return t.map(e=>fk(e)?e:n=>e.validate(n))}function pk(t){if(!t)return null;let e=t.filter(gE);return e.length==0?null:function(n){return vE(yE(n,e))}}function IE(t){return t!=null?pk(_E(t)):null}function gk(t){if(!t)return null;let e=t.filter(gE);return e.length==0?null:function(n){let r=yE(n,e).map(mE);return Ml(r).pipe(U(vE))}}function wE(t){return t!=null?gk(_E(t)):null}function aE(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function EE(t){return t._rawValidators}function CE(t){return t._rawAsyncValidators}function Mp(t){return t?Array.isArray(t)?t:[t]:[]}function tl(t,e){return Array.isArray(t)?t.includes(e):t===e}function cE(t,e){let n=Mp(e);return Mp(t).forEach(i=>{tl(n,i)||n.push(i)}),n}function lE(t,e){return Mp(e).filter(n=>!tl(t,n))}var Np=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=IE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}};var hs=class extends Np{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Rp=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},mk={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},QW=X(y({},mk),{"[class.ng-submitted]":"isSubmitted"}),DE=(()=>{let e=class e extends Rp{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(T(hs,2))},e.\u0275dir=Pe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&pd("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[dn]});let t=e;return t})();var us="VALID",el="INVALID",Ei="PENDING",ds="DISABLED";function vk(t){return(ol(t)?t.validators:t)||null}function yk(t){return Array.isArray(t)?IE(t):t||null}function _k(t,e){return(ol(e)?e.asyncValidators:t)||null}function Ik(t){return Array.isArray(t)?wE(t):t||null}function ol(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var xp=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===us}get invalid(){return this.status===el}get pending(){return this.status==Ei}get disabled(){return this.status===ds}get enabled(){return this.status!==ds}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(cE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(lE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(lE(e,this._rawAsyncValidators))}hasValidator(e){return tl(this._rawValidators,e)}hasAsyncValidator(e){return tl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ei,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ds,this.errors=null,this._forEachChild(r=>{r.disable(X(y({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(X(y({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=us,this._forEachChild(r=>{r.enable(X(y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(X(y({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===us||this.status===Ei)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ds:us}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ei,this._hasOwnPendingAsyncValidator=!0;let n=mE(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?ds:this.errors?el:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ei)?Ei:this._anyControlsHaveStatus(el)?el:us}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ol(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=yk(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Ik(this._rawAsyncValidators)}};var bE=new b("CallSetDisabledState",{providedIn:"root",factory:()=>Pp}),Pp="always";function wk(t,e,n=Pp){Ck(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),bk(t,e),Sk(t,e),Tk(t,e),Ek(t,e)}function uE(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Dk(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function nl(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Ek(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Ck(t,e){let n=EE(t);e.validator!==null?t.setValidators(aE(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=CE(t);e.asyncValidator!==null?t.setAsyncValidators(aE(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();nl(e._rawValidators,i),nl(e._rawAsyncValidators,i)}function Dk(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=EE(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=CE(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return nl(e._rawValidators,r),nl(e._rawAsyncValidators,r),n}function bk(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&TE(t,e)})}function Tk(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&TE(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function TE(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Sk(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Ak(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Mk(t){return Object.getPrototypeOf(t.constructor)===Op}function Nk(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===il?n=o:Mk(o)?r=o:i=o}),i||r||n||null}function dE(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function hE(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var kp=class extends xp{constructor(e=null,n,r){super(vk(n),_k(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ol(n)&&(n.nonNullable||n.initialValueIsDefault)&&(hE(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){hE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var SE=new b(""),Rk={provide:hs,useExisting:jn(()=>Fp)},Fp=(()=>{let e=class e extends hs{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new Te,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Nk(this,o)}ngOnChanges(r){if(this._isControlChanged(r)){let i=r.form.previousValue;i&&uE(i,this,!1),wk(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Ak(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&uE(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(T(dk,10),T(hk,10),T(rl,10),T(SE,8),T(bE,8))},e.\u0275dir=Pe({type:e,selectors:[["","formControl",""]],inputs:{form:[Ye.None,"formControl","form"],isDisabled:[Ye.None,"disabled","isDisabled"],model:[Ye.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Ki([Rk]),dn,Br]});let t=e;return t})();var xk={provide:rl,useExisting:jn(()=>sl),multi:!0};function AE(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Ok(t){return t.split(":")[0]}var sl=(()=>{let e=class e extends Op{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=AE(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=Ok(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Hn(e)))(o||e)}})(),e.\u0275dir=Pe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&Ae("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ki([xk]),dn]});let t=e;return t})(),ME=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(AE(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(T(Gt),T(un),T(sl,9))},e.\u0275dir=Pe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),Pk={provide:rl,useExisting:jn(()=>NE),multi:!0};function fE(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function kk(t){return t.split(":")[0]}var NE=(()=>{let e=class e extends Op{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);o.push(u)}}else{let a=i.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);o.push(u)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=kk(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Hn(e)))(o||e)}})(),e.\u0275dir=Pe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&Ae("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ki([Pk]),dn]});let t=e;return t})(),RE=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(fE(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(fE(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(T(Gt),T(un),T(NE,9))},e.\u0275dir=Pe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var Fk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Bn({type:e}),e.\u0275inj=Un({});let t=e;return t})();var xE=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:SE,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:bE,useValue:r.callSetDisabledState??Pp}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Bn({type:e}),e.\u0275inj=Un({imports:[Fk]});let t=e;return t})();var al=(()=>{let e=class e{constructor(r){this.db=r,this.gameState=new Q,this.gameState$=this.gameState.asObservable(),this.overState=new Q,this.overState$=this.overState.asObservable()}init(){this.db.competition!=null&&(this.db.competition.updates$.subscribe(r=>{this.handleLogic()}),this.handleLogic(),console.log("start."))}handleLogic(){if(this.db.competition==null)return;let r=this.db.competition,i=r.forces,o=r.players,s=1/100,a=0,c=50;i.forEach(u=>{let d=u.team==ye.TeamType.TeamA?-1:1;a+=d*(c+u.force)});let l=a*s;o.forEach(u=>{u.x+=l}),this.handleUi()}handleUi(){if(this.db.competition==null)return;console.log("handle ui.");let i=this.db.competition.players,o=-1,s=!1;if(i.forEach(a=>{a.team==ye.TeamType.TeamA?a.x>We.WIDTH/2&&(s=!0,o=ye.TeamType.TeamB):a.x<We.WIDTH/2&&(s=!0,o=ye.TeamType.TeamA)}),this.gameState.next(i),console.log("pipe updates to be drawn."),s){this.overState.next(o);return}}};e.\u0275fac=function(i){return new(i||e)(O(it))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ci=(()=>{let e=class e{constructor(){this.myMessage=new Q,this.myTitle=new Q,this.myMessage$=this.myMessage.asObservable(),this.myTitle$=this.myTitle.asObservable(),this.onClose=new Q,this.onClose$=this.onClose.asObservable()}show(r,i){console.log(r,i),this.myTitle.next(r),this.myMessage.next(i),document.getElementById("dialog-notify").showModal()}close(){this.onClose.next(!0)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Vk(t,e){t&1&&re(0,"div")}function jk(t,e){t&1&&re(0,"div")}function Uk(t,e){if(t&1){let n=gd();w(0,"div",11)(1,"div",12),re(2,"input",13),w(3,"select",14)(4,"option",15),W(5),E(),w(6,"option",16),W(7),E()()(),w(8,"div",17),Ae("click",function(){$u(n);let i=qi(2);return Hu(i.join())}),W(9,"Join"),E()()}if(t&2){let n=qi(2);Y(2),Hr("formControl",n.inputName),Y(),Hr("formControl",n.inputTeam),Y(2),fe(n.comp==null||n.comp.teams==null?null:n.comp.teams.AName),Y(2),fe(n.comp==null||n.comp.teams==null?null:n.comp.teams.BName)}}function Bk(t,e){if(t&1){let n=gd();w(0,"div"),W(1,"\xA0"),E(),w(2,"div",17),Ae("click",function(){$u(n);let i=qi(2);return Hu(i.go())}),W(3,"Play"),E()}}function $k(t,e){if(t&1&&(w(0,"div",5)(1,"div",6),W(2),E(),w(3,"div"),W(4,"\xA0"),E(),w(5,"div",7)(6,"div",8)(7,"div"),re(8,"img",9),E(),w(9,"div",10)(10,"div"),W(11),E(),w(12,"div"),W(13),E()()(),w(14,"div"),W(15,"\xA0"),E(),w(16,"div"),W(17,"\xA0"),E(),w(18,"div",8)(19,"div"),re(20,"img",9),E(),w(21,"div",10)(22,"div"),W(23),E(),w(24,"div"),W(25),E()()()(),re(26,"app-count-down"),Aa(27,jk,1,0,"div",4)(28,Uk,10,4,"ng-template",null,2,Qi)(30,Bk,4,0,"ng-template",null,3,Qi),E()),t&2){let n=Yi(29),r=Yi(31),i=qi();Y(2),fe(i.comp==null?null:i.comp.name),Y(6),bt("src",i.comp==null||i.comp.teams==null?null:i.comp.teams.ALogo,qt),Y(3),fe(i.comp==null||i.comp.teams==null?null:i.comp.teams.AName),Y(2),fe(i.comp==null||i.comp.teams==null?null:i.comp.teams.ANoPlayers),Y(7),bt("src",i.comp==null||i.comp.teams==null?null:i.comp.teams.BLogo,qt),Y(3),fe(i.comp==null||i.comp.teams==null?null:i.comp.teams.BName),Y(2),fe(i.comp==null||i.comp.teams==null?null:i.comp.teams.BNoPlayers),Y(2),Hr("ngIf",i.hasJoin)("ngIfThen",r)("ngIfElse",n)}}function Hk(t,e){t&1&&(w(0,"div",18)(1,"div",19)(2,"div",20),W(3,"Rubiks"),E(),w(4,"div"),re(5,"img",21),E(),w(6,"div"),W(7,"\xA0"),E(),w(8,"div",22),W(9," No active competition. Please try again later. "),E()()())}var Vp=(()=>{let e=class e{constructor(r,i,o,s){this.db=r,this.physics=i,this.notify=o,this.route=s,this.comp=null,this.hasJoin=!1,this.inputName=new kp,this.inputTeam=new kp}ngOnInit(){this.db.competition$.subscribe(r=>{this.comp=r}),this.db.userJoin$.subscribe(r=>{this.hasJoin=r})}generateUserId(r){let i=[];for(let o=0;o<r;o++){let s=Math.floor(Math.random()*10);i.push(String(s))}return i.join("")}join(){let r=this.inputName.value,i=this.inputTeam.value;if(console.log(i),r&&i){let o={userId:this.generateUserId(10),name:r,force:0,team:Number(i)};this.db.createLocalPlayer(o)}else this.notify.show("Error","Enter your name and team.")}go(){this.comp?.active?this.route.navigate(["game"]):this.notify.show("Wait","Please wait for other players to join or game to start.")}};e.\u0275fac=function(i){return new(i||e)(T(it),T(al),T(Ci),T(ei))},e.\u0275cmp=Oe({type:e,selectors:[["app-join-component"]],standalone:!0,features:[ke],decls:5,vars:3,consts:[["thenBlock",""],["elseBlock",""],["joinBlock",""],["goBlock",""],[4,"ngIf","ngIfThen","ngIfElse"],[1,"competition","column","container"],[1,"name"],[1,"players","row"],[1,"player","column"],["width","100px","height","100px",3,"src"],[1,"column"],[1,"join","pad"],[1,"row"],["type","text","placeholder","Your name, sir","id","inputName",1,"input-join","input-name",3,"formControl"],["id","inputTeam",1,"input-join",3,"formControl"],["value","0"],["value","1"],[1,"button",3,"click"],[1,"no-competition","column"],[1,"container","column"],[1,"rubiks"],["src","assets/playon.svg","width","300","height","100"],[1,"small-text"]],template:function(i,o){if(i&1&&Aa(0,Vk,1,0,"div",4)(1,$k,32,10,"ng-template",null,0,Qi)(3,Hk,10,0,"ng-template",null,1,Qi),i&2){let s=Yi(2),a=Yi(4);Hr("ngIf",o.comp)("ngIfThen",s)("ngIfElse",a)}},dependencies:[Xi,hy,sE,xE,ME,RE,il,sl,DE,Fp],styles:[".no-competition[_ngcontent-%COMP%]{width:100%;height:100%}.input-join[_ngcontent-%COMP%]{height:30px;padding-block:0px;padding-inline:0px;border-style:none}.input-name[_ngcontent-%COMP%]{border-right:2px;border-style:solid}"]});let t=e;return t})();var cl=class{constructor(){this.state=[],this.width=We.WIDTH,this.height=We.HEIGHT,this.canvas=document.getElementById("game-canvas"),this.ctx=this.canvas.getContext("2d"),this.rope=document.getElementById("rope")}drawRope(){this.ctx.drawImage(this.rope,0,this.height/2-23/2)}drawCenter(){this.ctx.fillStyle="black";let e=30;this.ctx.fillRect(this.width/2-e/2,0,e,this.height)}rgbFromName(e){let n=[],r="0123456789ABCDEF";for(let c=0;c<Math.min(e.length,6);c++){let l=e.charCodeAt(c)%16,u=r[l];n.push(u)}if(n.length<6)for(let c=0;c<6-n.length;c++)n.push("00");let i=n.join(""),o=+("0x"+i.slice(0,2)),s=+("0x"+i.slice(2,4)),a=+("0x"+i.slice(4,6));return"rgb("+o+","+s+","+a+")"}smoothStep(e,n,r){return r=this.clamp((r-e)/(n-e)),r*r*(3-2*r)}smoothStep2(e,n,r){var i=Math.max(0,Math.min(1,(r-e)/(n-e)));return i*i*(3-2*i)+e}clamp(e,n=0,r=1){return e<n?n:e>r?r:e}drawPlayer(e){let n=this.rgbFromName(e.name);this.ctx.fillStyle=n;let r=20+e.name.length*2;this.ctx.beginPath(),this.ctx.ellipse(e.x,e.y,r,r,0,0,2*Math.PI),this.ctx.fill(),this.ctx.fillStyle="white";let i=e.name,o=this.ctx.measureText(i);this.ctx.fillText(i,e.x-o.width/2,e.y)}drawPlayers(){this.state.forEach(e=>this.drawPlayer(e))}drawBackground(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.fillStyle="black",this.ctx.fillText("Players:"+this.state.length,5,15)}draw(){this.drawBackground(),this.drawCenter(),this.drawRope(),this.drawPlayers()}update(e){console.log(e),this.state=e,this.draw(),console.log("Drawing done.")}};var PE=(()=>{let e=class e{constructor(r,i,o,s){this.physics=r,this.route=i,this.db=o,this.notify=s,this.gameState=[],this.comp=null,this.myTeamLogo="",this.canPull=!0,this.PULL_COOLDOWN=2e3,this.width="480px",this.height="180px",this.width=String(We.WIDTH)+"px",this.height=String(We.HEIGHT)+"px",console.log(this.width)}ngOnDestroy(){this.db.deleteNetworkPlayer()}ngOnInit(){if(this.comp=this.db.competition,this.comp==null){this.route.navigate([""]);return}this.myTeamLogo=this.db.currentUser.team==ye.TeamType.TeamA?this.comp?.teams.ALogo:this.comp?.teams.BLogo;let r=new cl;this.physics.gameState$.subscribe(i=>{console.log("Subscriber: gameState."),this.gameState=i,r.update(this.gameState)}),this.physics.overState$.subscribe(i=>{this.gameOver(i)})}ngAfterViewInit(){this.physics.init(),console.log("started")}gameOver(r){let o=(r==ye.TeamType.TeamA?this.comp?.teams.AName:this.comp?.teams.BName)||"";this.notify.show("Game over!","The winner is "+o),this.notify.onClose$.subscribe(s=>{this.afterGameOver()})}afterGameOver(){this.db.deleteLocalUser(),this.db.deleteNetworkPlayer(),this.route.navigate([""])}pull(){if(!this.canPull)return;this.canPull=!1,setTimeout(()=>{this.canPull=!0},this.PULL_COOLDOWN),console.log("pull");let r=We.PLAYER_FORCE+Math.random()*10;this.db.createForces(r)}};e.\u0275fac=function(i){return new(i||e)(T(al),T(ei),T(it),T(Ci))},e.\u0275cmp=Oe({type:e,selectors:[["app-game-component"]],standalone:!0,features:[ke],decls:33,vars:10,consts:[[1,"competition","column","container"],[1,"name"],[1,"players","row"],[1,"player","column"],["width","100px","height","100px",3,"src"],[1,"column"],[1,"game"],[2,"display","none"],["id","rope","src","assets/rope.png","width","480px","height","23px"],["id","game-canvas"],[1,"button",3,"click"],["width","24px","height","24px",3,"src"]],template:function(i,o){i&1&&(w(0,"div",0)(1,"div",1),W(2),E(),w(3,"div"),W(4,"\xA0"),E(),w(5,"div",2)(6,"div",3)(7,"div"),re(8,"img",4),E(),w(9,"div",5)(10,"div"),W(11),E(),w(12,"div"),W(13),E()()(),w(14,"div"),W(15,"\xA0"),E(),w(16,"div"),W(17,"\xA0"),E(),w(18,"div",3)(19,"div"),re(20,"img",4),E(),w(21,"div",5)(22,"div"),W(23),E(),w(24,"div"),W(25),E()()()(),w(26,"div",6)(27,"div",7),re(28,"img",8),E(),re(29,"canvas",9),E(),w(30,"div",10),Ae("click",function(){return o.pull()}),re(31,"img",11),W(32," Pull "),E()()),i&2&&(Y(2),fe(o.comp==null?null:o.comp.name),Y(6),bt("src",o.comp==null||o.comp.teams==null?null:o.comp.teams.ALogo,qt),Y(3),fe(o.comp==null||o.comp.teams==null?null:o.comp.teams.AName),Y(2),fe(o.comp==null||o.comp.teams==null?null:o.comp.teams.ANoPlayers),Y(7),bt("src",o.comp==null||o.comp.teams==null?null:o.comp.teams.BLogo,qt),Y(3),fe(o.comp==null||o.comp.teams==null?null:o.comp.teams.BName),Y(2),fe(o.comp==null||o.comp.teams==null?null:o.comp.teams.BNoPlayers),Y(4),Gi("width",o.width)("height",o.height),Y(2),bt("src",o.myTeamLogo,qt))},styles:[".game[_ngcontent-%COMP%]{width:100%;height:180px}#game-canvas[_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();var kE=[{path:"join",component:Vp},{path:"game",component:PE},{path:"",component:Vp}];var FE={providers:[n_(kE),P_(()=>k_({apiKey:"AIzaSyBPDdikqDWMXu2jf2-eo0CP5vgOnH3TSBs",authDomain:"tugofwar-65951.firebaseapp.com",projectId:"tugofwar-65951",storageBucket:"tugofwar-65951.appspot.com",messagingSenderId:"258700330053",appId:"1:258700330053:web:64e5aea33d7a56e0fc0f2c",measurementId:"G-N9EF2MK40E"})),eE(()=>rE())]};var LE=(()=>{let e=class e{constructor(r){this.notify=r,this.message="",this.title=""}ngOnInit(){this.notify.myMessage$.subscribe(r=>{this.message=r,console.log(r)}),this.notify.myTitle$.subscribe(r=>{this.title=r})}close(){document.getElementById("dialog-notify").close(),this.notify.close()}};e.\u0275fac=function(i){return new(i||e)(T(Ci))},e.\u0275cmp=Oe({type:e,selectors:[["app-notify-component"]],standalone:!0,features:[ke],decls:12,vars:2,consts:[["id","dialog-notify"],[1,"column"],[1,"row","header",3,"click"],[1,"title"],[1,"close"],["src","assets/close-dialog.png","width","32px","height","32px"],[1,"separator"],[1,"message"]],template:function(i,o){i&1&&(w(0,"dialog",0)(1,"div",1)(2,"div",2),Ae("click",function(){return o.close()}),w(3,"div",3),W(4),E(),w(5,"div",4),re(6,"img",5),E()(),re(7,"div",6),w(8,"div"),W(9,"\xA0"),E(),w(10,"div",7),W(11),E()()()),i&2&&(Y(4),fe(o.title),Y(7),Ma(" ",o.message," "))},styles:[".header[_ngcontent-%COMP%]{height:32px;justify-content:space-between;width:100%}.separator[_ngcontent-%COMP%]{height:2px;background-color:#8b0000;width:100%}dialog[_ngcontent-%COMP%]{background-color:brown;color:#fff;font-size:large}"]});let t=e;return t})();var VE=(()=>{let e=class e{constructor(r){this.db=r,this.url="assets/ad.jpg"}ngOnInit(){this.db.competition$.subscribe(r=>{this.url=r.adUrl})}};e.\u0275fac=function(i){return new(i||e)(T(it))},e.\u0275cmp=Oe({type:e,selectors:[["app-ad"]],standalone:!0,features:[ke],decls:2,vars:1,consts:[[1,"ad","column"],["height","200px",3,"src"]],template:function(i,o){i&1&&(w(0,"div",0),re(1,"img",1),E()),i&2&&(Y(),bt("src",o.url,qt))}});let t=e;return t})();var jE=(()=>{let e=class e{constructor(r){this.db=r,this.title="Tug Of War"}ngOnInit(){this.db.init(),this.db.getCompetition(),this.db.getPlayers(),this.db.getForces()}beforeUnloadHandler(r){this.db.deleteLocalUser(),this.db.deleteNetworkPlayer()}};e.\u0275fac=function(i){return new(i||e)(T(it))},e.\u0275cmp=Oe({type:e,selectors:[["app-root"]],hostBindings:function(i,o){i&1&&Ae("beforeunload",function(a){return o.beforeUnloadHandler(a)},!1,dv)},standalone:!0,features:[ke],decls:4,vars:0,consts:[[1,"row"]],template:function(i,o){i&1&&(re(0,"app-notify-component"),w(1,"div",0),re(2,"router-outlet")(3,"app-ad"),E())},dependencies:[Xi,ch,LE,VE]});let t=e;return t})();wy(jE,FE).catch(t=>console.error(t));
